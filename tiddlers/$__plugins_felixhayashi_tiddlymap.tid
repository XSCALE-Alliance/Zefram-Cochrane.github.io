author: Felix Küppers
core-version: >=5.1.5
created: 20150929190530427
dependents: $:/plugins/felixhayashi/vis
depends: $:/plugins/felixhayashi/vis
description: TiddlyMap – Map drawing and topic visualization for your wiki
list: readme license
plugin-type: plugin
released: Tue, 22 Sep 2015 15:04:17 +0200
source: https://github.com/felixhayashi/TW5-TiddlyMap
suggested: $:/plugins/felixhayashi/topstoryview
title: $:/plugins/felixhayashi/tiddlymap
type: application/json
version: 0.9.2+6013

{
    "tiddlers": {
        "$:/plugins/felixhayashi/tiddlymap/layout": {
            "title": "$:/plugins/felixhayashi/tiddlymap/layout",
            "type": "text/vnd.tiddlywiki",
            "tags": [
                "$:/tags/Stylesheet"
            ],
            "text": "/**** TiddlyWiki ***************************************************/\n/**\n * Do not allow blurred background for dialogs\n * see: https://github.com/Jermolene/TiddlyWiki5/issues/1893\n */\n.tc-page-container-wrapper.tc-modal-displayed {\n  -webkit-filter: inherit;\n  -moz-filter: inherit;\n  filter: inherit; }\n\n/**** Flash messages ***********************************************/\n.tmap-flash-message {\n  border: 1px solid lightgray;\n  padding: 5px;\n  margin: 6px 0; }\n  .tmap-flash-message svg {\n    vertical-align: text-top;\n    width: 1em;\n    height: 1em; }\n  .tmap-flash-message.tmap-valid, .tmap-flash-message.tmap-info {\n    background: #D1EED4; }\n  .tmap-flash-message.tmap-neutral, .tmap-flash-message.tmap-warning {\n    background: #FFF6D1; }\n  .tmap-flash-message.tmap-malformed, .tmap-flash-message.tmap-invalid, .tmap-flash-message.tmap-danger {\n    background: #EED5D1; }\n\n/*******************************************************************/\n.tmap-list-separator {\n  display: block;\n  background-color: #efefef;\n  margin: 10px 0 5px 0;\n  cursor: default;\n  border-bottom: 1px dotted gray;\n  font-weight: bold;\n  font-size: 0.8em; }\n\n.tmap-graph-placeholder::before {\n  content: \"Map\";\n  display: block;\n  text-align: center;\n  padding: 20px;\n  background-color: whitesmoke; }\n\n.tmap-unicode-icon {\n  width: 1em;\n  display: inline-block;\n  text-align: center;\n  color: black; }\n\nhtml {\n  /*\n  body {\n    background: url(unquote('<$macrocall $name=\"makedatauri\" type={{$:/plugins/felixhayashi/tiddlymap/media/surface.png!!type}} text={{$:/plugins/felixhayashi/tiddlymap/media/surface.png}}/>'));\n  }\n  */ }\n  html .tmap-link {\n    color: #5778D8; }\n    html .tmap-link:hover {\n      color: white;\n      background: #5778D8; }\n  html .tmap-small-list, html .tmap-very-small-list {\n    overflow: auto;\n    min-height: 20px;\n    max-height: 150px;\n    display: block; }\n  html .tmap-very-small-list {\n    max-height: 70px; }\n  html .tc-tiddler-controls button.tmap-active-button svg {\n    fill: #888888; }\n  html .tmap-quick-connect {\n    font-size: 0.7em; }\n    html .tmap-quick-connect .tc-drop-down {\n      padding: 5px;\n      width: 250px;\n      white-space: normal;\n      line-height: 1em;\n      position: absolute;\n      z-index: 1000;\n      right: 50px;\n      background: linear-gradient(45deg, #f5f5f5 0%, #ffffff 50%, #f5f5f5 100%); }\n      html .tmap-quick-connect .tc-drop-down select {\n        width: 80px;\n        word-wrap: initial; }\n      html .tmap-quick-connect .tc-drop-down table {\n        width: 100%;\n        border: none;\n        margin-bottom: 0px; }\n        html .tmap-quick-connect .tc-drop-down table td {\n          padding: 3px;\n          border: none;\n          vertical-align: top; }\n      html .tmap-quick-connect .tc-drop-down .tmap-scroll-table {\n        height: 120px;\n        overflow: auto;\n        display: block; }\n      html .tmap-quick-connect .tc-drop-down hr {\n        border: 0;\n        height: 0;\n        border-top: 1px solid rgba(0, 0, 0, 0.1);\n        border-bottom: 1px solid rgba(255, 255, 255, 0.3); }\n      html .tmap-quick-connect .tc-drop-down a {\n        display: inline;\n        padding: 0;\n        color: #5778d8;\n        background: transparent; }\n        html .tmap-quick-connect .tc-drop-down a:hover {\n          background: transparent;\n          color: #5778d8;\n          text-decoration: underline; }\n      html .tmap-quick-connect .tc-drop-down span.tmap-hide-links {\n        float: right; }\n      html .tmap-quick-connect .tc-drop-down button {\n        display: inline-block;\n        padding: 0px 3px;\n        width: auto;\n        text-align: left;\n        color: #333333;\n        line-height: 1; }\n        html .tmap-quick-connect .tc-drop-down button:hover {\n          color: #ffffff; }\n        html .tmap-quick-connect .tc-drop-down button svg:hover {\n          fill: #ffffff; }\n  html .tc-modal-wrapper {\n    z-index: 1010; }\n    html .tc-modal-wrapper .tc-modal {\n      boder: 1px solid #999999;\n      left: calc(50% - 400px);\n      width: 802px; }\n    html .tc-modal-wrapper .tc-modal-header svg {\n      vertical-align: sub; }\n    html .tc-modal-wrapper .tc-modal-header h3 {\n      line-height: 10px; }\n    html .tc-modal-wrapper .tc-modal-body {\n      min-height: 250px;\n      max-height: 70vh;\n      overflow: auto;\n      left: calc(50% - 400px);\n      width: 800px; }\n      html .tc-modal-wrapper .tc-modal-body > div > p:first-child {\n        margin-top: 0px; }\n      html .tc-modal-wrapper .tc-modal-body > div > p:last-child {\n        margin-bottom: 0px; }\n      html .tc-modal-wrapper .tc-modal-body .tc-image-button {\n        font-size: 14px; }\n      html .tc-modal-wrapper .tc-modal-body .tmap-modal-editor .tc-tiddler-frame {\n        padding: 0px;\n        width: auto;\n        margin: 0px;\n        border: none; }\n        html .tc-modal-wrapper .tc-modal-body .tmap-modal-editor .tc-tiddler-frame .tc-tiddler-title {\n          display: none; }\n      html .tc-modal-wrapper .tc-modal-body #element-type-manager .tc-tab-buttons {\n        padding-top: 0px; }\n      html .tc-modal-wrapper .tc-modal-body #element-type-manager > div:first-child {\n        height: 100%;\n        float: left;\n        width: 20%;\n        position: fixed; }\n        html .tc-modal-wrapper .tc-modal-body #element-type-manager > div:first-child .searchbar input {\n          width: 100%; }\n        html .tc-modal-wrapper .tc-modal-body #element-type-manager > div:first-child ul {\n          height: calc(100% - 135px);\n          overflow: auto;\n          margin: 5px 0 0 0;\n          padding-left: 0px;\n          list-style: none;\n          background: linear-gradient(45deg, #f5f5f5 0%, #ffffff 50%, #f5f5f5 100%); }\n          html .tc-modal-wrapper .tc-modal-body #element-type-manager > div:first-child ul li {\n            white-space: nowrap; }\n            html .tc-modal-wrapper .tc-modal-body #element-type-manager > div:first-child ul li input.tmap-ranking {\n              width: 25px; }\n      html .tc-modal-wrapper .tc-modal-body #element-type-manager > div:last-child {\n        height: 100%;\n        width: calc(80% - 20px);\n        margin-left: 22%; }\n      html .tc-modal-wrapper .tc-modal-body fieldset legend {\n        font-weight: bold; }\n      html .tc-modal-wrapper .tc-modal-body table {\n        margin: 6px 0;\n        clear: both;\n        border: none;\n        width: 100%; }\n        html .tc-modal-wrapper .tc-modal-body table td, html .tc-modal-wrapper .tc-modal-body table th {\n          border: 1px solid lightgray; }\n        html .tc-modal-wrapper .tc-modal-body table.tmap-key-value-table th {\n          width: 30%;\n          background-color: #F0F0F0; }\n        html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr:nth-child(odd) {\n          background-color: #F0F0F0; }\n        html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr:nth-child(even) {\n          background-color: #FFFFFF; }\n        html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr:hover {\n          background-color: #FFFFF3; }\n        html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr td {\n          border: none;\n          vertical-align: top;\n          padding: 5px; }\n          html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr td:first-child {\n            width: 15%; }\n          html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr td:last-child {\n            width: 40%; }\n          html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr td input:not([type=radio]), html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr td textarea, html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr td select {\n            width: 100%;\n            /* prevents bad looking select boxes and wrapping in textareas */\n            word-wrap: normal; }\n          html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr td div.tmap-button-wrapper {\n            text-align: center; }\n        html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr .tmap-note {\n          margin-top: 0.5em; }\n        html .tc-modal-wrapper .tc-modal-body table.tmap-config-table tr .tmap-description {\n          font-style: italic; }\n        html .tc-modal-wrapper .tc-modal-body table ul {\n          padding-left: 30px; }\n          html .tc-modal-wrapper .tc-modal-body table ul li {\n            list-style: none; }\n    html .tc-modal-wrapper .tc-modal-footer {\n      padding: 8px; }\n      html .tc-modal-wrapper .tc-modal-footer .tmap-dialog-button {\n        font-weight: bold; }\n      html .tc-modal-wrapper .tc-modal-footer .tmap-hidden-close-button {\n        display: none; }\n  html #tmap-node-filter-dialog #tmap-filter-tips {\n    font-size: 0.8em; }\n  html #tmap-node-filter-dialog textarea {\n    height: 100px;\n    max-height: 300px;\n    overflow: auto;\n    width: 100%;\n    font-size: 11px;\n    font-family: \"Courier New\", Courier, monospace; }\n  html .tc-sidebar-scrollable .tmap-widget {\n    position: relative;\n    min-height: 350px; }\n    html .tc-sidebar-scrollable .tmap-widget.tmap-halfscreen {\n      position: absolute;\n      right: 0px;\n      top: 0;\n      left: 0px;\n      bottom: 0;\n      padding: 0px;\n      width: 100% !important;\n      border: none;\n      border-left: 1px solid lightgray;\n      height: 100% !important;\n      margin: 0;\n      background: #ececec;\n      z-index: 1000; }\n      html .tc-sidebar-scrollable .tmap-widget.tmap-halfscreen .tmap-fullscreen-button {\n        display: none; }\n  html .tmap-widget {\n    position: relative;\n    border: 1px dotted lightgray;\n    padding: 2px;\n    width: 100%;\n    color: #666666;\n    display: block; }\n    html .tmap-widget.tmap-fullscreen .vis-network .tmap-halfscreen-button {\n      display: none; }\n    html .tmap-widget.tmap-click-to-use:not(.tmap-fullscreen) .vis-network:not(.vis-active) {\n      cursor: pointer; }\n      html .tmap-widget.tmap-click-to-use:not(.tmap-fullscreen) .vis-network:not(.vis-active) .vis-navigation {\n        display: none; }\n      html .tmap-widget.tmap-click-to-use:not(.tmap-fullscreen) .vis-network:not(.vis-active):hover:before {\n        box-shadow: 10px 10px 5px lightgray;\n        color: gray;\n        background: white;\n        content: \"Click to use\";\n        font-size: 18px;\n        font-weight: bold;\n        left: 50%;\n        margin-left: -100px;\n        position: absolute;\n        text-align: center;\n        top: 50px;\n        width: 200px;\n        z-index: 2000;\n        padding: 5px;\n        pointer-events: none; }\n    html .tmap-widget .tmap-loading-bar {\n      display: block;\n      position: absolute;\n      text-align: center;\n      font-size: 2em;\n      padding: 10px;\n      top: 50%;\n      background: rgba(245, 245, 245, 0.5);\n      z-index: 1;\n      width: 250px;\n      margin: auto;\n      left: 0px;\n      right: 0px; }\n    html .tmap-widget .tmap-vis-graph {\n      height: calc(100% - 35px); }\n      html .tmap-widget .tmap-vis-graph .vis-network .vis-network-tooltip {\n        max-width: 250px;\n        white-space: normal; }\n      html .tmap-widget .tmap-vis-graph .vis-network .vis-manipulation {\n        border-top: 1px solid #d6d9d8;\n        background: rgba(245, 245, 245, 0.7); }\n      html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button.tmap-button-enabled {\n        right: 15px; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button.tmap-button-enabled.tmap-fullscreen-button {\n          bottom: 90px;\n          background-image: url(<$macrocall $name=\"makedatauri\" type=\"image/png\" text={{$:/plugins/felixhayashi/tiddlymap/media/fullscreen.png}} />); }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button.tmap-button-enabled.tmap-halfscreen-button {\n          bottom: 130px;\n          background-image: url(<$macrocall $name=\"makedatauri\" type=\"image/png\" text={{$:/plugins/felixhayashi/tiddlymap/media/halfscreen.png}} />); }\n      html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover {\n        box-shadow: 0 0 3px 3px rgba(75, 75, 75, 0.3); }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover:before {\n          background: beige;\n          display: block;\n          color: black;\n          padding: 3px;\n          position: relative;\n          border: 1px solid lightgray;\n          width: 80px;\n          left: -70px;\n          top: -30px;\n          z-index: 1000;\n          text-align: center; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover.vis-up:before {\n          left: 30px;\n          content: \"Scroll up\"; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover.vis-down:before {\n          left: 30px;\n          content: \"Scroll down\"; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover.vis-right:before {\n          left: 30px;\n          content: \"Scroll right\"; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover.vis-left:before {\n          left: 30px;\n          content: \"Scroll left\"; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover.vis-zoomOut:before {\n          content: \"Zoom out\"; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover.vis-zoomIn:before {\n          content: \"Zoom in\"; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover.vis-zoomExtends:before {\n          content: \"Fit whole graph\"; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover.tmap-fullscreen-button:before {\n          content: \"Toggle Fullscreen\"; }\n        html .tmap-widget .tmap-vis-graph .vis-network .vis-navigation .vis-button:hover.tmap-halfscreen-button:before {\n          content: \"Toggle Halfscreen\"; }\n    html .tmap-widget.tmap-no-buttons .vis-navigation {\n      display: none; }\n    html .tmap-widget.tmap-advanced-editor {\n      background: #F2F2F2; }\n      html .tmap-widget.tmap-advanced-editor .tmap-topbar {\n        background: #d6d9d8; }\n        html .tmap-widget.tmap-advanced-editor .tmap-topbar .tmap-neigh-scope-button {\n          font-size: 1.5em;\n          vertical-align: middle; }\n    html .tmap-widget .tmap-menu-bar {\n      width: 100%; }\n    html .tmap-widget .tmap-topbar {\n      background: #F5F5F5;\n      border-bottom: 1px solid lightgray;\n      padding: 3px 5px;\n      height: 35px;\n      position: relative; }\n      html .tmap-widget .tmap-topbar .tmap-view-label {\n        width: 100%;\n        text-align: center;\n        font-weight: bold;\n        padding-top: 3px; }\n      html .tmap-widget .tmap-topbar .tmap-focus-button {\n        position: absolute;\n        right: 10px; }\n        html .tmap-widget .tmap-topbar .tmap-focus-button input {\n          width: 140px; }\n      html .tmap-widget .tmap-topbar .tmap-popup {\n        position: relative; }\n        html .tmap-widget .tmap-topbar .tmap-popup .tc-drop-down {\n          position: absolute;\n          z-index: 999;\n          right: 0px; }\n      html .tmap-widget .tmap-topbar .tc-drop-down {\n        background-color: #F3F3F3;\n        min-width: 170px;\n        max-width: 210px;\n        padding: 5px;\n        margin: 5px 0; }\n        html .tmap-widget .tmap-topbar .tc-drop-down button, html .tmap-widget .tmap-topbar .tc-drop-down a {\n          padding: 0px;\n          text-decoration: none; }\n          html .tmap-widget .tmap-topbar .tc-drop-down button:hover, html .tmap-widget .tmap-topbar .tc-drop-down a:hover {\n            color: #ffffff; }\n          html .tmap-widget .tmap-topbar .tc-drop-down button svg, html .tmap-widget .tmap-topbar .tc-drop-down a svg {\n            vertical-align: middle; }\n      html .tmap-widget .tmap-topbar [hidden] {\n        display: none; }\n      html .tmap-widget .tmap-topbar .tc-block-dropdown {\n        width: 370px;\n        min-width: 370px;\n        padding: 5px;\n        margin: 15px 0 0 -370px; }\n        html .tmap-widget .tmap-topbar .tc-block-dropdown a {\n          display: inline;\n          padding: 0px; }\n      html .tmap-widget .tmap-topbar select {\n        width: 30%;\n        max-width: 200px;\n        word-wrap: initial;\n        padding: 0px; }\n      html .tmap-widget .tmap-topbar button {\n        line-height: inherit;\n        color: #666666; }\n      html .tmap-widget .tmap-topbar > * {\n        display: inline-block; }\n      html .tmap-widget .tmap-topbar .tmap-separator:after {\n        color: #bdbdbd;\n        margin: 3px;\n        content: \" | \"; }\n      html .tmap-widget .tmap-topbar .tc-edit-add-tag .tc-add-tag-name input {\n        width: 70%; }\n      html .tmap-widget .tmap-topbar .tc-sidebar-header {\n        text-shadow: none; }\n      html .tmap-widget .tmap-topbar .tc-edit-tags {\n        border: none;\n        padding: inherit;\n        box-shadow: none; }\n\n/**** Config Widget ************************************************/\n.tmap-config-widget {\n  background: #F0F0F0;\n  padding: 5px;\n  margin: 5px 0;\n  box-sizing: border-box;\n  display: block; }\n  .tmap-config-widget .vis-network {\n    display: none; }\n  .tmap-config-widget .vis-configuration-wrapper {\n    width: 350px; }\n    .tmap-config-widget .vis-configuration-wrapper .vis-config-rangeinput {\n      height: inherit;\n      margin-left: 4px; }\n    .tmap-config-widget .vis-configuration-wrapper .vis-config-item {\n      width: 100%;\n      height: inherit;\n      background: none !important; }\n      .tmap-config-widget .vis-configuration-wrapper .vis-config-item .vis-config-range {\n        width: 150px; }\n        .tmap-config-widget .vis-configuration-wrapper .vis-config-item .vis-config-range::-moz-range-track {\n          width: 150px !important; }\n      .tmap-config-widget .vis-configuration-wrapper .vis-config-item .vis-config-label {\n        width: 120px; }\n  .tmap-config-widget .vis-color-picker {\n    width: 310px;\n    left: 20px !important;\n    top: 20px !important;\n    margin-top: 0px;\n    margin-left: 0px;\n    height: 444px; }\n  .tmap-config-widget::after {\n    clear: both;\n    content: \"\";\n    display: block; }\n\n/**** Fullscreen ***************************************************/\nhtml:fullscreen body {\n  overflow: hidden; }\nhtml:fullscreen .tc-dropzone > *:not(.tmap-has-fullscreen-child) {\n  z-index: 0; }\nhtml:fullscreen .tmap-has-fullscreen-child {\n  z-index: 1 !important;\n  left: 0px !important;\n  top: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important; }\n  html:fullscreen .tmap-has-fullscreen-child .tmap-widget.tmap-fullscreen {\n    background: white !important;\n    height: 100% !important;\n    width: 100% !important;\n    position: fixed !important;\n    top: 0 !important;\n    right: 0 !important;\n    bottom: 0 !important;\n    left: 0 !important;\n    z-index: 999 !important;\n    border: none !important;\n    margin: 0 !important; }\n\nhtml:-moz-full-screen body {\n  overflow: hidden; }\nhtml:-moz-full-screen .tc-dropzone > *:not(.tmap-has-fullscreen-child) {\n  z-index: 0; }\nhtml:-moz-full-screen .tmap-has-fullscreen-child {\n  z-index: 1 !important;\n  left: 0px !important;\n  top: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important; }\n  html:-moz-full-screen .tmap-has-fullscreen-child .tmap-widget.tmap-fullscreen {\n    background: white !important;\n    height: 100% !important;\n    width: 100% !important;\n    position: fixed !important;\n    top: 0 !important;\n    right: 0 !important;\n    bottom: 0 !important;\n    left: 0 !important;\n    z-index: 999 !important;\n    border: none !important;\n    margin: 0 !important; }\n\nhtml:-webkit-full-screen body {\n  overflow: hidden; }\nhtml:-webkit-full-screen .tc-dropzone > *:not(.tmap-has-fullscreen-child) {\n  z-index: 0; }\nhtml:-webkit-full-screen .tmap-has-fullscreen-child {\n  z-index: 1 !important;\n  left: 0px !important;\n  top: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important; }\n  html:-webkit-full-screen .tmap-has-fullscreen-child .tmap-widget.tmap-fullscreen {\n    background: white !important;\n    height: 100% !important;\n    width: 100% !important;\n    position: fixed !important;\n    top: 0 !important;\n    right: 0 !important;\n    bottom: 0 !important;\n    left: 0 !important;\n    z-index: 999 !important;\n    border: none !important;\n    margin: 0 !important; }\n\nhtml:-ms-fullscreen body {\n  overflow: hidden; }\nhtml:-ms-fullscreen .tc-dropzone > *:not(.tmap-has-fullscreen-child) {\n  z-index: 0; }\nhtml:-ms-fullscreen .tmap-has-fullscreen-child {\n  z-index: 1 !important;\n  left: 0px !important;\n  top: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important; }\n  html:-ms-fullscreen .tmap-has-fullscreen-child .tmap-widget.tmap-fullscreen {\n    background: white !important;\n    height: 100% !important;\n    width: 100% !important;\n    position: fixed !important;\n    top: 0 !important;\n    right: 0 !important;\n    bottom: 0 !important;\n    left: 0 !important;\n    z-index: 999 !important;\n    border: none !important;\n    margin: 0 !important; }\n\n/**** Media queries ************************************************/\n@media (max-width: {{$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint}}) {\n  .tc-sidebar-scrollable .tmap-desktop-editor {\n    display: none; }\n }\n\n@media (min-width: {{$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint}}) {\n  .tc-sidebar-scrollable .tmap-mobile-editor {\n    display: none; }\n }\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/Adapter": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/Adapter\ntype: application/javascript\nmodule-type: library\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var e=require(\"$:/plugins/felixhayashi/tiddlymap/js/ViewAbstraction\").ViewAbstraction;var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/EdgeType\").EdgeType;var i=require(\"$:/plugins/felixhayashi/tiddlymap/js/NodeType\").NodeType;var r=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var s=require(\"$:/core/modules/macros/contrastcolour.js\").run;var o=require(\"$:/plugins/felixhayashi/vis/vis.js\");var a=function(){this.opt=$tw.tmap.opt;this.logger=$tw.tmap.logger;this.indeces=$tw.tmap.indeces;this.visShapesWithTextInside=r.getLookupTable([\"ellipse\",\"circle\",\"database\",\"box\",\"text\"])};a.prototype.deleteEdge=function(e){return this._processEdge(e,\"delete\")};a.prototype.deleteEdges=function(e){e=r.convert(e,\"array\");for(var t=e.length;t--;){this.deleteEdge(e[t])}};a.prototype.insertEdge=function(e){return this._processEdge(e,\"insert\")};a.prototype._processEdge=function(e,i){this.logger(\"debug\",\"Edge\",i,e);if(typeof e!==\"object\"||!i||!e.from)return;if(i===\"insert\"&&!e.to)return;var s=this.indeces.tById[e.from];if(!s||!r.tiddlerExists(s))return;var o=new t(e.type);var a=r.getTiddler(s);var n=o.getNamespace();if(n===\"tw-list\"){if(!e.to)return;return this._processListEdge(a,e,o,i)}else if(n===\"tw-field\"){if(!e.to)return;return this._processFieldEdge(a,e,o,i)}else if(n===\"tw-body\"){return null}else{return this._processTmapEdge(a,e,o,i)}return e};a.prototype._processTmapEdge=function(e,t,i,s){if(s===\"delete\"&&!t.id)return;var o=r.parseFieldData(e,\"tmap.edges\",{});if(s===\"insert\"){t.id=t.id||r.genUUID();o[t.id]={to:t.to,type:i.getId()};if(!i.exists()){i.persist()}}else{delete o[t.id]}r.writeFieldData(e,\"tmap.edges\",o);return t};a.prototype._processListEdge=function(e,t,i,s){var o=i.getId(true);var a=r.getTiddler(e);var n=$tw.utils.parseStringArray(e.fields[o]);n=(n||[]).slice();var d=this.indeces.tById[t.to];if(s===\"insert\"){n.push(d);if(!i.exists()){i.persist()}}else{var l=n.indexOf(d);if(l>-1){n.splice(l,1)}}r.setField(a,o,$tw.utils.stringifyList(n));return t};a.prototype._processFieldEdge=function(e,t,i,s){var o=this.indeces.tById[t.to];if(o==null)return;var a=s===\"insert\"?o:\"\";r.setField(e,i.getId(true),a);if(!i.exists()){i.persist()}return t};a.prototype.getAdjacencyList=function(e,t){$tw.tmap.start(\"Creating adjacency list\");t=t||{};if(!t.edges){var i=r.getMatches(this.opt.selector.allPotentialNodes);t.edges=this.getEdgesForSet(i,t.toWL,t.typeWL)}var s=r.groupByProperty(t.edges,e);$tw.tmap.stop(\"Creating adjacency list\");return s};a.prototype.getNeighbours=function(e,t){$tw.tmap.start(\"Get neighbours\");t=t||{};e=e.slice();var i=t.addProperties;var s=this.getAdjacencyList(\"to\",t);var o=r.getDataMap();var a=r.getDataMap();var n=parseInt(t.steps)>0?t.steps:1;var d=function(){var n=r.getArrayValuesAsHashmapKeys(e);for(var d=e.length;d--;){if(r.isSystemOrDraft(e[d]))continue;var l=this.getEdges(e[d],t.toWL,t.typeWL);$tw.utils.extend(o,l);for(var p in l){var g=this.indeces.tById[l[p].to];if(!n[g]&&!a[l[p].to]){var f=this.makeNode(g,i);if(f){a[l[p].to]=f;e.push(g)}}}var c=s[this.indeces.idByT[e[d]]];if(c){for(var h=0;h<c.length;h++){var v=this.indeces.tById[c[h].from];if(n[v])continue;if(!a[c[h].from]){var f=this.makeNode(v,i);if(f){a[c[h].from]=f;e.push(v)}}o[c[h].id]=c[h]}}}}.bind(this);for(var l=0;l<n;l++){var p=e.length;d();if(p===e.length)break}var g={nodes:a,edges:o};this.logger(\"debug\",\"Retrieved neighbourhood\",g,\"steps\",l);$tw.tmap.stop(\"Get neighbours\");return g};a.prototype.getGraph=function(t){$tw.tmap.start(\"Assembling Graph\");t=t||{};var i=new e(t.view);var s=r.getMatches(t.filter||i.getNodeFilter(\"compiled\"));var o=r.getArrayValuesAsHashmapKeys(s);var a=this.getEdgeTypeWhiteList(i.getEdgeFilter(\"compiled\"));var n=parseInt(t.neighbourhoodScope||i.getConfig(\"neighbourhood_scope\"));var d={edges:this.getEdgesForSet(s,o,a),nodes:this.selectNodesByReferences(s,{view:i,outputType:\"hashmap\"})};if(n){var l=this.getNeighbours(s,{steps:n,view:i,typeWL:a,addProperties:{group:\"tmap:neighbour\"}});r.merge(d,l);if(i.isEnabled(\"show_inter_neighbour_edges\")){var p=this.getTiddlersById(l.nodes);var o=r.getArrayValuesAsHashmapKeys(p);$tw.utils.extend(d.edges,this.getEdgesForSet(p,o))}}this._removeObsoleteViewData(d.nodes,i);this.attachStylesToNodes(d.nodes,i);$tw.tmap.stop(\"Assembling Graph\");this.logger(\"debug\",\"Assembled graph:\",d);return d};a.prototype.getEdges=function(e,t,i){if(!r.tiddlerExists(e)||r.isSystemOrDraft(e)){return}var s=r.getTiddler(e);var o=r.getTiddlerRef(e);var a=this._getTmapEdges(e,t,i);var n=r.getMatches($tw.tmap.opt.selector.allListEdgeStores);var d=r.getDataMap();d[\"tw-body:link\"]=$tw.wiki.getTiddlerLinks(o);for(var l=n.length;l--;){d[\"tw-list:\"+n[l]]=$tw.utils.parseStringArray(s.fields[n[l]])}var n=r.getMatches($tw.tmap.opt.selector.allFieldEdgeStores);for(var l=n.length;l--;){d[\"tw-field:\"+n[l]]=[s.fields[n[l]]]}$tw.utils.extend(a,this._getEdgesFromRefArray(o,d,t,i));return a};a.prototype._getEdgesFromRefArray=function(e,i,s,o){var a=r.getDataMap();for(var n in i){var d=i[n];if(!d||o&&!o[n])continue;n=new t(n);for(var l=d.length;l--;){var p=d[l];if(!p||!$tw.wiki.tiddlerExists(p)||r.isSystemOrDraft(p)||s&&!s[p])continue;var g=n.getId()+$tw.utils.hashString(e+p);var f=this.makeEdge(this.getId(e),this.getId(p),n,g);if(f){a[f.id]=f}}}return a};a.prototype._getTmapEdges=function(e,t,i){var s=r.parseFieldData(e,\"tmap.edges\",{});var o=r.getDataMap();for(var a in s){var n=s[a];var d=this.indeces.tById[n.to];if(d&&(!t||t[d])&&(!i||i[n.type])){var l=this.makeEdge(this.getId(e),n.to,n.type,a);if(l){o[a]=l}}}return o};a.prototype.getEdgeTypeWhiteList=function(e){var i=r.getDataMap();var s=r.getMatches(this.opt.selector.allEdgeTypes);var o=e?r.getMatches(e,s):s;for(var a=o.length;a--;){var n=new t(o[a]);i[n.getId()]=n}return i};a.prototype.getEdgesForSet=function(e,t,i){var s=r.getDataMap();for(var o=e.length;o--;){$tw.utils.extend(s,this.getEdges(e[o],t,i))}return s};a.prototype.selectEdgesByType=function(e){var i=r.getDataMap();i[new t(e).getId()]=true;var s=r.getMatches(this.opt.selector.allPotentialNodes);var o=this.getEdgesForSet(s,null,i);return o};a.prototype._processEdgesWithType=function(e,i){e=new t(e);this.logger(\"debug\",\"Processing edges\",e,i);var r=this.selectEdgesByType(e);if(i.action===\"rename\"){var s=new t(i.newName);s.loadDataFromType(e);s.persist()}for(var o in r){this._processEdge(r[o],\"delete\");if(i.action===\"rename\"){r[o].type=i.newName;this._processEdge(r[o],\"insert\")}}$tw.wiki.deleteTiddler(e.getPath())};a.prototype.selectNodesByFilter=function(e,t){var i=r.getMatches(e);return this.selectNodesByReferences(i,t)};a.prototype.selectNodesByReferences=function(e,t){t=t||{};var i=t.addProperties;var s=r.getDataMap();var o=Object.keys(e);for(var a=o.length;a--;){var n=this.makeNode(e[o[a]],i);if(n){s[n.id]=n}}return r.convert(s,t.outputType)};a.prototype.selectNodesByIds=function(e,t){var i=this.getTiddlersById(e);return this.selectNodesByReferences(i,t)};a.prototype.selectNodeById=function(e,t){t=r.merge(t,{outputType:\"hashmap\"});var i=this.selectNodesByIds([e],t);return i[e]};a.prototype.makeEdge=function(e,i,s,o){if(!e||!i)return;if(e instanceof $tw.Tiddler){e=e.fields[\"tmap.id\"]}else if(typeof e===\"object\"){e=e.id}s=new t(s);var a=s.getLabel();var n={id:o||r.genUUID(),from:e,to:i,type:s.getId()};var d=s.getData(\"description\");n.title=d||this.indeces.tById[e]+\" \"+(a||n.id)+\" \"+this.indeces.tById[i];if(r.isTrue(s.getData(\"show-label\"),true)){n.label=a}n=$tw.utils.extend(n,s.getData(\"style\"));return n};a.prototype.removeNodeType=function(e){$tw.wiki.deleteTiddler(new i(e).getPath())};a.prototype.makeNode=function(e,t){var i=r.getTiddler(e);if(!i||i.isDraft()||$tw.wiki.isSystemTiddler(i.fields.title)){return}var s=r.merge({},t);s.id=this.assignId(i);var o=i.fields[this.opt.field.nodeLabel];s.label=o&&this.opt.field.nodeLabel!==\"title\"?$tw.wiki.renderText(\"text/plain\",\"text/vnd-tiddlywiki\",o):i.fields.title;return s};a.prototype.getInheritedNodeStyles=function(t,i){i=i?new e(i).getLabel():null;var s=this.getTiddlersById(t);var o={};var a=this.indeces.loGlNTy;for(var n=a.length;n--;){var d=a[n].data;if(i&&d.view&&d.view!==i)continue;var l=a[n].getInheritors(s);if(!l.length)continue;for(var p=l.length;p--;){var g=l[p];o[g]=o[g]||{};o[g].style=r.merge(o[g].style||{},d.style);if(d[\"fa-icon\"]){o[g][\"fa-icon\"]=d[\"fa-icon\"]}else if(d[\"tw-icon\"]){o[g][\"tw-icon\"]=d[\"tw-icon\"]}}}return o};a.prototype.attachStylesToEdges=function(e,t){};a.prototype._removeObsoleteViewData=function(t,i){i=new e(i);if(!i.exists()||!t)return;var r=i.getNodeData();var s=0;for(var o in r){if(t[o]===undefined){delete r[o];s++}}if(s){this.logger(\"debug\",\"Removed \"+s+\" node data records from view \"+i.getLabel());i.saveNodeData(r)}};a.prototype.attachStylesToNodes=function(t,o){o=new e(o);var a=this.getInheritedNodeStyles(t,o);var n=new i(\"tmap:neighbour\").getData(\"style\");var d=o.exists()?o.getNodeData():{};var l=!o.isEnabled(\"physics_mode\");var p=this.opt.field.nodeInfo;var g=this.opt.field.nodeIcon;var f=this.indeces.tById;for(var c in t){var h=f[c];var v=$tw.wiki.getTiddler(h);var u=v.fields;var y=t[c];if(a[h]){if(a[h].style){r.merge(y,a[h].style)}this._addNodeIcon(y,a[h][\"fa-icon\"],a[h][\"tw-icon\"])}if(y.group===\"tmap:neighbour\"){r.merge(y,n);delete y.group}if(u.color){y.color=u.color}if(u[\"tmap.style\"]){r.merge(y,r.parseJSON(u[\"tmap.style\"]))}this._addNodeIcon(y,u[\"tmap.fa-icon\"],u[g]);if(d[c]){r.merge(y,d[c]);if(l){y.fixed={x:true,y:true}}}y.color=typeof y.color===\"object\"?y.color.background:y.color;y.font=y.font||{};if(typeof y.font===\"object\"&&!y.font.color){var w=y.shape;if(w&&!this.visShapesWithTextInside[w]){y.font.color=\"black\"}else{if(y.color){y.font.color=s(y.color,y.color,\"black\",\"white\")}}}if(y.shape===\"icon\"&&typeof y.icon===\"object\"){y.icon.color=y.color}if(u[p]){y.title=$tw.wiki.renderText(\"text/html\",\"text/vnd-tiddlywiki\",u[p])}else if(y.label!==h){y.title=h}}};a.prototype.deleteNode=function(t){if(!t)return;var i=typeof t===\"object\"?t.id:t;var s=this.indeces.tById[i];if(s){r.deleteTiddlers([s])}var o=$tw.tmap.opt.selector.allViews;var a=r.getMatches(o);for(var n=0;n<a.length;n++){var d=new e(a[n]);if(d.getNodeData(i)){d.saveNodeData(i,null)}}var l=this.getNeighbours([s]);this.deleteEdges(l.edges)};a.prototype.getView=function(t,i){return new e(t,i)};a.prototype.createView=function(t){if(typeof t!==\"string\"||t===\"\"){t=\"My view\"}var i=$tw.wiki.generateNewTitle(this.opt.path.views+\"/\"+t);return new e(i,true)};a.prototype.createType=function(e,r){r=r||\"me:new-type\";var s=e===\"edge\"?this.opt.path.edgeTypes:this.opt.path.nodeTypes;var o=$tw.wiki.generateNewTitle(s+\"/\"+r);var e=e===\"edge\"?new t(o):new i(o);e.persist();return e};a.prototype.storePositions=function(t,i){i=new e(i);i.saveNodeData(t)};a.prototype.assignId=function(e,t){var i=r.getTiddler(e,true);if(!i)return;var s=i.fields[\"tmap.id\"];if(!s||t){s=r.genUUID();r.setField(i,\"tmap.id\",s);this.logger(\"info\",\"Assigning new id to\",i.fields.title)}this.indeces.tById[s]=i.fields.title;this.indeces.idByT[i.fields.title]=s;return s};a.prototype.insertNode=function(t,i){if(!i||typeof i!==\"object\")i={};if(!t||typeof t!==\"object\"){t=r.getDataMap()}var s=r.getDataMap();s.title=$tw.wiki.generateNewTitle(t.label?t.label:\"New node\");t.label=s.title;if(this.opt.field.nodeId===\"title\"){t.id=s.title}else{t.id=r.genUUID();s[\"tmap.id\"]=t.id}if(i.view){var o=new e(i.view);o.addNodeToView(t)}$tw.wiki.addTiddler(new $tw.Tiddler(s,$tw.wiki.getModificationFields(),$tw.wiki.getCreationFields()));return t};a.prototype.getTiddlersById=function(e){if(Array.isArray(e)){e=r.getArrayValuesAsHashmapKeys(e)}else if(e instanceof o.DataSet){e=r.getLookupTable(e,\"id\")}var t=[];var i=this.indeces.tById;for(var s in e){if(i[s])t.push(i[s])}return t};a.prototype.getId=function(e){return this.indeces.idByT[r.getTiddlerRef(e)]};a.prototype._addNodeIcon=function(e,t,i){if(t){e.shape=\"icon\";e.icon={shape:\"icon\",face:\"FontAwesome\",color:e.color,code:String.fromCharCode(\"0x\"+t)};return}if(!i)return;var s=r.getTiddler(i);if(s&&s.fields.text){var o=s.fields.type||\"image/svg+xml\";var a=s.fields.text;e.shape=\"image\";if(o===\"image/svg+xml\"){a=a.replace(/\\r?\\n|\\r/g,\" \");if(!r.inArray(\"xmlns\",a)){a=a.replace(/<svg/,'<svg xmlns=\"http://www.w3.org/2000/svg\"')}}var n=$tw.config.contentTypeInfo[o].encoding===\"base64\"?a:window.btoa(a);e.image=\"data:\"+o+\";base64,\"+n}};exports.Adapter=a})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/Adapter",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/CallbackManager": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/CallbackManager\ntype: application/javascript\nmodule-type: library\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var e=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var t=function(){this.logger=$tw.tmap.logger;this.callbacks=e.getDataMap()};t.prototype.add=function(e,t,l){this.logger(\"debug\",'A callback was registered for changes of \"'+e+'\"');this.callbacks[e]={execute:t,isDeleteOnCall:typeof l===\"boolean\"?l:true}};t.prototype.remove=function(e){if(!e)return;if(typeof e===\"string\"){e=[e]}for(var t=e.length;t--;){var l=e[t];if(this.callbacks[l]){this.logger(\"debug\",'A callback for \"'+l+'\" will be deleted');delete this.callbacks[l]}}};t.prototype.handleChanges=function(e){if(this.callbacks.length==0){this.logger(\"debug\",\"No registered callbacks exist at the moment\");return}for(var t in e){if(!this.callbacks[t])continue;if($tw.wiki.getTiddler(t)){this.logger(\"debug\",'A callback for \"'+t+'\" will be executed');this.callbacks[t].execute(t);if(!this.callbacks.isDeleteOnCall)continue}this.remove(t)}};exports.CallbackManager=t})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/CallbackManager",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/DialogManager": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/DialogManager\ntype: application/javascript\nmodule-type: library\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var e=require(\"$:/plugins/felixhayashi/tiddlymap/js/CallbackManager\").CallbackManager;var i=function(t,e){this.logger=$tw.tmap.logger;this.adapter=$tw.tmap.adapter;this.opt=$tw.tmap.opt;this.callbackManager=t;if(e){this.context=e}};i.prototype.open=function(e,i,a){if(t.isTrue(this.opt.config.sys.suppressedDialogs[e],false)){this.logger(\"warning\",\"Suppressed dialog\",e);return}i=i||{};this.logger(\"debug\",\"Dialog param object\",i);if(typeof a===\"function\"&&this.context){a=a.bind(this.context)}var r=this.opt.path.tempRoot+\"/dialog-\"+t.genUUID();var l=t.getTiddler(this.opt.path.dialogs+\"/\"+e);var s={title:r,buttons:l.fields[\"buttons\"]||\"ok_cancel\",output:r+\"/output\",result:r+\"/result\",temp:r+\"/temp\",template:l.fields.title,templateId:e,currentTiddler:r+\"/output\"};if(i.dialog){if(i.dialog.preselects){$tw.wiki.addTiddler(new $tw.Tiddler({title:s.output},t.flatten(i.dialog.preselects)));delete i.dialog.preselects}t.merge(s,i.dialog)}s.footer=t.getText(this.opt.path.footers);s=t.flatten(s);i=t.flatten(i);var n=function(e){this.getElement(\"hidden-close-button\").click();var i=$tw.wiki.getTiddler(e);var l=i.fields.text;if(l){var n=$tw.wiki.getTiddler(s.output)}else{var n=null;$tw.tmap.notify(\"operation cancelled\")}if(typeof a===\"function\"){a(l,n)}var o=t.getMatches(\"[prefix[\"+r+\"]]\");t.deleteTiddlers(o)}.bind(this);this.callbackManager.add(s.result,n,true);var o=new $tw.Tiddler(l,i,s);$tw.wiki.addTiddler(o);this.logger(\"debug\",\"Opening dialog\",o);$tw.rootWidget.dispatchEvent({type:\"tm-modal\",param:o.fields.title,paramObject:o.fields});this.addKeyBindings();return o};i.prototype.getElement=function(e){return t.getFirstElementByClassName(\"tmap-\"+e)};i.prototype.addKeyBindings=function(){var e=$tw.tmap.keycharm({container:t.getFirstElementByClassName(\"tc-modal\")});var i=/tmap-triggers-(.+?)-on-(.+?)(?:\\s|$)/;var a=document.getElementsByClassName(\"tmap-trigger-field\");for(var r=a.length;r--;){var l=a[r].className.split(\" \");for(var s=l.length;s--;){var n=l[s].match(i);if(!n){continue}var o=n[1];var d=n[2];var p=this.getElement(o);if(!p)continue;e.bind(d,function(){this.click()}.bind(p))}}};exports.DialogManager=i})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/DialogManager",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/EdgeType": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/EdgeType\ntype: application/javascript\nmodule-type: library\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/ElementType\").ElementType;var e=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var i=function(e){if(e instanceof i){return e}t.call(this,e||\"tmap:unknown\",$tw.tmap.opt.path.edgeTypes,[\"label\",\"show-label\"])};i.prototype=Object.create(t.prototype);i.prototype.getLabel=function(){return this.data.label||this.getId(true)};i.prototype.getNamespace=function(){var t=this.id.match(\"^(.*):\");return t?t[1]:\"\"};i.prototype.getId=function(t){return t?this.id.substring(this.id.indexOf(\":\")+1):this.id};exports.EdgeType=i})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/EdgeType",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/ElementType": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/ElementType\ntype: application/javascript\nmodule-type: library\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var i=function(i,e,s){if(typeof i!==\"string\"){throw\"Cannot create type\"}this.opt=$tw.tmap.opt;this.logger=$tw.tmap.logger;this.type=i;this.allowedFields=[\"description\",\"style\",\"modified\",\"created\"].concat(s||[]);this.root=e;this.data=t.getDataMap();this.id=t.getWithoutPrefix(i,this.root+\"/\");this.loadDataFromType(this.id)};i.prototype.getPath=function(){return this.root+\"/\"+this.id};i.prototype.exists=function(){return t.tiddlerExists(this.getPath())};i.prototype.getId=function(){return this.id};i.prototype.getData=function(i){if(i){var e=this[\"get\"+t.ucFirst(i)];return typeof e===\"function\"?e.call(this):this.data[i]}return this.data};i.prototype.setData=function(){var i=arguments;if(i.length===2){var e=i[0];var s=i[1];if(typeof e===\"string\"){if(s&&t.inArray(e,this.allowedFields)){if(typeof s===\"string\"){s=s.replace(/[\\n\\r]/g,\" \")}var a=this[\"set\"+t.ucFirst(e)];if(typeof a===\"function\"){a.call(this,s)}else{this.data[e]=s}}else{delete this.data[e]}}}else if(i.length===1&&typeof i[0]===\"object\"){for(var o in i[0]){this.setData(o,i[0][o])}}return this};i.prototype.setStyle=function(i,e){if(typeof i===\"string\"){i=t.parseJSON(i)}if(typeof i===\"object\"){if(e){t.merge(this.data.style,i)}else{this.data.style=i}}return this};i.prototype.persist=function(i,e){if(!i){i=this.getPath()}if(typeof i===\"string\"){var s={title:i};if(!t.startsWith(i,this.root)){s.id=this.id}else{$tw.utils.extend(s,$tw.wiki.getModificationFields());if(!this.exists()){$tw.utils.extend(s,$tw.wiki.getCreationFields())}}var a=e?$tw.config.preferences.jsonSpaces:null;this.data.style=JSON.stringify(this.data.style,null,a);$tw.wiki.addTiddler(new $tw.Tiddler(this.data,s))}};i.prototype.loadDataFromType=function(e){if(e instanceof i){this.setData(e.getData())}else{if(e instanceof $tw.Tiddler){e=e.fields.title}if(typeof e===\"string\"){if(!t.startsWith(e,this.root)){e=this.root+\"/\"+e}this.loadDataFromTiddler($tw.wiki.getTiddler(e),false)}}};i.prototype.isShipped=function(){return $tw.wiki.getSubTiddler(this.opt.path.pluginRoot,this.getPath())};i.prototype.loadDataFromTiddler=function(i){var e=t.getTiddler(i);if(e){var s=$tw.wiki.getSubTiddler(this.opt.path.pluginRoot,this.getPath())||{};var a=$tw.utils.extend({},s.fields,e.fields);this.setData(a)}};exports.ElementType=i})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/ElementType",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/exception": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/exception\ntype: application/javascript\nmodule-type: library\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var r={};r.EnvironmentError=function(r){this.name=\"EnvironmentError\";this.message=\"Critical parts of the underlying system changed: \"+r};r.DependencyError=function(r){this.name=\"DependencyError\";this.message=\"TiddlyMap cannot run without: \"+r};for(var t in r){r[t].prototype=Object.create(Error.prototype);r[t].constructor=r[t]}exports.Exception=r})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/exception",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/NodeType": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/NodeType\ntype: application/javascript\nmodule-type: library\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/ElementType\").ElementType;var e=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var i=function(e){if(e instanceof i){return e}t.call(this,e||\"tmap:unknown\",$tw.tmap.opt.path.nodeTypes,[\"scope\",\"view\",\"fa-icon\",\"tw-icon\"])};i.prototype=Object.create(t.prototype);i.prototype.getInheritors=function(t){var i=this.getData(\"scope\");return i?e.getMatches(i,t||$tw.wiki.allTitles()):[]};exports.NodeType=i})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/NodeType",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/config/sys": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/config/sys\ntype: application/javascript\nmodule-type: library\n\n@preserve\n\n\\*/\n(function(){\"use strict\";exports.config={field:{nodeLabel:\"caption\",nodeIcon:\"icon\",nodeInfo:\"description\",viewMarker:\"isview\"},suppressedDialogs:{},edgeClickBehaviour:\"manager\",debug:\"false\",notifications:\"true\",editNodeOnCreate:\"false\",singleClickMode:\"false\",editorMenuBar:{showNeighScopeButton:\"true\",showScreenshotButton:\"true\"}}})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/config/sys",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/utils": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/utils\ntype: application/javascript\nmodule-type: library\n\nATTENTION: THIS CLASS MUST NOT REQUIRE ANY OTHER TIDDLYMAP FILE\nIN ORDER TO AVOID ACYCLIC DEPENDENCIES!\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var e=require(\"$:/plugins/felixhayashi/vis/vis.js\");var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/exception\").Exception;var r={};r.deleteTiddlers=function(e){var t=Object.keys(e);var i=$tw.wiki.getTiddlerList(\"$:/StoryList\");for(var n=t.length;n--;){var l=r.getTiddlerRef(e[t[n]]);if(!$tw.wiki.tiddlerExists(e[t[n]])){continue}var a=i.indexOf(l);if(a!==-1){i.splice(a,1);r.setField(\"$:/StoryList\",\"list\",i)}$tw.wiki.deleteTiddler(l)}};r.moveFieldValues=function(e,t,i,n,l){var a=l||$tw.wiki.allTitles();for(var f=a.length;f--;){var u=r.getTiddler(a[f]);if(u.isDraft()||!u.fields[e]||!n&&$tw.wiki.isSystemTiddler(a[f])){continue}var s={};s[t]=u.fields[e];if(i){s[e]=undefined}$tw.wiki.addTiddler(new $tw.Tiddler(u,s))}};r.getLabel=function(e,t){var i=r.getTiddler(e);return i&&i.fields[t]?i.fields[t]:i.fields.title};r.ucFirst=function(e){return e&&e[0].toUpperCase()+e.slice(1)};r.convert=function(t,i){if(typeof t!==\"object\")return;switch(i){case\"array\":return r.getValues(t);case\"hashmap\":case\"object\":if(t instanceof e.DataSet){return e.get({returnType:\"Object\"})}else{return t}case\"dataset\":default:if(t instanceof e.DataSet){return t}if(!Array.isArray(t)){t=r.getValues(t)}return new e.DataSet(t)}};r.inject=function(t,i){if(i instanceof e.DataSet){i.update(r.convert(t,\"array\"))}else if(Array.isArray(i)){t=r.convert(t,\"object\");for(var n in t){if(!r.inArray(t[n],i)){i.push(t[n])}}}else{$tw.utils.extend(i,r.convert(t,\"object\"))}return i};r.getValues=function(t){if(Array.isArray(t)){return t}if(t instanceof e.DataSet){return t.get({returnType:\"Array\"})}var r=[];var i=Object.keys(t);for(var n=i.length;n--;){r.push(t[i[n]])}return r};r.hasOwnProp=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.getDataMap=function(){var e=Object.create(null);Object.defineProperty(e,\"hasOwnProperty\",{enumerable:false,configurable:false,writable:false,value:Object.prototype.hasOwnProperty.bind(e)});return e};r.getMatches=function(e,t,i){var n=undefined;if(t!=null&&typeof t===\"object\"){var l=Object.keys(t);n=function(e){for(var i=l.length;i--;){var n=r.getTiddler(t[l[i]]);if(n){e(n,n.fields.title)}}}}if(typeof e===\"string\"){e=$tw.wiki.compileFilter(e)}var a=e.call($tw.wiki,n);if(i){var f=r.getDataMap();for(var u=a.length;u--;){f[a[u]]=$tw.wiki.getTiddler(a[u])}return f}else{return a}};r.isMatch=function(e,t){var i=r.getTiddlerRef(e);return r.getMatches(t,[i]).length>0};r.isInteger=Number.isInteger||function(e){return typeof e===\"number\"&&isFinite(e)&&Math.floor(e)===e};r.escapeRegex=function(e){return e.replace(/[-$^?.+*[\\]\\\\(){}|]/g,\"\\\\$&\")};r.isTrue=function(e,t){if(e==null){return!!t}else if(typeof e===\"string\"){var r=parseInt(e);return isNaN(r)?e===\"true\":r!==0;if(e===\"1\"||this.data[conf]===\"true\");}else if(typeof e===\"boolean\"){return e}else if(typeof e===\"number\"){return r!==0}return false};r.getTiddlerRef=function(e){if(e instanceof $tw.Tiddler){return e.fields.title}else if(typeof e===\"string\"){return e}};r.getTiddler=function(e,t){if(e instanceof $tw.Tiddler){if(!t){return e}e=e.fields.title}return $tw.wiki.getTiddler(e)};r.getBasename=function(e){return e.substring(e.lastIndexOf(\"/\")+1)};r.notify=function(e){var t=\"$:/temp/tiddlymap/notify\";$tw.wiki.addTiddler(new $tw.Tiddler({title:t,text:e}));$tw.notifier.display(t)};r.tiddlerExists=function(e){var t=r.getTiddlerRef(e);return t&&($tw.wiki.tiddlerExists(t)||$tw.wiki.isShadowTiddler(t))};r.addListeners=function(e,t,r){for(var i in e){t.addEventListener(i,e[i].bind(r))}};r.isPreviewed=function(e){if(e){if(e.getVariable(\"tv-tiddler-preview\")){return true}else{var t=\"tc-tiddler-preview-preview\";return!!r.getAncestorWithClass(e.parentDomNode,t)}}return false};r.getAncestorWithClass=function(e,t){if(typeof e!==\"object\"||typeof t!==\"string\")return;while(e.parentNode){e=e.parentNode;if($tw.utils.hasClass(e,t)){return e}}};r.getPropertiesByPrefix=function(e,t,i){var n=r.getDataMap();for(var l in e){if(r.startsWith(l,t)){n[i?l.substr(t.length):l]=e[l]}}return n};r.getWithoutPrefix=function(e,t){return r.startsWith(e,t)?e.substr(t.length):e};r.hasPropWithPrefix=function(e,t){for(var i in e){if(r.startsWith(i,t)){return true}}return false};r.startsWith=function(e,t){return e.substring(0,t.length)===t};r.hasElements=function(e){return Object.keys(e).length>0};r.groupByProperty=function(e,t){e=r.getIterableCollection(e);var i=r.getDataMap();var n=Object.keys(e);for(var l in n){var a=e[n[l]];var f=a[t];if(f==null){throw\"Cannot group by property \"+t}else{if(!Array.isArray(i[f])){i[f]=[]}i[f].push(a)}}return i};r.findAndRemoveClassNames=function(e){for(var t=e.length;t--;){var r=document.getElementsByClassName(e[t]);for(var i=r.length;i--;){$tw.utils.removeClass(r[i],e[t])}}};r.parseFieldData=function(e,t,i){var n=r.getTiddler(e);if(!n)return i;if(!t)t=\"text\";return r.parseJSON(n.fields[t],i)};r.parseJSON=function(e,t){try{return JSON.parse(e)}catch(r){return t}};r.writeFieldData=function(e,t,i){if(typeof i===\"object\"){r.setField(e,t,JSON.stringify(i))}};r.getPrettyFilter=function(e){e=e.trim().replace(\"][\",\"] [\");var t=/[\\+\\-]?\\[.+?[\\]\\}\\>]\\]/g;var r=e.match(t);e=e.replace(t,\" [] \").trim();var i=e.split(/\\s+/);var n=0;var l=[];for(var a=0;a<i.length;a++){l[a]=i[a]===\"[]\"?r[n++]:i[a]}return l.join(\"\\n\")};r.setField=function(e,t,i){if(e&&t){var n={title:r.getTiddlerRef(e)};n[t]=i;var l=r.getTiddler(e,true);$tw.wiki.addTiddler(new $tw.Tiddler(l,n))}};r.setEntry=function(e,t,i){$tw.wiki.setText(r.getTiddlerRef(e),null,t,i)};r.getEntry=function(e,t,i){var n=$tw.wiki.getTiddlerData(r.getTiddlerRef(e),{});return n[t]==null?i:n[t]};r.getField=function(e,t,i){i=i||\"\";var n=r.getTiddler(e);return!n?i:n.fields[t]||i};r.getText=function(e,t){return r.getField(e,\"text\",t)};r.getFirstElementByClassName=function(e,t,i){var n=(t||document).getElementsByClassName(e)[0];if(!n&&i!==false){var l=\"Missing element with class \"+e+\" inside \"+t;throw new r.Exception.EnvironmentError(l)}return n};r.isDraft=function(e){var t=r.getTiddler(e);return t&&t.isDraft()};r.merge=function(e){var t=function(e,r){if(typeof e!==\"object\"){e={}}for(var i in r){if(r.hasOwnProperty(i)){if(r[i]!=null){e[i]=typeof r[i]===\"object\"?t(e[i],r[i]):r[i]}}}return e};for(var r=1,i=arguments.length;r<i;r++){var n=arguments[r];if(n!=null&&typeof n===\"object\"){e=t(e,n)}}return e};r.drawRaster=function(e,t,r,i,n){var i=parseInt(i)||10;var l=e.canvas;var a=l.width/t;var f=l.width/t;var u=r.x-a/2;var s=r.y-f/2;for(var o=u;o<a;o+=i){e.moveTo(o,s);e.lineTo(o,f)}for(var d=s;d<f;d+=i){e.moveTo(u,d);e.lineTo(a,d)}e.strokeStyle=n||\"#D9D9D9\";e.stroke()};r.isSystemOrDraft=function(e){return $tw.wiki.isSystemTiddler(r.getTiddlerRef(e))?true:r.isDraft(e)};r.changePrefix=function(e,t,i){if(e===t||!e||!t)return;var n=r.getTiddlersByPrefix(e);var l=r.getDataMap();for(var a=n.length;a--;){var f=n[a];var u=f.replace(e,t);if($tw.wiki.tiddlerExists(u)&&!i){return}l[f]=u}for(var f in l){r.setField(f,\"title\",l[f]);$tw.wiki.deleteTiddler(f)}return l};r.inArray=function(e,t){return t.indexOf(e)!==-1};r.hasSubString=function(e,t){return e.indexOf(t)!==-1};r.joinAndWrap=function(e,t,r,i){if(!i)i=\" \";return t+e.join(r+i+t)+r};r.keysOfItemsWithProperty=function(e,t,i,n){e=r.getIterableCollection(e);var l=Object.keys(e);var a=[];var n=typeof n===\"number\"?n:l.length;for(var f=0,u=l.length;f<u;f++){var s=l[f];if(typeof e[s]===\"object\"&&e[s][t]){if(!i||e[s][t]===i){a.push(s);if(a.length===n){break}}}}return a};r.keyOfItemWithProperty=function(e,t,i){var n=r.keysOfItemsWithProperty(e,t,i,1);return n.length?n[0]:undefined};r.deleteByPrefix=function(e){r.deleteTiddlers(r.getByPrefix(e))};r.getByPrefix=function(e){return r.getMatches(\"[prefix[\"+e+\"]]\")};r.getIterableCollection=function(t){return t instanceof e.DataSet?t.get():t};r.getLookupTable=function(e,t){e=r.getIterableCollection(e);var i=r.getDataMap();var n=Object.keys(e);for(var l=0,a=n.length;l<a;l++){var f=n[l];var u=t?e[f][t]:e[f];if(typeof u===\"string\"&&u!=\"\"||typeof u===\"number\"){if(!i[u]){i[u]=e[f];continue}}throw'TiddlyMap: Cannot use \"'+u+'\" as lookup table index'}return i};r.getArrayValuesAsHashmapKeys=function(e){return r.getLookupTable(e)};r.getTiddlersWithField=function(e,t,i){if(!i||typeof i!==\"object\")i={};var n=i.tiddlers||$tw.wiki.allTitles();var l=i.limit||0;var a=i.isIncludeDrafts===true;var f=r.getDataMap();var u=Object.keys(n);var s=$tw.utils.hop;for(var o=u.length;o--;){var d=r.getTiddler(n[u[o]]);var c=d.fields;if(s(c,e)&&(!s(c,\"draft.of\")||a)){if(!t||c[e]===t){f[c.title]=d;if(--l===0)break}}}return f};r.getTiddlerWithField=function(e,t){var i=r.getTiddlersWithField(e,t,{limit:1});return Object.keys(i)[0]};r.getTiddlersByPrefix=function(e,t){var t=t||$tw.wiki.allTitles();var i=[];var n=Object.keys(t);for(var l=n.length;l--;){var a=r.getTiddlerRef(t[n[l]]);if(r.startsWith(a,e)){i.push(a)}}return i};r.Exception=t;r.makeDraftTiddler=function(e){var t=$tw.wiki.findDraft(e);if(t){return $tw.wiki.getTiddler(t)}var i=$tw.wiki.getTiddler(e);t=r.generateDraftTitle(e);var n=new $tw.Tiddler(i,{title:t,\"draft.title\":e,\"draft.of\":e},$tw.wiki.getModificationFields());$tw.wiki.addTiddler(n);return n};r.generateDraftTitle=function(e){var t=0,r;do{r=\"Draft \"+(t?t+1+\" \":\"\")+\"of '\"+e+\"'\";t++}while($tw.wiki.tiddlerExists(r));return r};r.getFullScreenApis=function(){var e=document,t=e.body,r={_requestFullscreen:t.webkitRequestFullscreen!==undefined?\"webkitRequestFullscreen\":t.mozRequestFullScreen!==undefined?\"mozRequestFullScreen\":t.msRequestFullscreen!==undefined?\"msRequestFullscreen\":t.requestFullscreen!==undefined?\"requestFullscreen\":\"\",_exitFullscreen:e.webkitExitFullscreen!==undefined?\"webkitExitFullscreen\":e.mozCancelFullScreen!==undefined?\"mozCancelFullScreen\":e.msExitFullscreen!==undefined?\"msExitFullscreen\":e.exitFullscreen!==undefined?\"exitFullscreen\":\"\",_fullscreenElement:e.webkitFullscreenElement!==undefined?\"webkitFullscreenElement\":e.mozFullScreenElement!==undefined?\"mozFullScreenElement\":e.msFullscreenElement!==undefined?\"msFullscreenElement\":e.fullscreenElement!==undefined?\"fullscreenElement\":\"\",_fullscreenChange:e.webkitFullscreenElement!==undefined?\"webkitfullscreenchange\":e.mozFullScreenElement!==undefined?\"mozfullscreenchange\":e.msFullscreenElement!==undefined?\"MSFullscreenChange\":e.fullscreenElement!==undefined?\"fullscreenchange\":\"\"};if(!r._requestFullscreen||!r._exitFullscreen||!r._fullscreenElement){return null}else{return r}};r.flatten=function(e,t){t=t||{};var r=t.delimiter||\".\";var i=t.prefix||\"\";var n={};function l(e,a){Object.keys(e).forEach(function(f){var u=e[f];var s=t.safe&&Array.isArray(u);var o=Object.prototype.toString.call(u);var d=o===\"[object Object]\"||o===\"[object Array]\";var c=a?a+r+f:i+f;if(!s&&d){return l(u,c)}n[c]=u})}l(e);return n};r.unflatten=function(e,t){t=t||{};var i=t.delimiter||\".\";var n={};if(Object.prototype.toString.call(e)!==\"[object Object]\"){return e}function l(e){var t=Number(e);return isNaN(t)||e.indexOf(\".\")!==-1?e:t}Object.keys(e).forEach(function(a){var f=a.split(i);var u=l(f.shift());var s=l(f[0]);var o=n;while(s!==undefined){if(o[u]===undefined){o[u]=typeof s===\"number\"&&!t.object?[]:{}}o=o[u];if(f.length>0){u=l(f.shift());s=l(f[0])}}o[u]=r.unflatten(e[a],t)});return n};r.genUUID=function(){var e=\"0123456789abcdefghijklmnopqrstuvwxyz\".split(\"\");return function(){var t=e,r=new Array(36);var i=0,n;for(var l=0;l<36;l++){if(l==8||l==13||l==18||l==23){r[l]=\"-\"}else if(l==14){r[l]=\"4\"}else{if(i<=2)i=33554432+Math.random()*16777216|0;n=i&15;i=i>>4;r[l]=t[l==19?n&3|8:n]}}return r.join(\"\")}}();exports.utils=r})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/utils",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/ViewAbstraction": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/ViewAbstraction\ntype: application/javascript\nmodule-type: library\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/EdgeType\").EdgeType;var e=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var i=function(t,r){this.opt=$tw.tmap.opt;this.logger=$tw.tmap.logger;if(t instanceof i){return t}this._registerPaths(t);if(r){this._createView()}else if(!this.exists()){return}this._ignoreOnNextRebuild=e.getDataMap();this.rebuildCache(e.getValues(this.path))};i.prototype._registerPaths=function(t){this.path=this.path||e.getDataMap();this.path.config=this._getConfigPath(t);this.path.map=this.path.config+\"/map\";this.path.nodeFilter=this.path.config+\"/filter/nodes\";this.path.edgeFilter=this.path.config+\"/filter/edges\"};i.prototype._getConfigPath=function(t){if(t instanceof $tw.Tiddler){return t.fields.title}if(typeof t==\"string\"){t=e.getWithoutPrefix(t,this.opt.path.views+\"/\");if(!e.hasSubString(t,\"/\")){return this.opt.path.views+\"/\"+t}}};i.prototype.getPaths=function(){return this.path};i.prototype._createView=function(){if(this.exists()){this.destroy()}var t={};t.title=this.path.config;t[this.opt.field.viewMarker]=true;t.id=e.genUUID();$tw.wiki.addTiddler(new $tw.Tiddler(t))};i.prototype.isLocked=function(){return $tw.wiki.isShadowTiddler(this.path.config)};i.prototype.refresh=function(t){return this.rebuildCache(Object.keys(t))};i.prototype.rebuildCache=function(t,i){if(!this.exists())return[];if(e.inArray(this.path.config,t)){this.logger(\"debug\",\"Reloading config of view\",this.getLabel(),\"; trigger full rebuild\");t=e.getValues(this.path)}var r=this._ignoreOnNextRebuild;this._ignoreOnNextRebuild=e.getDataMap();var s=[];for(var o=0;o<t.length;o++){var n=t[o];if(!i&&r[n]){continue}else if(n===this.path.config){this.config=this.getConfig(null,true)}else if(n===this.path.map){this.nodeData=this.getNodeData(null,true)}else if(n===this.path.nodeFilter){this.nodeFilter=this.getNodeFilter(null,true)}else if(n===this.path.edgeFilter){this.edgeFilter=this.getEdgeFilter(null,true)}else{continue}s.push(n)}return s};i.prototype.exists=function(){return e.tiddlerExists(this.path.config)};i.prototype.getRoot=function(){return this.path.config};i.prototype.getCreationDate=function(t){if(!this.exists())return;var e=$tw.wiki.getTiddler(this.path.config).fields[\"created\"];if(t){return e instanceof Date?$tw.utils.formatDateString(e,\"DDth MMM YYYY\"):\"\"}return e};i.prototype.getLabel=function(){if(this.exists()){return e.getBasename(this.path.config)}};i.prototype.destroy=function(){if(!this.exists())return;var t=\"[prefix[\"+this.getRoot()+\"]]\";e.deleteTiddlers(e.getMatches(t));this.path=e.getDataMap()};i.prototype.getReferences=function(){var t=\"[regexp:text[<\\\\$tiddlymap.*?view=.\"+this.getLabel()+\"..*?>]]\";return e.getMatches(t)};i.prototype.rename=function(t){if(!this.exists()||typeof t!==\"string\")return false;if(e.inArray(\"/\",t)){$tw.tmap.notify('A view name must not contain any \"/\"');return false}var i=this.getLabel();var r=this.opt.path.views+\"/\"+t;var s=e.changePrefix(this.getRoot(),r,true);if(!s)return false;this._registerPaths(t);this.rebuildCache(e.getValues(this.path),true);var o=$tw.tmap.indeces.loNTy;for(var n=o.length;n--;){var a=o[n];if(a.data.view===i){a.setData(\"view\",t).persist()}}};i.prototype.isEnabled=function(t){return e.isTrue(this.getConfig(t),false)};i.prototype.getConfig=function(t,i,r){if(!this.exists()){var s=e.getDataMap()}else if(!i&&this.config){var s=this.config}else{var o=$tw.wiki.getTiddler(this.path.config).fields;var s=e.getPropertiesByPrefix(o,\"config.\")}return t?s[e.startsWith(t,\"config.\")?t:\"config.\"+t]:s};i.prototype.getStabilizationIterations=function(){return this.stabIterations?this.stabIterations:1e3};i.prototype.setStabilizationIterations=function(t){};i.prototype.getHierarchyEdgeTypes=function(){if(this.getConfig(\"layout.active\")!==\"hierarchical\")return[];var t=e.getPropertiesByPrefix(this.getConfig(),\"config.layout.hierarchical.order-by-\",true);var i=e.getDataMap();for(var r in t){if(t[r]===\"true\"){var s=e.getTiddler($tw.tmap.indeces.tById[r]);if(s){i[e.getBasename(s.fields.title)]=true}}}return i};i.prototype.setConfig=function(){if(arguments[0]==null)return;if(arguments.length===1&&typeof arguments[0]===\"object\"){for(var t in arguments[0]){this.setConfig(t,arguments[0][t])}}else if(arguments.length===2&&typeof arguments[0]===\"string\"){var t=e.getWithoutPrefix(arguments[0],\"config.\");var i=arguments[1];if(i===undefined){return}if(i===null){this.logger(\"debug\",\"Removing config\",t);delete this.config[\"config.\"+t]}else{if(t===\"edge_type_namespace\"&&typeof i===\"string\"&&i.length){i=i.replace(/([^:])$/,\"$1:\")}}this.logger(\"log\",\"Setting config\",t,i);this.config[\"config.\"+t]=i}else{return}$tw.wiki.addTiddler(new $tw.Tiddler($tw.wiki.getTiddler(this.path.config),this.config));this._ignoreOnNextRebuild[this.path.config]=true};i.prototype.isExplicitNode=function(t){var e=$tw.utils.escapeRegExp(this._getAddNodeFilterPart(t));return this.getNodeFilter(\"expression\").match(e)};i.prototype.isLiveView=function(){return this.getLabel()===this.opt.misc.liveViewLabel};i.prototype.removeNodeFromFilter=function(t){if(!this.isExplicitNode(t))return false;var e=this.getNodeFilter(\"expression\");var i=e.replace(this._getAddNodeFilterPart(t),\"\");this.setNodeFilter(i);return true};i.prototype._getAddNodeFilterPart=function(t){return\"[field:tmap.id[\"+t.id+\"]]\"};i.prototype.setNodeFilter=function(t,i){if(!this.exists())return;t=t.replace(/[\\n\\r]/g,\" \");if(this.getNodeFilter.expression===t){return}if(this.isLiveView()&&!i){$tw.tmap.notify(\"It is forbidden to change the node filter of the live view!\");return}e.setField(this.path.nodeFilter,\"filter\",t);this.logger(\"debug\",\"Node filter set to\",t);this.nodeFilter=this.getNodeFilter(null,true);this._ignoreOnNextRebuild[this.path.nodeFilter]=true};i.prototype.setEdgeFilter=function(t){if(!this.exists())return;t=t.replace(/[\\n\\r]/g,\" \");if(this.getEdgeFilter.expression===t){return}e.setField(this.path.edgeFilter,\"filter\",t);this.logger(\"debug\",\"Edge filter set to\",t,this.path.edgeFilter);this.edgeFilter=this.getEdgeFilter(null,true);this._ignoreOnNextRebuild[this.path.edgeFilter]=true};i.prototype.appendToNodeFilter=function(t){var t=this.getNodeFilter(\"expression\")+\" \"+t;this.setNodeFilter(t)};i.prototype.addNodeToView=function(t){this.appendToNodeFilter(this._getAddNodeFilterPart(t));this.saveNodePosition(t)};i.prototype.getEdgeFilter=function(t,i){if(!i&&this.edgeFilter){var r=this.edgeFilter}else{var r=e.getDataMap();var s=$tw.wiki.getTiddler(this.path.edgeFilter);r.expression=s&&s.fields.filter?s.fields.filter:this.opt.filter.defaultEdgeFilter;r.compiled=$tw.wiki.compileFilter(r.expression)}return t?r[t]:r};i.prototype.getNodeFilter=function(t,i){if(!i&&this.nodeFilter){var r=this.nodeFilter}else{var r=e.getDataMap();var s=$tw.wiki.getTiddler(this.path.nodeFilter);r.expression=s&&s.fields.filter?s.fields.filter:\"\";r.compiled=$tw.wiki.compileFilter(r.expression)}return t?r[t]:r};i.prototype.getNodeData=function(t,i){var r=!i&&this.nodeData?this.nodeData:e.parseFieldData(this.getNodeDataStore(),\"text\",{});return t?r[t]:r};i.prototype.isEqual=function(t){var t=new i(t);return this.getRoot()===t.getRoot()};i.prototype.saveNodeData=function(){if(!this.exists())return;var t=arguments;var i=this.getNodeData();if(t.length===2&&typeof t[0]===\"string\"){if(typeof t[1]===\"object\"){if(t[1]===null){delete i[t[0]]}else{i[t[0]]=$tw.utils.extend(i[t[0]]||{},t[1])}}}else if(t.length===1&&typeof t[0]===\"object\"){$tw.tmap.logger(\"log\",\"Storing data in\",this.getNodeDataStore());$tw.utils.extend(i,t[0])}else{return}e.writeFieldData(this.getNodeDataStore(),\"text\",i);this.nodeData=i;this._ignoreOnNextRebuild[this.path.map]=true};i.prototype.getNodeDataStore=function(){return this.path.map};i.prototype.saveNodePosition=function(t){if(t.id&&t.x&&t.y){this.saveNodeData(t.id,{x:t.x,y:t.y})}};i.prototype.saveNodeStyle=function(t,e){if(!this.exists())return;var i=this.getNodeData()[t];if(!i)return;for(var r in i){if(r!==\"x\"&&r!==\"y\")delete i[r]}this.saveNodeData(t,e)};exports.ViewAbstraction=i})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/ViewAbstraction",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/config/vis": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/config/vis\ntype: application/javascript\nmodule-type: library\n\n@preserve\n\n\\*/\n(function(){\"use strict\";exports.config={locale:\"en_EN\",clickToUse:true,autoResize:false,height:\"100%\",width:\"100%\",configure:{enabled:false},interaction:{dragNodes:true,dragView:true,hideEdgesOnDrag:false,hideNodesOnDrag:false,hover:false,navigationButtons:true,selectable:true,selectConnectedEdges:true,tooltipDelay:300,zoomView:true,keyboard:{enabled:false,speed:{x:10,y:10,zoom:.02},bindToWindow:false}},manipulation:{initiallyActive:true},nodes:{shape:\"box\",color:{border:\"#2B7CE9\",background:\"#97C2FC\",highlight:{border:\"#2B7CE9\",background:\"#D2E5FF\"},hover:{border:\"white\",background:\"white\"}}},edges:{smooth:{enabled:true},color:{color:\"#848484\",inherit:false},arrows:{to:{enabled:true}}},physics:{forceAtlas2Based:{springLength:200,centralGravity:0,springConstant:.13},solver:\"forceAtlas2Based\",stabilization:{enabled:true,iterations:1e3,updateInterval:100,onlyDynamicEdges:false,fit:false}}}})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/config/vis",
            "type": "application/javascript",
            "module-type": "library"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/tmap": {
            "text": "/*\\\ntitle: $:/plugins/felixhayashi/tiddlymap/js/tmap\ntype: application/javascript\nmodule-type: macro\n\nIn connection with tiddlymap, this macro allows us to access\nsystem information from within tiddlers as well as to execute some\nutil functions.\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var r=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;exports.name=\"tmap\";exports.params=function(r){var t=[];for(var e=0;e<r;e++){t.push({name:\"arg\"+e})}return t}(5);var t=function(){return};exports.run=function(){var r=$tw.tmap.utils;switch(arguments[0]){case\"basename\":return r.getBasename(arguments[1]||this.getVariable(\"currentTiddler\"));case\"testJSON\":var t=$tw.wiki.getTiddler(this.getVariable(\"currentTiddler\"));try{JSON.parse(t.fields[arguments[1]]);return\"valid\"}catch(e){return\"malformed\"}case\"splitAndSelect\":var a=this.getVariable(\"currentTiddler\");var n=a.split(arguments[1])[arguments[2]];return n!=null?n:a;case\"concat\":var a=\"\";for(var s=1,i=arguments.length;s<i;s++){a+=arguments[s]}return a;case\"uuid\":return r.genUUID();case\"option\":var u=$tw.tmap.opt;var l=arguments[1].split(\".\");for(var s=0;s<l.length;s++){if(typeof u==\"object\"&&u[l[s]]){u=u[l[s]]}else{return\"property doesn't exist\"}}if(!(typeof u==\"string\"))return\"property is not a string\";return u}return\"wrong signature\"}})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/tmap",
            "type": "application/javascript",
            "module-type": "macro"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/caretaker": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/caretaker\ntype: application/javascript\nmodule-type: startup\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var e=require(\"$:/plugins/felixhayashi/tiddlymap/js/config/vis\").config;var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/config/sys\").config;var a=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var i=require(\"$:/plugins/felixhayashi/tiddlymap/js/Adapter\").Adapter;var r=require(\"$:/plugins/felixhayashi/tiddlymap/js/DialogManager\").DialogManager;var s=require(\"$:/plugins/felixhayashi/tiddlymap/js/CallbackManager\").CallbackManager;var l=require(\"$:/plugins/felixhayashi/tiddlymap/js/ViewAbstraction\").ViewAbstraction;var d=require(\"$:/plugins/felixhayashi/tiddlymap/js/EdgeType\").EdgeType;var p=require(\"$:/plugins/felixhayashi/tiddlymap/js/NodeType\").NodeType;var n=require(\"$:/plugins/felixhayashi/vis/vis.js\");var o=function(i){var r=i;if(!r.path)r.path=a.getDataMap();r.path.pluginRoot=\"$:/plugins/felixhayashi/tiddlymap\";r.path.edgeTypes=\"$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes\";r.path.nodeTypes=\"$:/plugins/felixhayashi/tiddlymap/graph/nodeTypes\";r.path.listEdgeTypes=\"$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tw-list:\";r.path.fieldEdgeTypes=\"$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tw-field:\";r.path.views=\"$:/plugins/felixhayashi/tiddlymap/graph/views\";r.path.options=\"$:/plugins/felixhayashi/tiddlymap/config\";r.path.dialogs=\"$:/plugins/felixhayashi/tiddlymap/dialog\";r.path.footers=\"$:/plugins/felixhayashi/tiddlymap/dialogFooter\";r.path.tempRoot=\"$:/temp/tmap\";r.path.localHolders=\"$:/temp/tmap/holders\";if(!r.ref)r.ref=a.getDataMap();r.ref.defaultViewHolder=\"$:/plugins/felixhayashi/tiddlymap/misc/defaultViewHolder\";r.ref.graphBar=\"$:/plugins/felixhayashi/tiddlymap/misc/advancedEditorBar\";r.ref.sysUserConf=\"$:/plugins/felixhayashi/tiddlymap/config/sys/user\";r.ref.visUserConf=\"$:/plugins/felixhayashi/tiddlymap/config/vis/user\";r.ref.welcomeFlag=\"$:/plugins/felixhayashi/tiddlymap/flag/welcome\";r.ref.focusButton=\"$:/plugins/felixhayashi/tiddlymap/misc/focusButton\";r.ref.sysMeta=\"$:/plugins/felixhayashi/tiddlymap/misc/meta\";r.ref.sidebarBreakpoint=\"$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint\";if(!r.config)r.config=a.getDataMap();r.config.sys=a.merge({},t,a.unflatten($tw.wiki.getTiddlerData(r.ref.sysUserConf)));r.config.vis=a.merge({},e,$tw.wiki.getTiddlerData(r.ref.visUserConf));if(!r.field)r.field=a.getDataMap();$tw.utils.extend(r.field,r.config.sys.field);if(!r.misc)r.misc=a.getDataMap();r.misc.unknownEdgeLabel=\"tmap:undefined\";r.misc.liveViewLabel=\"Live View\";r.misc.defaultViewLabel=\"Default\";if(!r.filter)r.filter=a.getDataMap();r.filter.nodeTypes=\"[prefix[\"+r.path.nodeTypes+\"]]\";r.filter.edgeTypes=\"[prefix[\"+r.path.edgeTypes+\"]]\";r.filter.listEdgeTypes=\"[prefix[\"+r.path.listEdgeTypes+\"]]\";r.filter.fieldEdgeTypes=\"[prefix[\"+r.path.fieldEdgeTypes+\"]]\";r.filter.views=\"[\"+r.field.viewMarker+\"[true]]\";r.filter.defaultEdgeFilter=r.filter.edgeTypes+\"-[suffix[tw-body:link]]\"+\"-[suffix[tw-list:tags]]\";+\"-[suffix[tw-list:list]]\";if(!r.selector)r.selector=a.getDataMap();var s=\"[all[tiddlers+shadows]!has[draft.of]]\";r.selector.allEdgeTypes=s+\" +\"+r.filter.edgeTypes;r.selector.allEdgeTypesByLabel=r.selector.allEdgeTypes+\" +[removeprefix[\"+r.path.edgeTypes+\"/]]\";r.selector.allNodeTypes=s+\" +\"+r.filter.nodeTypes;r.selector.allNodeTypesByLabel=r.selector.allNodeTypes+\" +[removeprefix[\"+r.path.nodeTypes+\"/]]\";r.selector.allViews=s+\" +\"+r.filter.views;r.selector.allViewsByLabel=r.selector.allViews+\"+[removeprefix[\"+r.path.views+\"/]]\";r.selector.allPotentialNodes=\"[all[tiddlers]!is[system]!has[draft.of]]\";r.selector.allListEdgeStores=s+\" +\"+r.filter.listEdgeTypes+\" +[removeprefix[\"+r.path.listEdgeTypes+\"]]\";r.selector.allFieldEdgeStores=s+\" +\"+r.filter.fieldEdgeTypes+\" +[removeprefix[\"+r.path.fieldEdgeTypes+\"]]\"};var f=function(e){$tw.tmap.start(\"Attaching Indeces\");e.indeces=e.indeces||{};var t=$tw.wiki.allTitles();g(e.indeces,t);y(e.indeces,t);$tw.tmap.stop(\"Attaching Indeces\")};var g=function(e,t){e=e||$tw.tmap.indeces;t=t||$tw.wiki.allTitles();var i=e.tById={};var r=e.idByT={};for(var s=t.length;s--;){var l=t[s];var d=$tw.wiki.getTiddler(l);if(a.isSystemOrDraft(d))continue;var p=d.fields[\"tmap.id\"];if(!p){p=a.genUUID();a.setField(d,\"tmap.id\",p)}i[p]=l;r[l]=p}};var y=function(e,t){e=e||$tw.tmap.indeces;t=t||$tw.wiki.allTitles();var i=$tw.tmap.opt.path.nodeTypes;var r=e.glNTy=[];var s=e.loNTy=[];for(var l=t.length;l--;){if(a.startsWith(t[l],i)){var d=new p(t[l]);(d.data.view?s:r).push(d)}}e.glLoNTy=r.concat(s);e.loGlNTy=s.concat(r)};var m=function(e){var t=e;var i=function(){};if(a.isTrue($tw.tmap.opt.config.sys.debug,false)&&console){t.logger=function(){if(arguments.length<2)return;var e=Array.prototype.slice.call(arguments);var t=e.shift(e);var a=console.hasOwnProperty(t)?t:\"debug\";console[a].apply(console,e)};t.start=function(e){console.time(\"timer: \"+e)};t.stop=function(e){console.timeEnd(\"timer: \"+e)}}else{t.logger=t.start=t.stop=i}t.notify=a.isTrue($tw.tmap.opt.config.sys.notifications)?a.notify:i};var c=function(){for(var e=$tw.tmap.registry.length;e--;){var t=$tw.tmap.registry[e];if(t.isZombieWidget()){$tw.tmap.logger(\"warn\",\"A graph has been removed.\");t.destruct();$tw.tmap.registry.splice(e,1)}}};var u=function(e){var t=e.fields[\"tmap.id\"];if(!t)return;var i=$tw.tmap.opt;var r=a.getTiddlersWithField(\"tmap.id\",t,{limit:2});delete r[e.fields.title];var s=Object.keys(r)[0];if(s){var l={param:{changedTiddler:e.fields.title,existingTiddler:s,id:t}};$tw.tmap.dialogManager.open(\"dublicateIdInfo\",l)}if(s){a.setField(e,\"tmap.edges\",undefined);$tw.tmap.adapter.assignId(e,true)}};var h=function(e){if(!e)e=$tw.tmap;if(!e.opt)e.opt=a.getDataMap();o(e.opt);m(e,e.opt);$tw.tmap.logger(\"warn\",\"Rebuilt globals\")};var w=function(e){if(e[\"$:/HistoryList\"]){var t=a.getField(\"$:/HistoryList\",\"current-tiddler\")}else if(e[\"$:/temp/focussedTiddler\"]){var t=a.getField(\"$:/temp/focussedTiddler\",\"text\")}if(t!=null){a.setField(\"$:/temp/tmap/currentTiddler\",\"text\",t)}};var $=function(e){if(a.isTrue($tw.tmap.opt.config.sys.debug,false)){for(var t in e){if(e[t].deleted){$tw.tmap.logger(\"warn\",\"Tiddler deleted:\",t)}else{$tw.tmap.logger(\"warn\",\"Tiddler modified:\",t,a.getTiddler(t))}}}};var v=function(e){var t=$tw.tmap.opt.path.nodeTypes;var i=$tw.tmap.opt.path.options;var r=0;$tw.wiki.addEventListener(\"change\",function(s){$tw.tmap.start(\"Caretaker handling changes\");$tw.tmap.logger(\"warn\",\"=== Refresh \"+r++ +\" ===\");$(s);e.handleChanges(s);var l=false;var d=false;for(var p in s){if(a.isSystemOrDraft(p)){if(a.startsWith(p,t)&&!l){y();l=true}if(a.startsWith(p,i)&&!d){h();d=true}continue}var n=a.getTiddler(p);if(n){u(n);$tw.tmap.adapter.assignId(n)}else{var o=$tw.tmap.indeces.idByT[p];if(!o){$tw.tmap.logger(\"warn\",\"Ignoring Tiddler\",p,\"without id; Assuming draft\");continue}var f=a.getTiddlerWithField(\"tmap.id\",o);if(f){$tw.tmap.logger(\"warn\",\"Tiddler\",p,\"renamed into\",f)}else{$tw.tmap.logger(\"warn\",\"Tiddler\",p,\"removed\");$tw.tmap.adapter.deleteNode(o)}}}w(s);$tw.tmap.stop(\"Caretaker handling changes\")})};var T=function(){var e=$tw.tmap.opt.config.sys.defaultView;if(e){a.setField($tw.tmap.opt.ref.defaultViewHolder,\"text\",e)}};var x=function(){if(a.tiddlerExists($tw.tmap.opt.ref.sysMeta))return;$tw.tmap.logger(\"warn\",\"Creating meta file\");var e=$tw.wiki.getTiddler($tw.tmap.opt.path.pluginRoot);$tw.wiki.setTiddlerData($tw.tmap.opt.ref.sysMeta,{originalVersion:e.fields.version,dataStructureState:\"0.6.9\",showWelcomeMessage:true})};exports.name=\"tmap.caretaker\";exports.platforms=[\"browser\"];exports.after=[\"startup\"];exports.before=[\"rootwidget\"];exports.synchronous=true;exports.startup=function(){$tw.tmap=a.getDataMap();$tw.tmap.utils=a;$tw.tmap.keycharm=n.keycharm;$tw.tmap.obj={NodeType:p,EdgeType:d,ViewAbstraction:l};$tw.tmap.registry=[];window.setInterval(c,5e3);h($tw.tmap);f($tw.tmap);T();$tw.tmap.adapter=new i;x();$tw.tmap.callbackManager=new s;$tw.tmap.dialogManager=new r($tw.tmap.callbackManager);v($tw.tmap.callbackManager);$tw.tmap.logger(\"warn\",\"TiddlyMap's caretaker successfully started\")}})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/caretaker",
            "type": "application/javascript",
            "module-type": "startup"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/fixer": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/fixer\ntype: application/javascript\nmodule-type: startup\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";exports.name=\"tmap.fixer\";exports.after=[\"tmap.caretaker\"];exports.before=[\"rootwidget\"];exports.synchronous=true;var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var e=require(\"$:/plugins/felixhayashi/tiddlymap/js/Adapter\").Adapter;var r=require(\"$:/plugins/felixhayashi/tiddlymap/js/ViewAbstraction\").ViewAbstraction;var a=require(\"$:/plugins/felixhayashi/tiddlymap/js/EdgeType\").EdgeType;var i=function(e,r){var i=t.getByPrefix(e);for(var s=0;s<i.length;s++){var p=t.getBasename(i[s]);if(p===\"__noname__\"){p=\"tmap:unknown\"}p=new a(p);if(!p.exists())p.persist();var u=$tw.wiki.getTiddlerData(i[s]);for(var d=0;d<u.length;d++){u[d].type=(r?r+\":\":\"\")+p.getId();$tw.tmap.adapter.insertEdge(u[d])}$tw.wiki.deleteTiddler(i[s])}};exports.startup=function(){var e=$tw.wiki.getTiddlerData($tw.tmap.opt.ref.sysMeta,{});var a=$tw.wiki.getTiddler($tw.tmap.opt.path.pluginRoot);$tw.tmap.logger(\"debug\",\"Fixer is started\");$tw.tmap.logger(\"debug\",\"Data-structure currently in use: \",e.dataStructureState);var s={before:\"0.6.11\",after:\"0.7.0\"};if($tw.utils.checkVersions(s.before,e.dataStructureState)){$tw.tmap.logger(\"debug\",\"Upgrading data structure to\",s.after);i(\"$:/plugins/felixhayashi/tiddlymap/graph/edges\",null);var p=$tw.tmap.opt.selector.allViews;var u=t.getMatches(p);for(var d=0;d<u.length;d++){var o=new r(u[d]);i(o.getRoot()+\"/graph/edges\",o)}t.setEntry($tw.tmap.opt.ref.sysMeta,\"dataStructureState\",s.after)}var s={before:\"0.7.31\",after:\"0.7.32\"};if($tw.utils.checkVersions(s.before,e.dataStructureState)){$tw.tmap.logger(\"debug\",\"Upgrading data structure to\",s.after);var g=$tw.tmap.adapter.getView(\"Live View\");g.setNodeFilter(\"[field:title{$:/temp/tmap/currentTiddler}]\",true);g.setConfig({\"refresh-trigger\":null,\"refresh-triggers\":$tw.utils.stringifyList([\"$:/temp/tmap/currentTiddler\"])});t.setEntry($tw.tmap.opt.ref.sysMeta,\"dataStructureState\",s.after)}var s={before:\"0.7.32\",after:\"0.9.0\"};if($tw.utils.checkVersions(s.before,e.dataStructureState)){$tw.tmap.logger(\"debug\",\"Upgrading data structure to\",s.after);var l=$tw.tmap.opt.ref.visUserConf;var n=t.unflatten($tw.wiki.getTiddlerData(l,{}));if(typeof n.groups===\"object\"){new $tw.tmap.obj.NodeType(\"tmap:neighbour\").setStyle(n.groups[\"neighbours\"]).persist();delete n.groups;$tw.wiki.setTiddlerData(l,n)}t.setEntry($tw.tmap.opt.ref.sysMeta,\"dataStructureState\",s.after)}}})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/fixer",
            "type": "application/javascript",
            "module-type": "startup"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/startup/listener": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/startup/listener\ntype: application/javascript\nmodule-type: startup\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var e=require(\"$:/plugins/felixhayashi/tiddlymap/js/NodeType\").NodeType;var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/EdgeType\").EdgeType;var a=function(){this.adapter=$tw.tmap.adapter;this.wiki=$tw.wiki;this.logger=$tw.tmap.logger;this.opt=$tw.tmap.opt;this.utils=$tw.tmap.utils;this.dialogManager=$tw.tmap.dialogManager;this.utils.addListeners({\"tmap:tm-remove-edge\":this.handleRemoveEdge,\"tmap:tm-load-type-form\":this.handleLoadTypeForm,\"tmap:tm-save-type-form\":this.handleSaveTypeForm,\"tmap:tm-create-type\":this.handleCreateType,\"tmap:tm-create-edge\":this.handleCreateEdge,\"tmap:tm-suppress-dialog\":this.handleSuppressDialog,\"tmap:tm-generate-widget\":this.handleGenerateWidget,\"tmap:tm-download-graph\":this.handleDownloadGraph,\"tmap:tm-manage-edge-types\":this.handleOpenTypeManager,\"tmap:tm-manage-node-types\":this.handleOpenTypeManager,\"tmap:tm-cancel-dialog\":this.handleCancelDialog,\"tmap:tm-confirm-dialog\":this.handleConfirmDialog},$tw.rootWidget,this)};a.prototype.handleCancelDialog=function(e){this.utils.setField(e.param,\"text\",\"\")};a.prototype.handleConfirmDialog=function(e){this.utils.setField(e.param,\"text\",\"1\")};a.prototype.handleSuppressDialog=function(e){if(this.utils.isTrue(e.paramObject.suppress,false)){this.utils.setEntry(this.opt.ref.sysUserConf,\"suppressedDialogs.\"+e.paramObject.dialog,true)}};a.prototype.handleDownloadGraph=function(e){var t=this.adapter.getGraph({view:e.paramObject.view});t.nodes=this.utils.convert(t.nodes,\"array\");t.edges=this.utils.convert(t.edges,\"array\");var a=\"$:/temp/tmap/export\";this.utils.setField(a,\"text\",JSON.stringify(t,null,2));$tw.rootWidget.dispatchEvent({type:\"tm-download-file\",param:a,paramObject:{filename:e.paramObject.view+\".json\"}})};a.prototype.handleGenerateWidget=function(e){if(!e.paramObject)e.paramObject={};var t={dialog:{preselects:{view:e.paramObject.view||this.opt.misc.defaultViewLabel}}};this.dialogManager.open(\"getWidgetCode\",t)};a.prototype.handleRemoveEdge=function(e){this.adapter.deleteEdge(e.paramObject)};a.prototype.handleCreateEdge=function(e){var t={from:this.adapter.makeNode(e.paramObject.from).id,to:this.adapter.makeNode(e.paramObject.to).id,type:e.paramObject.label,id:e.paramObject.id};this.adapter.insertEdge(t);$tw.tmap.notify(\"Edge inserted\")};a.prototype.handleOpenTypeManager=function(e){if(!e.paramObject)e.paramObject={};var t=e.type.match(/tmap:tm-(.*)/)[1];if(t===\"manage-edge-types\"){var a=\"Edge-Type Manager\";var i=this.opt.selector.allEdgeTypesByLabel}else{var a=\"Node-Type Manager\";var i=this.opt.selector.allNodeTypesByLabel}var p={mode:t,topic:a,filter:i+\" +[search:title{$:/temp/tmap/elementTypeSearch}]\"+\" +[sort[title]]\"};var r=this.dialogManager.open(\"elementTypeManager\",p);if(e.paramObject.type){this.handleLoadTypeForm({paramObject:{mode:t,id:e.paramObject.type,output:r.fields[\"output\"]}})}};a.prototype.handleLoadTypeForm=function(a){var i=a.paramObject.output;var p=a.paramObject.mode===\"manage-edge-types\"?new t(a.paramObject.id):new e(a.paramObject.id);p.persist(i,true);if(a.paramObject.mode===\"manage-edge-types\"){var r=this.adapter.selectEdgesByType(p);var d=Object.keys(r).length;this.utils.setField(i,\"temp.usageCount\",d)}$tw.wiki.addTiddler(new $tw.Tiddler(this.utils.getTiddler(i),{\"temp.idImmutable\":p.isShipped()?\"true\":\"\",\"temp.newId\":p.getId(),\"vis-inherited\":JSON.stringify(this.opt.config.vis)}));this.utils.deleteByPrefix(\"$:/state/tabs/elementTypeManager\")};a.prototype.handleSaveTypeForm=function(a){var i=this.utils.getTiddler(a.paramObject.output);if(!i)return;var p=a.paramObject.mode;var r=p===\"manage-edge-types\"?new t(i.fields.id):new e(i.fields.id);if(this.utils.isTrue(i.fields[\"temp.deleteType\"],false)){this.deleteType(p,r,i)}else{this.saveType(p,r,i)}};a.prototype.deleteType=function(e,t,a){this.logger(\"debug\",\"Deleting type\",t);if(e===\"manage-edge-types\"){this.adapter._processEdgesWithType(t,{action:\"delete\"})}else{this.adapter.removeNodeType(t)}this.wiki.addTiddler(new $tw.Tiddler({title:this.utils.getTiddlerRef(a)}));$tw.tmap.notify(\"Deleted type\")};a.prototype.saveType=function(e,t,a){var i=this.utils.getTiddler(a);t.loadDataFromTiddler(i);t.persist();if(!i.fields[\"temp.newId\"]){this.utils.setField(i,\"temp.newId\",i.fields[\"id\"])}else if(i.fields[\"temp.newId\"]!==i.fields[\"id\"]){if(e===\"manage-edge-types\"){this.adapter._processEdgesWithType(t,{action:\"rename\",newName:i.fields[\"temp.newId\"]})}this.utils.setField(i,\"id\",i.fields[\"temp.newId\"])}$tw.tmap.notify(\"Saved type data\")};a.prototype.handleCreateType=function(e){var t=e.paramObject.id;var a=e.paramObject.mode===\"manage-edge-types\"?\"edge\":\"node\";this.handleLoadTypeForm({paramObject:{id:this.adapter.createType(a,t).getId(),mode:e.paramObject.mode,output:e.paramObject.output}})};a.prototype.getTypeFromEvent=function(a){return a.paramObject.mode===\"manage-edge-types\"?new t(a.paramObject.id):new e(a.paramObject.id)};exports.name=\"tmap.listener\";exports.platforms=[\"browser\"];exports.after=[\"rootwidget\",\"tmap.caretaker\"];exports.before=[\"story\"];exports.synchronous=true;exports.startup=function(){new a}})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/startup/listener",
            "type": "application/javascript",
            "module-type": "startup"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/cannotDeleteViewDialog": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/cannotDeleteViewDialog",
            "subtitle": "{{$:/core/images/locked-padlock}} You cannot delete this view!",
            "text": "\\rules except wikilink\n\nIt is not possible to delete the current view as ''<<count>>'' tiddlers\nare referencing it. To delete the view you must first remove the tiddlymap\nwidgets in the tiddlers listed below or change their view attributes.\n\n''References''\n\n<ul>\n<$list filter=<<filter>> variable=\"item\">\n  <li><$link><<item>></$link></li>\n</$list>\n</ul>\n\nAfter the references are removed, you may delete the view."
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/configureTiddlyMap": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/configureTiddlyMap",
            "subtitle": "{{$:/core/images/options-button}} Configuration of TiddlyMap",
            "text": "\\rules except wikilink\n\n\\define vis-refresh-trigger() $(temp)$/vis-refresh\n\n<$importvariables filter=\"[[$:/plugins/felixhayashi/tiddlymap/misc/macros]]\">\n\n<div class=\"tmap-flash-message tmap-info\">\n   {{$:/core/images/info-button}}\n   Please visit the [[online docs|http://tiddlymap.org#Changing%20TiddlyMap's%20default%20configuration]]\n   for more information about the following options.\n</div>\n\n<fieldset>\n  <legend>Field settings</legend>\n  <table class=\"tmap-config-table\">\n    <<tmap-row type:\"input-text\"\n        title:\"Node-icon field\"\n        field:\"config.sys.field.nodeIcon\" \n        descr:\"Local image used as node image in the graphs.\">>\n    <<tmap-row type:\"input-text\"\n        title:\"Node-label field\"\n        field:\"config.sys.field.nodeLabel\" \n        descr:\"Alternative node label to use instead of the title.\">>\n    <<tmap-row type:\"input-text\"\n        title:\"Node-info field\"\n        field:\"config.sys.field.nodeInfo\" \n        descr:\"Field used as tooltip when hovering a node in a graph.\"\n        note:\"It is prohibited to use the text field here.\">>\n  </table>   \n</fieldset>\n\n<fieldset><legend>System's talkativeness</legend>\n  <table class=\"tmap-config-table\">\n    <<tmap-row type:\"input-checkbox\"\n        title:\"Debug output\"\n        field:\"config.sys.debug\" \n        descr:\"Set this to true if you want debug information to be\n               displayed in the browser console.\">>\n    <<tmap-row type:\"input-checkbox\"\n        title:\"Show notifications\"\n        field:\"config.sys.notifications\" \n        descr:\"Set this to true if you want to receive fade-out\n               notifications for important events.\">>\n  </table>   \n</fieldset>\n\n<fieldset><legend>Interaction & behaviour</legend>\n  <table class=\"tmap-config-table\">\n    <<tmap-row type:\"input-checkbox\"\n        title:\"Allow single click mode\"\n        field:\"config.sys.singleClickMode\" \n        descr:\"A single click on a node is sufficient to open the\n               corresponding tiddler.\"\n        note:\"Drag and drop will still work and does not cause a\n              tiddler to be opened.\">>\n    <<tmap-row type:\"input-select\"\n        title:\"Edge click behaviour\"\n        field:\"config.sys.edgeClickBehaviour\" \n        selectFilter:\"[[nothing|Nothing]]\n                      [[manager|Open edge-type manager]]\"\n        descr:\"What should happen when you click on an edge?\">>\n    <<tmap-row type:\"input-select\"\n        title:\"Raster size\"\n        field:\"config.sys.raster\"\n        nochoice:\"Disabled\"\n        selectFilter:\"[[5|5px]]\n                      [[10|10px]]\n                      [[15|15px]]\n                      [[20|20px]]\n                      [[30|30px]]\n                      [[40|40px]]\"\n        descr:\"Snap nodes to an invisible raster of the given size\n               after drag'n'drop.\"\n        note:\"Only works when the view is not in floating mode\">>\n    <$macrocall type=\"input-select\"\n          $name=\"tmap-row\"\n          title=\"Default startup view\"\n          field=\"config.sys.defaultView\"\n          nochoice=\"Last view used at startup\"\n          selectFilter=<<tmap \"option\" \"selector.allViewsByLabel\">>\n          descr=\"The view to display at startup\" />\n  </table>\n</fieldset>\n\n<fieldset><legend>Editor menu bar</legend>\n  <table class=\"tmap-config-table\">\n    <<tmap-row type:\"input-checkbox\"\n        title:\"Show Neighbour&shy;hood button\"\n        field:\"config.sys.editorMenuBar.showNeighScopeButton\" \n        descr:\"Show or hide the neighbourhood scope button from the menu.\">>\n    <<tmap-row type:\"input-checkbox\"\n        title:\"Show Screen&shy;shot button\"\n        field:\"config.sys.editorMenuBar.showScreenshotButton\" \n        descr:\"Show or hide the screenshot button.\">>\n  </table>   \n</fieldset>\n\n<fieldset><legend>Global Visjs configurations</legend>\n  <div class=\"tmap-flash-message tmap-info\">\n     {{$:/core/images/info-button}}\n     The global vis configurations will affect all views and their\n     elements (nodes and edges) unless they are overridden on a lower\n     level. All options below are documented at\n     [[vis.js.org|http://visjs.org/docs/network]].\n  </div>\n  <table class=\"tmap-config-table\">\n    <tr>\n      <td>Reset:</td>\n      <td>\n        <div class=\"tmap-button-wrapper\">\n          <$button>Reset global configurations\n            <$action-setfield config.vis=\"\" />\n            <$action-setfield $tiddler=<<vis-refresh-trigger>> text=\"\" />\n          </$button>\n       </div>\n     </td>\n     <td>\n       Press the reset button to clear all global vis configurations\n       you did in the past.\n     </td>\n    </tr>\n  </table>\n  <$tmap-config\n      mode=\"manage-config\"\n      inherited=\"vis-inherited\"\n      extension=\"config.vis\"\n      refresh-trigger=<<vis-refresh-trigger>> />\n</fieldset>\n\n</$importvariables>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/configureView": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/configureView",
            "subtitle": "{{$:/core/images/options-button}} View configuration -- <<view>>",
            "text": "\\rules except wikilink\n\n\\define vis-refresh-trigger() $(temp)$/vis-refresh\n\n<$importvariables filter=\"[[$:/plugins/felixhayashi/tiddlymap/misc/macros]]\">\n\n<div class=\"tmap-flash-message tmap-info\">\n   {{$:/core/images/info-button}}\n   All configurations __only__ affect this view.\n</div>\n\n<fieldset><legend>Statistics</legend>\n  <table class=\"tmap-key-value-table\">\n    <tr>\n      <th align=\"left\">Created on</th>\n      <td><<createdOn>></td>\n    </tr>\n    <tr>\n      <th align=\"left\">Nodes contained in graph</th>\n      <td><<numberOfNodes>></td>\n    </tr>\n    <tr>\n      <th align=\"left\">Edges contained in graph</th>\n      <td><<numberOfEdges>></td>\n    </tr>\n  </table>\n</fieldset>\n\n<fieldset><legend>Layout</legend>\n  <table class=\"tmap-config-table\">\n    <<tmap-row type:\"input-checkbox\"\n        title:\"Floating nodes\"\n        field:\"config.physics_mode\" \n        descr:\"Set this to true if you want your nodes to freely\n               swirl around.\">>\n  </table>\n</fieldset>\n\n<fieldset><legend>Other</legend>\n  <table class=\"tmap-config-table\">\n    <<tmap-row type:\"input-text\"\n        title:\"Edge-type namespace\"\n        field:\"config.edge_type_namespace\" \n        descr:\"A namespace (like 'foaf' in 'foaf:knows') that will be\n               automatically added to all edge-types you create in\n               this view.\"\n        note:\"All namespaces are automatically stripped when the\n              edge label is displayed in the graph\">>\n  </table>\n</fieldset>\n\n<fieldset><legend>Neighbourhood</legend>\n  <table class=\"tmap-config-table\">\n    <<tmap-row type:\"input-select\"\n        title:\"Neighbourhood scope\"\n        field:\"config.neighbourhood_scope\" \n        selectFilter:\"[[0|Do not display a neighbourhood]]\n                      [[1|1 steps away]]\n                      [[2|2 steps away]]\n                      [[3|3 steps away]]\n                      [[4|4 steps away]]\n                      [[5|5 steps away]]\n                      [[*|No limit]]\"\n        descr:\"Display the neighbourhood that can be reached\n               within the given number of steps starting from the\n               matches returned by the node filter.\">>\n    <<tmap-row type:\"input-checkbox\"\n        title:\"Show inter-neighbour edges\"\n        field:\"config.show_inter_neighbour_edges\"\n        descr:\"When neighbours are displayed in a map along with\n               matches, also display their relations to other\n               neighbours\">>\n  </table>\n</fieldset>\n\n<fieldset><legend>Vis configurations</legend>\n  <div class=\"tmap-flash-message tmap-info\">\n     {{$:/core/images/info-button}}\n     The local vis configurations will affect all\n     elements (nodes and edges) of this view, unless they are\n     overridden on a lower level. All options below are documented at\n     [[vis.js.org|http://visjs.org/docs/network]].\n  </div>\n  <table class=\"tmap-config-table\">\n    <tr>\n      <td>Reset config:</td>\n      <td>\n        <div class=\"tmap-button-wrapper\">\n          <$button>Reset vis configuration\n            <$action-setfield config.vis=\"\" />\n            <$action-setfield $tiddler=<<vis-refresh-trigger>> text=\"\" />\n          </$button>\n       </div>\n     </td>\n     <td>\n       Press the reset button to clear this view's vis configurations.\n     </td>\n    </tr>\n  </table>\n  <$tmap-config\n      mode=\"manage-config\"\n      inherited=\"vis-inherited\"\n      extension=\"config.vis\"\n      refresh-trigger=<<vis-refresh-trigger>> />\n</fieldset>\n\n</$importvariables>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/getConfirmation": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/getConfirmation",
            "subtitle": "{{$:/core/images/import-button}} You must confirm in order to proceed!",
            "text": "\\rules except wikilink\n\n<<message>>\n\n''Are you really sure you want to do this?''\n\n\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/createView": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/createView",
            "subtitle": "{{$:/core/images/new-button}} Creating a new view",
            "text": "\\rules except wikilink\n\nPlease specify a view name.\n\nName:\n<$edit-text\n    focus=\"true\"\n    tiddler=<<output>>\n    field=\"text\"\n    type=\"text\"\n    tag=\"input\"\n    default=\"\"\n    class=\"tmap-trigger-field tmap-triggers-ok-button-on-enter\" />\n<sup>[1]</sup>\n\n---\n\n<sup>[1]</sup>\n<small>Attention: using the name of an existing view will overwrite it!</small>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/deleteNodeDialog": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/deleteNodeDialog",
            "subtitle": "{{$:/core/images/delete-button}} Deleting the node named \"<<var.nodeLabel>>\"",
            "text": "\\rules except wikilink\n\n''Please choose an option or abort:''\n\n<$radio tiddler=<<output>> field=\"opt.delete\" value=\"from system\">\n  Delete from system <sup>[1]</sup>\n</$radio><br />\n<$radio tiddler=<<output>> field=\"opt.delete\" value=\"from filter\">\n  Delete from graph's filter <sup>[2]</sup>\n</$radio>\n\n---\n\n<sup>[1]</sup>\n<small>This will delete the node named \"<<var.nodeLabel>>\" ''and'' the corresponding tiddler named \"<<var.nodeRef>>\" ''and'' all connected edges.</small><br/>\n<sup>[2]</sup>\n<small>''Important:'' Removing a node from the graph's filter only works, if the node has been added in the map editor per double click or via \"Add Node\". Then we can delete the node \"<<var.nodeLabel>>\" from the existing filter used by the graph without removing the underlying tiddler.  If the node hasn't been added as mentioned above, you need to change the underlying tiddler in a way that it doesn't match your filter anymore, if you want it to be removed from the graph.</small>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/dublicateIdInfo": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/dublicateIdInfo",
            "subtitle": "{{$:/core/images/info-button}} Dublicate id detected",
            "buttons": "ok_suppress",
            "text": "\\rules except wikilink\n\nTiddlyMap requires the value of the id field (\"tmap.id\") to be\nunique in order to correctly identify nodes and tiddlers.\n\nThe tiddler \"<<param.changedTiddler>>\" had the same id as the\ntiddler \"<<param.existingTiddler>>\".\n\nTherefore TiddlyMap\n\n* assigned a new id to tiddler \"<<param.changedTiddler>>\"\n* removed all edges from \"<<param.changedTiddler>>\"\n\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/edgeNotVisible": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/edgeNotVisible",
            "subtitle": "{{$:/core/images/info-button}} Edge will not be visible in view \"<<view>>\"",
            "buttons": "ok_suppress",
            "text": "\\rules except wikilink\n\nTiddlyMap just noticed that you created an edge of type <<type>> that will not be visible in this view.\n\nThe reason is that the view's edge filter prevents edges of type \"<<type>>\" from being displayed. To change this, open the view's menu and change the edge-filter configuration.\n\nFor further information, please see: [[Node and edge-type filters|http://tiddlymap.org#Node%20and%20edge-type%20filters]]."
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/fullscreenTiddlerEditor": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/fullscreenTiddlerEditor",
            "subtitle": "{{$:/core/images/edit-button}} <<draftTRef>>",
            "text": "\\rules except wikilink\n\n\\define defaultTab() $:/plugins/felixhayashi/tiddlymap/dialog/fullscreenTiddlerEditor/original\n\n<$importvariables filter=\"[[$:/plugins/felixhayashi/tiddlymap/misc/macros]]\n                          [[$:/core/macros/tabs]]\">\n<$macrocall $name=\"tabs\"\n    default=<<defaultTab>>\n    state=\"$:/state/tabs/elementTypeManager\"\n    tabsList=\"[all[shadows]prefix[$:/plugins/felixhayashi/tiddlymap/dialog/fullscreenTiddlerEditor/]]\" />\n</$importvariables>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/editFilters": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/editFilters",
            "subtitle": "{{$:/core/images/edit-button}} Filter editor -- <<view>>",
            "text": "\\rules except wikilink\n\n<$importvariables filter=\"[[$:/plugins/felixhayashi/tiddlymap/misc/macros]]\">\n\n<fieldset>\n  <legend>Filters <sup>[1]</sup></legend>\n  <table class=\"tmap-config-table\">\n    <<tmap-row type:\"input-textarea\"\n        title:\"Node filter\"\n        field:\"prettyNodeFilter\"\n        descr:\"Show tiddlers in the graph that match this filter.\n               Drafts and system tiddlers are automatically\n               excluded.\">>\n    <<tmap-row type:\"input-textarea\"\n        title:\"Edge filter\"\n        field:\"prettyEdgeFilter\" \n        descr:\"Show edges that match this filter\">>\n  </table>   \n</fieldset>\n\n</$importvariables>\n\n---\n\n<sup>[1]</sup> A new line is equivalent to a space symbol in a tw-filter expression.<br />\n<sup>[2]</sup> It is suggested to read [[Node and edge-type filters|http://tiddlymap.org#Node%20and%20edge-type%20filters]] and [[Edge-type namespaces|http://tiddlymap.org#Node%20and%20edge-type%20filters]] before using Tiddlymap's filter editor. Completely new to filters? Please see [[Introduction to filter notation|http://tiddlywiki.com/#Introduction%20to%20filter%20notation]].\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/editNode/default": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/editNode/default",
            "caption": "Global node style",
            "text": "\\rules except wikilink\n\n\\define vis-refresh-trigger() $(temp)$/vis-refresh\n\n<div class=\"tmap-flash-message tmap-info\">\n  {{$:/core/images/info-button}} A node's ''global style''\n  (also referred to as //global individual style//) defines its\n  individual appearance in all views.\n</div>\n<<maybeShowTidColorWarning>>\n<table class=\"tmap-config-table\">\n  <tr>\n    <td>Reset:</td>\n    <td>\n      <div class=\"tmap-button-wrapper\">\n        <$button>Reset this style\n          <$action-setfield global-node-style=\"\" />\n          <$action-setfield $tiddler=<<vis-refresh-trigger>> text=\"\" />\n        </$button>\n     </div>\n   </td>\n   <td>Press the reset button to clear the node's global style</td>\n  </tr>\n</table>\n<$tmap-config\n    mode=\"manage-node-types\"\n    inherited=\"[[inherited-global-default-style]]\n               [[inherited-local-default-style]]\n               [[inherited-group-styles]]\"\n    extension=\"global-node-style\"\n    refresh-trigger=<<vis-refresh-trigger>> />"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/editNode/local": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/editNode/local",
            "caption": "Local node style",
            "text": "\\rules except wikilink\n\n\\define vis-refresh-trigger() $(temp)$/vis-refresh\n\n\\define defaultContent()\n  <div class=\"tmap-flash-message tmap-info\">\n    {{$:/core/images/info-button}} The ''local node style'' \n    (also referred to as //local individual style// or\n    //view-specific node style//) overrides the\n    //global individual style// and only affects the node's\n    appearance in the current view (\"<<view>>\").\n  </div>\n  <<maybeShowTidColorWarning>>\n  <table class=\"tmap-config-table\">\n    <tr>\n      <td>Reset:</td>\n      <td>\n        <div class=\"tmap-button-wrapper\">\n          <$button>Reset this style\n            <$action-setfield local-node-style=\"\" />\n            <$action-setfield $tiddler=<<vis-refresh-trigger>> text=\"\" />\n          </$button>\n       </div>\n     </td>\n     <td>Press the reset button to clear the node's local style</td>\n    </tr>\n  </table>\n  <$tmap-config\n      mode=\"manage-node-types\"\n      inherited=\"[[inherited-global-default-style]]\n                 [[inherited-local-default-style]]\n                 [[inherited-group-styles]]\n                 [[global-node-style]]\"\n      extension=\"local-node-style\"\n      refresh-trigger=<<vis-refresh-trigger>> />\n      \n\\end\n\n\\define liveViewContent()\n  <div class=\"tmap-flash-message tmap-invalid\">\n    {{$:/core/images/info-button}} The live view only shows global\n    styles and does not allow the creation of any view specific\n    style.\n  </div>\n\\end\n\n<$list\n    filter=\"[<view>regexp[^Live View$]]\"\n    emptyMessage=<<defaultContent>>>\n  <<liveViewContent>>\n</$list>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/editNode": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/editNode",
            "subtitle": "{{$:/core/images/edit-button}} Editing style of node \"<<tiddler>>\"",
            "text": "\\rules except wikilink\n\n\\define tab(name) $(template)$/$name$\n\n\\define maybeShowTidColorWarning()\n  <$list filter=\"[<tidColor>regexp[.+]]\">\n  <div class=\"tmap-flash-message tmap-warning\">\n    {{$:/core/images/info-button}} You have set the tiddler's color\n    field to \"<<tidColor>>\". This value will be completely ignored\n    when you change node's color properties in the vis editor below.\n  </div>\n  </$list>\n  <$list filter=\"[<tidIcon>regexp[.+]]\">\n  <div class=\"tmap-flash-message tmap-warning\">\n    {{$:/core/images/info-button}} The tiddler is displayed as icon in the graph. Do __not__ change the shape property unless\n    you want the icon to be ignored.\n  </div>\n  </$list>\n\\end\n\n<$importvariables filter=\"[[$:/plugins/felixhayashi/tiddlymap/misc/macros]] [[$:/core/macros/tabs]]\">\n\nA node's individual style may be defined on two levels. Click on the tabs for further details. All options are documented at [[vis.js.org|http://visjs.org/docs/network/nodes]].\n\n<<templateTRef>>\n\n<$macrocall\n  $name=\"tabs\"\n  default=<<tab \"default\">>\n  state=\"$:/state/tabs/elementTypeManager\"\n  tabsList=\"[all[shadows]prefix<template>] -[<template>]\"\n/>\n\n</$importvariables>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/fullscreenTiddlerEditor/draft": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/fullscreenTiddlerEditor/draft",
            "caption": "Draft",
            "text": "\\rules except wikilink\n\n<div class=\"tmap-modal-editor\">\n  <$edit-text tiddler=<<draftTRef>> field=\"color\" tag=\"input\" type=\"color\"/>\n  <$importvariables filter=\"[all[tiddlers+shadows]prefix[$:/core/macros/]]\">\n    <$set name=\"currentTiddler\" value=<<draftTRef>> >\n      <$transclude tiddler=\"$:/core/ui/EditTemplate\" field=\"text\" mode=\"block\" />\n    </$set>\n  </$importvariables>\n</div>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/fullscreenTiddlerEditor/original": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/fullscreenTiddlerEditor/original",
            "caption": "Preview",
            "text": "\\rules except wikilink\n\n<$transclude tiddler=<<draftTRef>> mode=\"block\" />\n\n<!--\n<$set name=\"currentTiddler\" value=<<draftTRef>> >\n  <$transclude tiddler=\"$:/core/ui/ViewTemplate\" field=\"text\" mode=\"block\" />\n</$set>-->\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/fieldChanged": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/fieldChanged",
            "subtitle": "{{$:/core/images/info-button}} The field \"<<name>>\" changed",
            "text": "\\rules except wikilink\n\nYou changed the field \"<<name>>\" from \"<<oldValue>>\" to \"<<newValue>>\".\n\nIt is recommended to let TiddlyMap copy all values from the former field \"<<oldValue>>\" to the new field \"<<newValue>>\" so the data stored in \"<<oldValue>>\" is not lost. This operation has to be done now or never.\n\nDo you want to move each tiddler's existing \"<<oldValue>>\" value to \"<<newValue>>\"? Please note that any value currently stored in \"<<newValue>>\" would consequently be overridden and the old field \"<<oldValue>>\" would be eventually removed!"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/fullscreenNotSupported": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/fullscreenNotSupported",
            "subtitle": "{{$:/core/images/info-button}} Your machine does not support fullscreen",
            "buttons": "ok_suppress",
            "text": "\\rules except wikilink\n\nPlease have a look [[here|http://caniuse.com/#feat=fullscreen]] to see a list of supported devices/browsers.\n\nSorry for this :(\n\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/getWidgetCode": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/getWidgetCode",
            "subtitle": "{{$:/core/images/permalink-button}} Widget Code Generator",
            "buttons": "close",
            "text": "\\rules except wikilink\n\n<$importvariables filter=\"[[$:/plugins/felixhayashi/tiddlymap/misc/macros]]\">\n\nThe following wizard will assist you in creating the widget code you can use (copy'n'paste) to embed this view in a tiddler. Please visit the [[online demo|http://tiddlymap.org]] for some examples on how the attributes below affect the displayed graph.\n\n''Widget-code''\n\n<pre style=\"white-space: normal;\">\n&lt;$tiddlymap\n\nview=\"{{!!view}}\"\n\n<$list filter=\"[field:title<output>field:var.click-to-use[false]]\">\n  click-to-use=\"false\"\n</$list>\n<$list filter=\"[field:title<output>has[var.editor]]\">\n  editor=\"<$view tiddler=<<output>> field='var.editor' />\"\n</$list>\n<$list filter=\"[field:title<output>has[var.width]]\">\n  width=\"<$view tiddler=<<output>> field='var.width' />\"\n</$list>\n<$list filter=\"[field:title<output>has[var.height]]\">\n  height=\"<$view tiddler=<<output>> field='var.height' />\"\n</$list>\n<$list filter=\"[field:title<output>has[var.class]]\">\n  class=\"<$view tiddler=<<output>> field='var.class' />\"\n</$list>\n<$list filter=\"[field:title<output>field:var.show-buttons[false]]\">\n  show-buttons=\"false\"\n</$list>\n\n&gt;&lt;/$tiddlymap&gt;\n</pre>\n\nIf you are unsure about a parameter, just leave everything as is and simply copy the widget code displayed above.\n\n<fieldset>\n  <legend>Parameters</legend> \n  <table class=\"tmap-config-table\">\n      <$macrocall type=\"input-select\"\n          $name=\"tmap-row\"\n          title=\"View\"\n          field=\"view\" \n          selectFilter=<<tmap \"option\" \"selector.allViewsByLabel\">>\n          descr=\"The view to display\" />\n      <<tmap-row type:\"input-select\"\n          title:\"Editor bar\"\n          field:\"var.editor\"\n          selectFilter:\"[[|Hidden]]\n                        [[vis|Simple]]\n                        [[advanced|Advanced]]\"\n          descr:\"Whether the widget should act as an editor or not\">>\n      <<tmap-row type:\"input-text\"\n          title:\"Height\"\n          field:\"var.height\"\n          descr:\"Graph's height in css units. Defaults to '300px'.\">>\n      <<tmap-row type:\"input-text\"\n          title:\"Width\"\n          field:\"var.width\"\n          descr:\"Graph's width in css units. Defaults to '100%'.\">>\n      <<tmap-row type:\"input-text\"\n          title:\"Class\"\n          field:\"var.class\"\n          descr:\"A custom class to apply your own css.\">>\n      <<tmap-row type:\"input-checkbox\"\n          title:\"Click to use\"\n          field:\"var.click-to-use\"\n          default:\"true\"\n          descr:\"A click is needed to enable the graph.\">>\n      <<tmap-row type:\"input-checkbox\"\n          title:\"Show buttons\"\n          field:\"var.show-buttons\"\n          default:\"true\"\n          descr:\"Show or hide the graph's navigation buttons.\">>\n  </table>\n</fieldset>\n\n</$importvariables>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/getNodeTitle": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/getNodeTitle",
            "subtitle": "{{$:/core/images/tag-button}} Please specify a node title",
            "text": "\\rules except wikilink\n\n''Title'':\n<$edit-text field=\"text\" type=\"text\" tag=\"input\" default=\"\" focus=\"true\" tiddler=<<output>>\n            class=\"tmap-trigger-field tmap-triggers-ok-button-on-enter\" />\n            \n<sup>[1]</sup> \n\n<ul class=\"tmap-small-list\">\n<$set name=\"term\" value={{!!text}}>\n<$list filter=\"[all[tiddlers]!is[system]] +[search:title<term>]\" emptyMessage=\"//A tiddler with this title does not exist yet and will be created.//\">\n  <li>\n    <$button class=\"tc-btn-invisible tmap-link\">\n      <$view field=\"title\" />\n      <$action-setfield $tiddler=<<output>> text={{!!title}} />\n    </$button>\n  </li>\n</$list>\n</$set>\n</ul>\n\n---\n\n<sup>[1]</sup>\n<small>If you leave the title field blank, a name will be automatically generated for you. By choosing an existing title, you add the tiddler as node to the view.</small>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/previewContent": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/previewContent",
            "subtitle": "{{$:/core/images/video}} Previewing \"<<param.ref>>\"",
            "text": "\\rules except wikilink\n\n<$transclude tiddler=<<param.ref>> field=\"text\" mode=\"block\" />"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/getEdgeType": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/getEdgeType",
            "subtitle": "{{$:/plugins/felixhayashi/tiddlymap/icon}} Type specification (optional)",
            "text": "\\rules except wikilink\n\n\\define filter() $(allEdgeTypes)$ +[search:title[$(term)$]]\n\nYou are about to connect \"<<fromLabel>>\" with \"<<toLabel>>\". Please specify a type.\n\n''Type'': \n<$edit-text focus=\"true\" tiddler=<<output>> field=\"text\" type=\"text\" tag=\"input\" default=\"\"\n            class=\"tmap-trigger-field tmap-triggers-ok-button-on-enter\" />\n\n<$set name=\"term\" value={{!!text}}>\n<$set name=\"allEdgeTypes\" value=<<tmap \"option\" \"selector.allEdgeTypesByLabel\">>>\n\n<ul class=\"tmap-small-list\">\n<$list filter=<<filter>>\n    emptyMessage=\"//A type with this name does not exist yet\n                  and will be created.//\">\n  <li>\n    <$button class=\"tc-btn-invisible tmap-link\">\n      <$view field=\"title\" />\n      <$action-setfield $tiddler=<<output>> text={{!!title}} />\n    </$button>\n  </li>\n</$list>\n</ul>\n\n</$set>\n</$set>\n\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/deleteType": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/deleteType",
            "caption": "Removal",
            "text": "\\rules except wikilink\n\n\\define manage-edge-types()\n  <$macrocall $name=\"tmap-row\" title=\"Delete type\" field=\"temp.deleteType\" type=\"input-checkbox\" default={{!id}} readonly={{!!temp.idImmutable}} descr=\"If you want to delete this type, set this to true and click the save button afterwards. Predefined system types cannot be deleted.\" note=\"Consequently, all edges of this type will be deleted.\" />\n\\end\n\n\\define manage-node-types()\n  <$macrocall $name=\"tmap-row\" title=\"Delete type\" field=\"temp.deleteType\" type=\"input-checkbox\" default={{!id}} readonly={{!!temp.idImmutable}} descr=\"If you want to delete this type, set this to true and click the save button afterwards. Predefined system types cannot be deleted.\" />\n\\end\n\n<table class=\"tmap-config-table\"><$macrocall $name=<<mode>> /></table>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/description": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/description",
            "caption": "Description",
            "text": "\\rules except wikilink\n\n\\define manage-edge-types()\n  <<tmap-row type:\"input-textarea\"\n      title:\"Description\"\n      field:\"description\"\n      descr:\"An optional description for this type. The\n             description will be displayed as tooltip when\n             moving the mouse over an edge of this type.\">>\n\\end\n\n\\define manage-node-types()\n  <<tmap-row type:\"input-textarea\"\n      title:\"Description\"\n      field:\"description\" \n      descr:\"An optional description for this type.\">>\n\\end\n\n<table class=\"tmap-config-table\">\n  <$macrocall $name=<<mode>> />\n</table>\n\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/generalSettings": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/generalSettings",
            "caption": "General",
            "text": "\\rules except wikilink\n\n\\define manage-edge-types()\n  <<tmap-row type:\"input-text\"\n      title:\"Label\"\n      field:\"label\" \n      descr:\"An optional alias used as edge-label.\">>\n  <<tmap-row type:\"input-checkbox\"\n      title:\"Show label\"\n      field:\"show-label\"\n      default:\"true\"\n      descr:\"If unchecked, no edge label will be displayed.\">>\n\\end\n\\define manage-node-types()\n  <$list filter=\"[<currentTiddler>!field:id[tmap:neighbour]]\">\n  <<tmap-row type:\"input-textarea\"\n      title:\"Scope\"\n      field:\"scope\" \n      descr:\"A filter expression that defines, which nodes inherit\n             this node-type and its style.\">>\n  <$macrocall type=\"input-select\"\n      $name=\"tmap-row\" \n      title=\"View\"\n      field=\"view\"\n      nochoice=\"All views\"\n      selectFilter=<<tmap \"option\" \"selector.allViewsByLabel\">>\n      descr=\"Per default, this node type applies to nodes in all\n             views. However, you can bind this type to a certain\n             view only.\" />\n  </$list>\n\\end\n\n<table class=\"tmap-config-table\">\n  <$macrocall\n    $name=\"tmap-row\"\n    title=\"Identifier\"\n    field=\"temp.newId\"\n    type=\"input-text\"\n    default={{!!id}}\n    readonly={{!!temp.idImmutable}}\n    descr=\"A unique identifier\"\n  />\n  <$macrocall $name=<<mode>> />\n</table>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/overview": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/overview",
            "caption": "Overview",
            "text": "\\rules except wikilink\n\n\\define edge-type-attributes()\n  [[Created on|created]] [[Modified on|modified]] [[Instances|temp.usageCount]]\n\\end\n\n\\define node-type-attributes()\n  [[Created on|created]] [[Modified on|modified]]\n\\end\n\n! {{!!id}}\n\n<table class=\"tmap-key-value-table\">\n  <$set name=\"attributes\"\n        filter=\"[<mode>prefix[manage-edge-types]]\"\n        value=<<edge-type-attributes>>\n        emptyValue=<<node-type-attributes>>>\n  <$set name=\"self\" value=<<currentTiddler>>>\n    <$list filter=<<attributes>>>\n      <tr>\n        <th align=\"left\"><<tmap \"splitAndSelect\" \"|\" \"0\">></th>\n        <td>\n          <$transclude tiddler=<<self>> field=<<tmap \"splitAndSelect\" \"|\" \"1\">> />\n        </td>\n      </tr>\n    </$list>\n  </$set>\n  </$set>\n</table>\n\n{{!!description}}\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/styling": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/styling",
            "caption": "Styling",
            "text": "\\rules except wikilink\n\n\\define vis-refresh-trigger() $(temp)$/vis-refresh\n\n\\define url()\n  <$set\n      filter=\"[<mode>prefix[manage-edge-types]]\"\n      name=\"module\"\n      value=\"edges\"\n      emptyValue=\"nodes\">\n    [[vis.js.org|http://visjs.org/docs/network/$(module)$]]\n  </$set>\n\\end\n\n\\define manage-node-types()\n\n<fieldset><legend>Icon Settings</legend>\n  <table class=\"tmap-config-table\">\n    <<tmap-row type:\"input-text\"\n        title:\"TW-icon\"\n        field:\"tw-icon\"\n        descr:\"A tiddlywiki image reference.\n               For example '$:/core/icon' for Movotun Jack.\">>\n    <<tmap-row type:\"input-text\"\n        title:\"FA-icon\"\n        field:\"fa-icon\"\n        descr:\"A Font Awesome icon code.\n               For example 'f206' for the bicycle symbol.\">>\n  </table>\n</fieldset>\n\\end\n\n<div class=\"tmap-flash-message tmap-info\">\n   {{$:/core/images/info-button}}\n   All visjs options below are documented at <<url>>.\n</div>\n<$macrocall $name=<<mode>> />\n<fieldset><legend>Visjs styles</legend>\n<table class=\"tmap-config-table\">\n  <tr>\n    <td>Reset:</td>\n    <td>\n      <div class=\"tmap-button-wrapper\">\n        <$button>Reset style\n          <$action-setfield style=\"\" />\n          <$action-setfield $tiddler=<<vis-refresh-trigger>> text=\"\" />\n        </$button>\n     </div>\n   </td>\n   <td> Press the reset button to clear the style for this type.</td>\n  </tr>\n</table>\n<$tmap-config\n    mode=<<mode>>\n    inherited=\"vis-inherited\"\n    extension=\"style\"\n    refresh-trigger=<<vis-refresh-trigger>> />\n</fieldset>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager",
            "subtitle": "{{$:/core/images/tag-button}} <<topic>>",
            "buttons": "element_type_manager",
            "text": "\\rules except wikilink\n\n\\define defaultTab() $:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/overview\n\\define settingsTab() $:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/generalSettings\n\n\\define noTypeFound() \n<li>\n<$button tooltip=\"Create a new type\">\n  {{$:/core/images/new-button}} Create type\n  <$action-setfield $tiddler=\"$:/temp/tmap/elementTypeSearch\" text=\"\" />\n  <$action-sendmessage\n      $message=\"tmap:tm-create-type\"\n      mode=<<mode>> id={{$:/temp/tmap/elementTypeSearch}}\n      output=<<output>> />\n  <$action-setfield creation-name=\"\" />\n</$button>\n</li>\n\\end\n\n<$importvariables filter=\"[[$:/plugins/felixhayashi/tiddlymap/misc/macros]] [[$:/core/macros/tabs]]\">\n\n<div id=\"element-type-manager\">\n  <div>\n    <div class=\"searchbar\">\n      <$edit-text focus=\"true\" tiddler=\"$:/temp/tmap/elementTypeSearch\" type=\"text\" tag=\"input\" default=\"\" />\n    </div>\n    <ul>\n    <$list filter=<<filter>> emptyMessage=<<noTypeFound>>>\n      <li>\n        <$button class=\"tc-btn-invisible tmap-link\">{{!!title}}\n          <$action-setfield\n              $tiddler=<<qualify \"$:/state/tabs/elementTypeManager\">>\n              text=<<defaultTab>> />\n          <$action-sendmessage\n              $message=\"tmap:tm-load-type-form\"\n              id={{!!title}}\n              mode=<<mode>>\n              output=<<output>> />\n        </$button>\n      </li>\n    </$list>\n    </ul>\n  </div>\n  <div>\n    <$reveal type=\"nomatch\" text=\"\" default={{!!id}} >\n      <$macrocall\n          $name=\"tabs\"\n          default=<<defaultTab>>\n          state=\"$:/state/tabs/elementTypeManager\"\n          tabsList=\"[all[shadows]prefix[$:/plugins/felixhayashi/tiddlymap/dialog/elementTypeManager/]]\" />\n    </$reveal>\n    <$reveal type=\"match\" text=\"\" default={{!!id}} >\n      <div class=\"tmap-flash-message tmap-info\">\n        {{$:/core/images/info-button}} Please select a type from the\n        list or create a new one by entering the type name in the search field on the left.\n      </div>\n    </$reveal>\n  </div>\n</div>\n\n</$importvariables>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/getViewName": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/getViewName",
            "subtitle": "{{$:/core/images/tag-button}} Please specify a view name",
            "text": "\\rules except wikilink\n\nName:\n<$edit-text focus=\"true\" tiddler=<<output>> field=\"text\" type=\"text\" tag=\"input\" default=\"\"\n            class=\"tmap-trigger-field tmap-triggers-ok-button-on-enter\" /> <sup>[1]</sup>\n\n<$reveal type=\"nomatch\" text=\"0\" default=<<count>>>\n  \n  Note that ''<<count>>'' tiddlers are referencing this view and renaming the view will cause the reference to be invalid. It is recommended to first remove the tiddlymap widgets in the tiddlers listed below or change their view attributes accordingly.\n\n  ''References''\n\n  <ul>\n    <$list filter=<<filter>> variable=\"item\">\n      <li><$link><<item>></$link></li>\n    </$list>\n  </ul>\n  \n</$reveal>\n\n---\n\n<sup>[1]</sup> <small>Attention: using the name of an existing view will overwrite it!</small>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialog/welcome": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialog/welcome",
            "subtitle": "{{$:/core/images/info-button }} Welcome",
            "buttons": "ok",
            "text": "\\rules except wikilink\n\nIt seems that you freshly installed TiddlyMap.\n\n* In case you need any help, please consult the [[online docs|http://tiddlymap.org#Documentation]] first.\n* You are welcome to create an [[issue|https://github.com/felixhayashi/TW5-TiddlyMap/issues]] at GitHub for any bug you discover.\n* Make sure to revisit the [[demo site|http://tiddlymap.org]] to see whether your version is up-to-date.\n* If you like TiddlyMap, please give it a star at [[GitHub|https://github.com/felixhayashi/TW5-TiddlyMap]] or tell your friends about it :)\n\nHave a great time.\n\n---\n\n''Please note:'' By using this plugin you agree to the product's [[License Terms|$:/plugins/felixhayashi/tiddlymap/license]]. TiddlyMap is distributed under the [[BSD 2-Clause License|http://opensource.org/licenses/BSD-2-Clause]], which belongs to the same license family, as the license used by TiddlyWiki.\n\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialogFooter/close": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialogFooter/close",
            "text": "\\rules except wikilink\n\n<$button class=\"tmap-dialog-button tmap-close-button\" tooltip=\"Close this dialog\">Close\n\n  <!-- trigger dialog callback -->\n  <$action-setfield $tiddler=<<result>> text=\"1\" />\n                       \n</$button>\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialogFooter/ok": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialogFooter/ok",
            "text": "\\rules except wikilink\n\n<$button class=\"tmap-dialog-button tmap-ok-button\" tooltip=\"Confirm dialog\">OK\n\n  <!-- trigger dialog callback -->\n  <$action-setfield $tiddler=<<result>> text=\"1\" />\n                       \n</$button>\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialogFooter/ok_cancel": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialogFooter/ok_cancel",
            "text": "\\rules except wikilink\n\n<$transclude tiddler=\"$:/plugins/felixhayashi/tiddlymap/dialogFooter/ok\" mode=\"inline\" />\n<$button class=\"tmap-dialog-button tmap-cancel-button\" tooltip=\"Close dialog without saving\">Cancel\n  <!-- trigger dialog callback -->\n  <$action-setfield $tiddler=<<result>> text=\"\" />\n</$button>\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialogFooter/ok_suppress": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialogFooter/ok_suppress",
            "text": "\\rules except wikilink\n\n<$set name=\"currentTiddler\" value=<<title>> >\n\n<$checkbox field=\"suppress\" checked=\"1\" unchecked=\"0\" default=\"0\"> Do not show this dialog again</$checkbox>\n<$button class=\"tmap-dialog-button tmap-ok-button\" tooltip=\"Confirm this dialog\">OK\n\n  <!-- trigger dialog callback -->\n  <$action-setfield $tiddler=<<result>> text=\"1\" />\n  \n  <!-- suppress dialog in the future -->\n  <$action-sendmessage $message=\"tmap:tm-suppress-dialog\"\n                       dialog=<<templateId>>\n                       suppress={{!!suppress}} />\n                       \n</$button>\n\n</$set>"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialogFooter": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialogFooter",
            "text": "\\rules except wikilink\n\n\\define footer() $:/plugins/felixhayashi/tiddlymap/dialogFooter/$(buttons)$\n\n<$transclude tiddler=<<footer>> />\n\n<!-- we need this button to be able to close a tiddler from outside programmatically -->\n<$button class=\"tmap-hidden-close-button\" message=\"tm-close-tiddler\" />"
        },
        "$:/plugins/felixhayashi/tiddlymap/dialogFooter/element_type_manager": {
            "title": "$:/plugins/felixhayashi/tiddlymap/dialogFooter/element_type_manager",
            "text": "\\rules except wikilink\n\n<!--\n<$tiddler tiddler=<<temp>>>\n<$edit-text field=\"creation-name\" type=\"text\" tag=\"input\" />\n<$button\n    class=\"tmap-dialog-button tmap-create-button\"\n    tooltip=\"Create a new type\">Create\n  <$action-sendmessage\n      $message=\"tmap:tm-create-type\"\n      mode=<<mode>> id={{!!creation-name}}\n      output=<<output>>\n  />\n  <$action-setfield creation-name=\"\"\n  />\n</$button>\n</$tiddler>\n-->\n<$button\n    class=\"tmap-dialog-button tmap-save-button\"\n    tooltip=\"Save the current changes\">Save\n  <$action-sendmessage\n      $message=\"tmap:tm-save-type-form\"\n      mode=<<mode>>\n      output=<<output>> />\n</$button>\n<$button\n    class=\"tmap-dialog-button tmap-cancel-button\"\n    tooltip=\"Cancel the most resent changes and exit\">Quit\n  <$action-setfield $tiddler=<<result>> text=\"1\" />\n</$button>"
        },
        "$:/plugins/felixhayashi/tiddlymap/license": {
            "title": "$:/plugins/felixhayashi/tiddlymap/license",
            "subtitle": "License",
            "caption": "License",
            "text": "\\rules except wikilink\n\n!! TiddlyMap\n\nCopyright (c) 2014, Felix Küppers\nAll rights reserved.\n\nTiddlyMap is licensed under the [[BSD 2-Clause License|http://opensource.org/licenses/BSD-2-Clause]]. For the exact license terms, please visit [[https://github.com/felixhayashi/TW5-TiddlyMap/blob/master/LICENSE]]. \n\n!! TiddlyWiki\n\nCreated by Jeremy Ruston, (jeremy [at] jermolene [dot] com)\n\nCopyright © Jeremy Ruston 2004-2007 Copyright © UnaMesa Association 2007-2014\n\nPublished under the following [licenses](https://github.com/Jermolene/TiddlyWiki5/tree/master/licenses):\n\n# BSD 3-clause \"New\" or \"Revised\" License (including any right to adopt any future version of a license if permitted)\n# Creative Commons Attribution 3.0 (including any right to adopt any future version of a license if permitted)\n\n!! Vis.js\n\nCopyright (c) 2014 [Almende B.V.](https://github.com/almende/vis)\n\nPublished under the following licenses:\n\n# Apache License Version 2.0, January 2004 http://www.apache.org/licenses/\n# MIT License (MIT)\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/readme": {
            "title": "$:/plugins/felixhayashi/tiddlymap/readme",
            "text": "* Please refer to the project-readme hosted at [[https://github.com/felixhayashi/TW5-TiddlyMap]].\n* A demo with several examples and explanations can be found at [[http://tiddlymap.org]]."
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tmap:unknown": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tmap:unknown",
            "description": "Automatically assigned to an edge that does not have a type assigned",
            "style": "{\"color\":\"gray\"}",
            "show-label": "false"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tw-body:link": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tw-body:link",
            "description": "A link that is contained in the tiddler's body pointing to another resource.",
            "style": "{\"color\":\"orange\", \"dashes\":true}",
            "label": "links to",
            "text": ""
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tw-list:list": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tw-list:list",
            "description": "Contained in a list of this tiddler",
            "style": "{ \"color\": \"red\", \"dashes\":true}",
            "label": "listed in",
            "text": ""
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tw-list:tags": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes/tw-list:tags",
            "description": "A tag that refers to a tiddler of the same name.",
            "style": "{ \"color\": \"DarkSlateGray\", \"dashes\":true}",
            "label": "tagged with"
        },
        "$:/plugins/felixhayashi/tiddlymap/media/fullscreen.png": {
            "title": "$:/plugins/felixhayashi/tiddlymap/media/fullscreen.png",
            "type": "image/png",
            "text": "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"
        },
        "$:/plugins/felixhayashi/tiddlymap/media/halfscreen.png": {
            "created": "20150408173343768",
            "id": "2ad95ce9-d39f-4f03-9cfa-7bbdfd26dd6c",
            "modified": "20150408173350882",
            "title": "$:/plugins/felixhayashi/tiddlymap/media/halfscreen.png",
            "type": "image/png",
            "text": "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"
        },
        "$:/plugins/felixhayashi/tiddlymap/icon": {
            "created": "20150703133457707",
            "modified": "20150703141319471",
            "tags": "$:/tags/Image",
            "title": "$:/plugins/felixhayashi/tiddlymap/icon",
            "text": "<svg\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n   xmlns:cc=\"http://creativecommons.org/ns#\"\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   class=\"tc-image-tiddlymap-button tc-image-button\"\n   version=\"1.1\"\n   width=\"22pt\"\n   height=\"22pt\"\n   viewBox=\"0 0 128 128\">\n  <defs\n     id=\"defs4\">\n    <marker\n       refX=\"0\"\n       refY=\"0\"\n       orient=\"auto\"\n       id=\"Arrow1Lend\"\n       style=\"overflow:visible\">\n      <path\n         d=\"M 0,0 5,-5 -12.5,0 5,5 0,0 z\"\n         transform=\"matrix(-0.8,0,0,-0.8,-10,0)\"\n         id=\"path3850\"\n         style=\"fill-rule:evenodd;stroke:#000000;stroke-width:1pt\" />\n    </marker>\n    <marker\n       refX=\"0\"\n       refY=\"0\"\n       orient=\"auto\"\n       id=\"Arrow1Lstart\"\n       style=\"overflow:visible\">\n      <path\n         d=\"M 0,0 5,-5 -12.5,0 5,5 0,0 z\"\n         transform=\"matrix(0.8,0,0,0.8,10,0)\"\n         id=\"path3847\"\n         style=\"fill-rule:evenodd;stroke:#000000;stroke-width:1pt\" />\n    </marker>\n    <inkscape:path-effect\n       effect=\"skeletal\"\n       id=\"path-effect4329\" />\n    <inkscape:path-effect\n       effect=\"skeletal\"\n       id=\"path-effect4321\" />\n    <inkscape:path-effect\n       effect=\"skeletal\"\n       id=\"path-effect4315\" />\n    <inkscape:path-effect\n       effect=\"skeletal\"\n       id=\"path-effect4307\" />\n    <inkscape:path-effect\n       effect=\"skeletal\"\n       id=\"path-effect4299\" />\n    <inkscape:path-effect\n       effect=\"skeletal\"\n       id=\"path-effect4293\" />\n  </defs>\n  <g\n     transform=\"translate(0,-1024.5289)\"\n     id=\"layer1\">\n    <path\n       d=\"m 17.867073,4.5821643 a 3.7249374,3.7249374 0 1 1 -7.449875,0 3.7249374,3.7249374 0 1 1 7.449875,0 z\"\n       transform=\"matrix(-6.3328802,0,0,6.2775831,193.9581,1100.3667)\"\n       id=\"path4139-1-14\"\n       style=\"fill-opacity:1;fill-rule:nonzero\" />\n    <path\n       d=\"M 77.450496,1064.5069 C 58.849552,1025.9634 15.704158,1023.3858 2.8821873e-7,1034.558 L 0.02388589,1035.2674 C 24.502636,1022.2072 44.810725,1042.1507 60.163934,1074.112 z\"\n       id=\"path4337\"\n       style=\"fill-opacity:1;stroke-width:0.58181816;stroke-miterlimit:4;stroke-dasharray:none;marker-start:none;marker-end:none\" />\n    <path\n       d=\"m 12.878637,11.280739 4.75937,-2.7478243 4.759371,-2.7478236 0,5.4956479 0,5.495648 -4.759371,-2.747824 z\"\n       transform=\"matrix(4.6545455,0,0,4.6545455,-13.580429,1027.7638)\"\n       id=\"path3004\"\n       style=\"fill-opacity:1;fill-rule:nonzero\" />\n  </g>\n  <metadata\n     id=\"metadata3772\">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about=\"\">\n        <dc:title></dc:title>\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n</svg>\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/media/surface.png": {
            "title": "$:/plugins/felixhayashi/tiddlymap/media/surface.png",
            "type": "image/png",
            "text": "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"
        },
        "$:/plugins/felixhayashi/tiddlymap/misc/advancedEditorBar": {
            "title": "$:/plugins/felixhayashi/tiddlymap/misc/advancedEditorBar",
            "text": "\\rules except wikilink\n\\define showEdgeField() show-$(curEdgeId)$\n\n<!-- ===== View Switcher ======================================== -->\n\n<div class=\"tmap-menu-bar\">\n  View:\n  <$reveal type=\"match\" text=\"false\" default=<<param.isViewBound>> >\n    <$select\n        tiddler=<<param.ref.viewHolder>>\n        field=\"text\"\n        default=<<param.ref.view>> >\n      <$list filter=<<tmap \"option\" \"selector.allViewsByLabel\">> >\n        <option value={{!!title}}>\n          <$view tiddler={{!!title}} field=\"title\" />\n        </option>\n      </$list>\n    </$select>\n  </$reveal>\n  <$reveal type=\"match\" text=\"true\" default=<<param.isViewBound>> >\n    <b><<param.viewLabel>></b>\n  </$reveal>\n\n  <$button\n      popup=<<qualify \"$:/temp/menu\">>\n      tooltip=\"Open the Menu\">{{$:/core/images/menu-button}}\n  </$button>\n  \n  <$reveal type=\"popup\" position=\"below\" state=<<qualify \"$:/temp/menu\">> >\n    <div class=\"tc-drop-down\">\n      <a href=\"http://tiddlymap.org#Documentation\" target=\"_blank\">\n        {{$:/core/images/info-button}} Open online help\n      </a>\n      <$button class=\"tc-btn-invisible\" message=\"tmap:tm-create-view\">\n        {{$:/core/images/new-button}} Create empty view\n      </$button>\n      <$button class=\"tc-btn-invisible\" message=\"tmap:tm-generate-widget\">\n        {{$:/core/images/permalink-button}} Grab widget code\n      </$button>\n      <div class=\"tmap-list-separator\">Global configurations:</div>\n      <$button class=\"tc-btn-invisible\" message=\"tmap:tm-configure-system\">\n        {{$:/core/images/options-button}} Configure TiddlyMap\n      </$button>\n      <$button class=\"tc-btn-invisible\" message=\"tmap:tm-manage-edge-types\">\n        <span class=\"tmap-unicode-icon\">◭</span> Manage edge-types\n      </$button>\n      <$button class=\"tc-btn-invisible\" message=\"tmap:tm-manage-node-types\">\n        <span class=\"tmap-unicode-icon\">▢</span> Manage node-types\n      </$button>\n      <div class=\"tmap-view-actions\">\n        <div class=\"tmap-list-separator\">Actions for this view:</div>\n        <$button class=\"tc-btn-invisible\" message=\"tmap:tm-edit-view\">\n          {{$:/core/images/options-button}} Configure view\n        </$button>\n        <$button class=\"tc-btn-invisible\" message=\"tmap:tm-edit-filters\">\n          {{$:/core/images/edit-button}} Edit filters\n        </$button>\n        <$button class=\"tc-btn-invisible\" message=\"tmap:tm-store-position\">\n          {{$:/core/images/globe}} Save positions\n        </$button>\n        <$button class=\"tc-btn-invisible\" message=\"tmap:tm-rename-view\">\n          {{$:/core/images/tag-button}} Rename view\n        </$button>\n        <$button class=\"tc-btn-invisible\" message=\"tmap:tm-delete-view\">\n          {{$:/core/images/delete-button}} Delete view\n        </$button>\n      </div>\n    </div>\n  </$reveal>\n  \n  <$reveal\n      type=\"match\"\n      text=\"true\"\n      default=<<tmap \"option\" \"config.sys.editorMenuBar.showNeighScopeButton\">>>\n    <$button\n        class=\"tmap-neigh-scope-button\"\n        tooltip=\"Show or hide the neighbourhood\"\n        popup=<<qualify \"$:/temp/neighScope\">>>☀\n    </$button>\n  </$reveal>\n  \n  <$reveal type=\"popup\" position=\"below\" state=<<qualify \"$:/temp/neighScope\">> >\n    <div class=\"tc-drop-down\">\n    <$button class=\"tc-btn-invisible\">Hide neighbourhood\n      <$action-setfield\n          $tiddler=<<param.ref.view>>\n          config.neighbourhood_scope=\"0\" />\n    </$button>\n    <hr />\n    <$list filter=\"[[1|1 step distance]]\n                   [[2|2 step distance]]\n                   [[3|3 step distance]]\n                   [[4|4 step distance]]\n                   [[5|5 step distance]]\">\n      <$button class=\"tc-btn-invisible\">\n        <<tmap \"splitAndSelect\" \"|\" \"1\">>\n        <$action-setfield\n            $tiddler=<<param.ref.view>>\n            config.neighbourhood_scope=<<tmap \"splitAndSelect\" \"|\" \"0\">> />\n      </$button>\n    </$list>\n    <hr />\n    <$button class=\"tc-btn-invisible\">No limit\n      <$action-setfield\n          $tiddler=<<param.ref.view>>\n          config.neighbourhood_scope=\"100\" />\n    </$button>\n    </div>\n  </$reveal>\n  \n  <$reveal\n      type=\"match\"\n      text=\"true\"\n      default=<<tmap \"option\"\n                     \"config.sys.editorMenuBar.showScreenshotButton\">>>\n    <$button\n        tooltip=\"Open the map-export menu\"\n        popup=<<qualify \"$:/temp/mapExport\">>>\n      {{$:/core/images/download-button}}\n    </$button>\n  </$reveal>\n  \n  <$reveal\n      type=\"popup\"\n      position=\"below\"\n      state=<<qualify \"$:/temp/mapExport\">>>\n    <div class=\"tc-drop-down\">\n    <$button\n        class=\"tc-btn-invisible\">\n        {{$:/core/images/permalink-button}} Save as JSON file\n      <$action-sendmessage\n          $message=\"tmap:tm-download-graph\"\n          view=<<param.viewLabel>> />\n    </$button>\n    <$button\n        class=\"tc-btn-invisible\"\n        tooltip=\"Download graph as png image\">\n        {{$:/core/images/palette}} Save as png image\n      <$action-sendmessage $message=\"tmap:tm-download-canvas\" />\n    </$button>\n    </div>\n  </$reveal>\n    \n</div>"
        },
        "$:/plugins/felixhayashi/tiddlymap/misc/focusButton": {
            "title": "$:/plugins/felixhayashi/tiddlymap/misc/focusButton",
            "text": "\\define tooltip() Zoom on a specific node\n\n<div class=\"tmap-focus-button\">\n  <$reveal type=\"nomatch\" state=\"$:/temp/tmap/state/focus\" text=<<qualify>>>\n    <$button\n        tooltip=<<tooltip>>\n        class=<<tv-config-toolbar-class>>>{{$:/core/images/advanced-search-button}}\n     <$action-setfield $tiddler=<<param.searchOutput>> text=\"\" />\n     <$action-setfield $tiddler=\"$:/temp/tmap/state/focus\" text=<<qualify>> />\n     <$action-sendmessage $message=\"tmap:tm-reset-focus\" />\n    </$button>\n  </$reveal>\n  <$reveal type=\"match\" state=\"$:/temp/tmap/state/focus\" text=<<qualify>>>\n    <$button\n        tooltip=<<tooltip>>\n        class=<<tv-config-toolbar-class>>>{{$:/core/images/advanced-search-button}}\n     <$action-setfield $tiddler=\"$:/temp/tmap/state/focus\" text=\"\" />\n     <$action-sendmessage $message=\"tmap:tm-reset-focus\" />\n    </$button>\n    <div class=\"tmap-popup\">\n      <div class=\"tc-drop-down\">\n        <$edit-text\n            focus=\"true\"\n            tiddler=<<param.searchOutput>>\n            field=\"text\"\n            type=\"text\"\n            tag=\"input\"\n            default=\"\" />\n        <small><$count filter=<<param.nodeFilter>> /> results</small>\n        <hr />\n        <div class=\"tmap-very-small-list\">\n          <$list filter=<<param.nodeFilter>>\n              variable=\"item\"\n              emptyMessage=\"//No results//\">\n            <$button\n                class=\"tc-btn-invisible\"\n                set=\"$:/temp/tmap/state/focus\"\n                setTo=\"\" message=\"tmap:tm-focus-node\"\n                param=<<item>>>\n              <$view tiddler=<<item>> field=\"title\" />\n            </$button>\n          </$list>\n        </div>\n      </div>\n    </div>\n  </$reveal>\n</div>"
        },
        "$:/language/Buttons/TiddlyMap/Caption": {
            "title": "$:/language/Buttons/TiddlyMap/Caption",
            "text": "tiddlymap"
        },
        "$:/language/Buttons/TiddlyMap/Hint": {
            "title": "$:/language/Buttons/TiddlyMap/Hint",
            "text": "Toggle TiddlyMap actions"
        },
        "$:/plugins/felixhayashi/tiddlymap/misc/macros": {
            "title": "$:/plugins/felixhayashi/tiddlymap/misc/macros",
            "text": "\\define input-text(field, index, default, readonly)\n  <$reveal type=\"match\" text=\"\" default=\"$readonly$\">\n    <$edit-text tiddler=<<output>> field=\"$field$\" index=\"$index$\" type=\"text\" tag=\"input\" default=\"$default$\" />\n  </$reveal>\n  <$reveal type=\"nomatch\" text=\"\" default=\"$readonly$\">\n    <input type=\"text\" value=\"$default$\" readonly=\"true\" disabled=\"true\" />\n  </$reveal>\n\\end\n\n\\define input-button(field, index, default, default, label:\"Proceed\")\n  <div class=\"tmap-button-wrapper\">\n  <$button>$label$\n    <$action-setfield $tiddler=<<output>> $field=\"$field$\" index=\"$index$\" $value=\"$default$\" />\n  </$button>\n  </div>\n\\end\n\n\\define input-textarea(field, index, default, default)\n  <$edit-text tiddler=<<output>> field=\"$field$\" index=\"$index$\" autoHeight=\"no\" type=\"text\" tag=\"textarea\" default=\"$default$\" />\n\\end\n\n\\define input-checkbox(field, index, readonly, default)\n  <$reveal type=\"match\" text=\"\" default=\"$readonly$\">\n    <$checkbox\n        tiddler=<<output>>\n        field=\"$field$\"\n        index=\"$index$\"\n        checked=\"true\"\n        unchecked=\"false\"\n        default=\"$default$\" />\n  </$reveal>\n  <$reveal type=\"nomatch\" text=\"\" default=\"$readonly$\">\n    <input type=\"checkbox\" value=\"$default$\" readonly=\"true\" disabled=\"true\" />\n  </$reveal>\n\\end\n\n\\define input-select(field, index, selectFilter, default, nochoice)\n  <$select tiddler=<<output>> field=\"$field$\" index=\"$index$\" default=\"$default$\">\n    <$set name=\"nochoice\" value=\"$nochoice$\">\n      <$list filter=\"[<nochoice>regexp[.+]]\">\n        <option value=\"\"><b><<nochoice>></b></option>\n      </$list>\n    </$set>\n    <$list filter=\"$selectFilter$\">\n      <option value=<<tmap \"splitAndSelect\" \"|\" \"0\">> >\n        <$view tiddler=<<tmap \"splitAndSelect\" \"|\" \"1\">> field=\"title\" />   \n      </option>\n    </$list> \n  </$select>\n\\end\n\n\\define input-radio(field, index, selectFilter, default)\n  <$list filter=\"$selectFilter$\">\n    <$radio tiddler=<<output>> field=\"$field$\" index=\"$index$\" value=<<tmap \"splitAndSelect\" \"|\" \"0\">>>\n      <<tmap \"splitAndSelect\" \"|\" \"1\">>\n    </$radio><br />\n  </$list>\n\\end\n\n\\define tmap-row(title, field, index, type, descr, note, label, default, readonly, reset, selectFilter, nochoice)\n  <tr>\n    <td class=\"tmap-title\">$title$:</td>\n    <td>\n      <div>\n        <<$type$\n          field:\"$field$\"\n          index:\"$index$\"\n          readonly:\"$readonly$\"\n          default:\"$default$\"\n          label:\"$label$\"\n          selectFilter:\"$selectFilter$\"\n          nochoice:\"$nochoice$\" >>\n        <$reveal type=\"match\" text=\"true\" default=\"$reset$\">\n          <$button>reset\n            <$action-setfield $tiddler=<<output>> $field=\"$field$\" $index=\"$index$\" $value=\"$default$\" />\n          </$button>\n        </$reveal>\n      </div>\n    </td>\n    <td>\n      <span class=\"tmap-description\">$descr$</span>\n      <$reveal type=\"nomatch\" text=\"\" default=\"$note$\">\n        <div class=\"tmap-note\">''Note:'' $note$</div>\n      </$reveal>\n    </td>\n  </tr>\n\\end"
        },
        "$:/plugins/felixhayashi/tiddlymap/misc/defaultViewHolder": {
            "title": "$:/plugins/felixhayashi/tiddlymap/misc/defaultViewHolder",
            "text": "$:/plugins/felixhayashi/tiddlymap/graph/views/Default"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/nodeTypes/tmap:neighbour": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/nodeTypes/tmap:neighbour",
            "description": "Neighbours are all nodes that are not part of the original set of nodes (\"matches\") but are connected (either outgoing or incoming) to a node of the original set.",
            "style": "{\"color\":\"#E6E6E6\"}"
        },
        "$:/plugins/felixhayashi/tiddlymap/misc/quickConnectButton": {
            "tags": "$:/tags/ViewToolbar",
            "title": "$:/plugins/felixhayashi/tiddlymap/misc/quickConnectButton",
            "description": "{{$:/language/Buttons/TiddlyMap/Hint}}",
            "caption": "{{$:/plugins/felixhayashi/tiddlymap/icon}} {{$:/language/Buttons/TiddlyMap/Caption}}",
            "text": "\\define buttonClass() $(tv-config-toolbar-class)$ $(additional-classes)$\n\n\\define defConFiltr() [!suffix[tw-body:link]]\n\n\\define tiddlerSearchFilter()\n[!is[system]!has[draft.of]search:title{$:/temp/quickConnectSearch}sort[title]]\n\\end\n\n\\define showButton(state)\n<$button set=\"$:/temp/tiddlymap/quickConnectButton\"\n         setTo=\"$state$\" tooltip={{$:/language/Buttons/TiddlyMap/Hint}} \n         aria-label={{$:/language/Buttons/TiddlyMap/Caption}}\n         class=<<buttonClass>>>\n<$list filter=\"[<tv-config-toolbar-icons>prefix[yes]]\">{{$:/plugins/felixhayashi/tiddlymap/icon}}</$list>\n<$list filter=\"[<tv-config-toolbar-text>prefix[yes]]\">\n<span class=\"tc-btn-text\"><$text text={{$:/language/Buttons/TiddlyMap/Caption}}/></span>\n</$list>\n</$button>\n\\end\n\n\\define hidePopup()\n<$macrocall $name=\"showButton\" state=<<qualify>> />\n\\end\n\n\\define showPopup()\n<$set name=\"additional-classes\" value=\"tmap-active-button\"><$macrocall $name=\"showButton\" state=\"\" /></$set>\n<div class=\"tmap-quick-connect tc-reveal tc-popup\">\n  <div class=\"tc-drop-down\">\n    <div>{{$:/core/images/new-button}} ''Create connection''</div>\n    <table>\n      <tr>\n        <td>Type:</td>\n        <td>\n          <$edit-text tiddler=\"$:/temp/quickConnectSearch/type\" field=\"text\" type=\"text\" tag=\"input\" default=\"\" />\n          <$select tiddler=\"$:/temp/quickConnectSearch/type\" default=\"\">\n            <option></option>\n            <$list filter=<<tmap \"option\" \"selector.allEdgeTypesByLabel\">>  >\n              <option>{{!!title}}</option>\n            </$list>\n          </$select>\n        </td>\n      </tr>\n      <tr>\n        <td>Search:</td>\n        <td>\n          <$edit-text tiddler=\"$:/temp/quickConnectSearch\" type=\"text\" tag=\"input\" default=\"\"></$edit-text>\n          <small><$count filter=<<tiddlerSearchFilter>> /> results</small>\n        </td>\n      </tr>\n      <tr>\n        <td colspan=\"2\">\n          <table class=\"tmap-very-small-list\">\n            <$list filter=<<tiddlerSearchFilter>> variable=\"item\" emptyMessage=\"//No results//\">\n            <tr>\n              <td>\n                <$button>⇦\n                  <$action-sendmessage $message=\"tmap:tm-create-edge\"\n                                       from=<<item>>\n                                       to=<<currentTiddler>>\n                                       label={{$:/temp/quickConnectSearch/type}}\n                                       view={{$:/temp/quickConnectSearch/view}} />\n                </$button>\n              </td>\n              <td>\n                <$button>⇨\n                  <$action-sendmessage $message=\"tmap:tm-create-edge\"\n                                       from=<<currentTiddler>>\n                                       to=<<item>>\n                                       label={{$:/temp/quickConnectSearch/type}}\n                                       view={{$:/temp/quickConnectSearch/view}} />\n                </$button>\n              </td>\n              <td><$view tiddler=<<item>> field=\"title\" /></td>\n            </tr>\n            </$list>\n          </table>\n        </td>\n      </tr>\n    </table>\n    <hr />\n    <div>''Existing Connections''\n      <span class=\"tmap-hide-links\">\n        <$checkbox tiddler=\"$:/temp/tmap/qc\" field=\"filter\" checked=<<defConFiltr>> unchecked=\"\" default=\"\">\n          hide links\n        </$checkbox>\n      </span>\n    </div>\n    <p>\n      <$tmap-connections filter={{$:/temp/tmap/qc!!filter}} emptyMessage=\"–\">\n        <div>\n          <$button class=\"tc-btn-invisible\">{{$:/core/images/close-button}}\n            <$action-sendmessage $message=\"tmap:tm-remove-edge\" id=<<edge.id>> from=<<edge.from>> to=<<edge.to>> type=<<edge.type>> />\n          </$button>\n          <<direction>>\n          <$link to=<<neighbour>>>\n            <$view field=\"title\" />\n          </$link>\n          (<<edge.type>>)\n        </div>\n      </$tmap-connections>\n    </p>      \n  </div>\n</div>\n\\end\n\n<$list filter=\"[{$:/temp/tiddlymap/quickConnectButton}prefix<qualify>]\" variable=\"item\" emptyMessage=<<hidePopup>>><<showPopup>></$list>"
        },
        "$:/plugins/felixhayashi/tiddlymap/hook/editor": {
            "caption": "Map",
            "tags": "$:/tags/SideBar",
            "title": "$:/plugins/felixhayashi/tiddlymap/hook/editor",
            "text": "\\define map(width, height, clickToUse)\n<$tiddlymap\n  class=\"tmap-sidebar-map-editor\"\n  editor=\"advanced\"\n  object-id=\"main_editor\"\n  click-to-use=\"$clickToUse$\"\n  width=\"$width$\"\n  height=\"$height$\"\n  bottom-spacing=\"35px\">\n</$tiddlymap>\n\\end\n\n<div class=\"tmap-mobile-editor\">\n<!--\n<<map width:\"100%\" height:\"300px\" clickToUse:\"true\">>\n-->\nThe editor is not displayed in mobile mode.\n</div>\n\n<div class=\"tmap-desktop-editor\">\n<<map width:\"calc(100% - 15px)\" clickToUse:\"false\">>\n</div>"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/views/Default/filter/edges": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/views/Default/filter/edges",
            "filter": "[prefix[$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes]]"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/views/Default/filter/nodes": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/views/Default/filter/nodes",
            "filter": "[!is[system]!has[draft.of]] +[limit[100]]"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/views/Default": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/views/Default",
            "config.physics_mode": "true",
            "isview": "true"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/views/Live View/filter/edges": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/views/Live View/filter/edges",
            "filter": "[prefix[$:/plugins/felixhayashi/tiddlymap/graph/edgeTypes]]",
            "text": "\n\n"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/views/Live View/filter/nodes": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/views/Live View/filter/nodes",
            "filter": "[field:title{$:/temp/tmap/currentTiddler}]"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/views/Live View": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/views/Live View",
            "config.neighbourhood_scope": "1",
            "config.refresh-triggers": "$:/temp/tmap/currentTiddler",
            "config.physics_mode": "true",
            "isview": "true"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/views/Graph search/filter/nodes": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/views/Graph search/filter/nodes",
            "filter": "[!is[system]search{$:/temp/search}] [!is[system]search:tags{$:/temp/search}] [!is[system]search:text{$:/temp/search}limit[10]]"
        },
        "$:/plugins/felixhayashi/tiddlymap/graph/views/Graph search": {
            "title": "$:/plugins/felixhayashi/tiddlymap/graph/views/Graph search",
            "config.refresh-triggers": "$:/temp/search",
            "config.neighbourhood_scope": "1",
            "config.physics_mode": "true"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/widget/MapConfigWidget": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/widget/MapConfigWidget\ntype: application/javascript\nmodule-type: widget\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var e=require(\"$:/core/modules/widgets/widget.js\").widget;var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/ViewAbstraction\").ViewAbstraction;var i=require(\"$:/plugins/felixhayashi/vis/vis.js\");var s=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var r=function(t,i){e.call(this);this.initialise(t,i);this.adapter=$tw.tmap.adapter;this.opt=$tw.tmap.opt;this.notify=$tw.tmap.notify;this.computeAttributes();s.addListeners({\"tmap:tm-clear-config\":function(){alert(\"nice\")}},this,this)};r.prototype=Object.create(e.prototype);r.prototype.render=function(e,t){if(!this.parentDomNode){this.parentDomNode=e;this.wrapper=document.createElement(\"div\");$tw.utils.addClass(this.wrapper,\"tmap-config-widget\");e.appendChild(this.wrapper)}if(this.network){var r=this.parentDomNode.getBoundingClientRect().height;this.parentDomNode.style[\"height\"]=r+\"px\";this.network.destroy()}var n=document.createElement(\"div\");this.wrapper.appendChild(n);this.refreshTrigger=this.getAttribute(\"refresh-trigger\");this.pipeTRef=this.getVariable(\"currentTiddler\");this.inheritedFields=$tw.utils.parseStringArray(this.getAttribute(\"inherited\"));this.extensionTField=this.getAttribute(\"extension\");this.mode=this.getAttribute(\"mode\");for(var o=0;o<this.inheritedFields.length;o++){var a=this.inheritedFields[o];var h=s.parseFieldData(this.pipeTRef,a,{});if(this.mode===\"manage-edge-types\"){if(!h.edges){h={edges:h}}}else if(this.mode===\"manage-node-types\"){if(!h.nodes){h={nodes:h}}}this.inherited=s.merge(this.inherited,h)}this.extension=s.parseFieldData(this.pipeTRef,this.extensionTField,{});if(this.mode===\"manage-edge-types\"){if(!this.extension.edges){this.extension={edges:this.extension}}}else if(this.mode===\"manage-node-types\"){if(!this.extension.nodes){this.extension={nodes:this.extension}}}this.changes=s.isTrue(this.getAttribute(\"save-only-changes\"))?{}:this.extension;var d={nodes:new i.DataSet([]),edges:new i.DataSet([])};this.network=new i.Network(n,d,{});this.reloadVisOptions();this.network.on(\"configChange\",this.handleConfigChange.bind(this));$tw.tmap.registry.push(this)};r.prototype.reloadVisOptions=function(){var e=s.merge({},this.inherited,this.extension);$tw.utils.extend(e,{configure:{enabled:true,showButton:false,filter:this.getOptionFilter(this.mode)}});this.network.setOptions(e)};r.prototype.handleConfigChange=function(e){this.changes=s.merge(this.changes,e);var t=s.merge({},this.changes);if(this.mode===\"manage-node-types\"){t=t[\"nodes\"]}if(this.mode===\"manage-edge-types\"){t=t[\"edges\"]}s.writeFieldData(this.pipeTRef,this.extensionTField,t)};r.prototype.getOptionFilter=function(e){var t={nodes:{borderWidth:true,borderWidthSelected:true,color:{background:true},font:true,icon:true,labelHighlightBold:true,shadow:true,shape:true,shapeProperties:true,size:true},edges:{arrows:true,color:true,dashes:true,font:true,labelHighlightBold:true,length:true,selfReferenceSize:true,shadow:true,smooth:true,width:true},interaction:{hideEdgesOnDrag:true,hideNodesOnDrag:true,tooltipDelay:true,labelHighlightBold:true,shadow:true,shape:true,shapeProperties:true,size:true},layout:{hierarchical:false},manipulation:{initiallyActive:true},physics:{forceAtlas2Based:{gravitationalConstant:true,springLength:true,springConstant:true,damping:true}}};if(e===\"manage-edge-types\"){t={edges:t.edges}}else if(e===\"manage-node-types\"){t={nodes:t.nodes}}return function(e,i){i=i.concat([e]);var s=t;for(var r=0,n=i.length;r<n;r++){if(s[i[r]]===true){return true}else if(s[i[r]]==null){return false}s=s[i[r]]}return false}};r.prototype.isZombieWidget=function(){return!document.body.contains(this.parentDomNode)};r.prototype.destruct=function(){if(this.network){this.network.destroy()}};r.prototype.refresh=function(e){if(this.isZombieWidget()||!this.network)return;if(e[this.refreshTrigger]){this.refreshSelf();return true}};r.prototype.setNull=function(e){for(var t in e){if(typeof e[t]==\"object\"){this.setNull(e[t])}else{e[t]=undefined}}};exports[\"tmap-config\"]=r})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/widget/MapConfigWidget",
            "type": "application/javascript",
            "module-type": "widget"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/widget/connections": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/widget/connections\ntype: application/javascript\nmodule-type: widget\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var e=require(\"$:/core/modules/widgets/widget.js\").widget;var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/EdgeType\").EdgeType;var r=function(t,r){e.call(this,t,r);this.utils=$tw.tmap.utils};r.prototype=Object.create(e.prototype);r.prototype.render=function(e,t){this.parentDomNode=e;this.computeAttributes();this.execute();this.renderChildren(e,t)};r.prototype.execute=function(){var e=[this.getVariable(\"currentTiddler\")];var t=this.getAttribute(\"filter\",\"\");var r={typeWL:$tw.tmap.adapter.getEdgeTypeWhiteList(t)};var i=$tw.tmap.adapter.getNeighbours(e,r);var s=i.nodes;var a=i.edges;var o=[];for(var n in a){var h=a[n];var p=s[h.to]?\"To\":\"From\";var d=s[h[p.toLowerCase()]];if(!d)continue;o.push({type:\"tmap-edgelistitem\",edge:h,neighbour:d,direction:p,children:this.parseTreeNode.children})}if(!o.length){this.wasEmpty=true;o=this.getEmptyMessage()}else if(this.wasEmpty){this.removeChildDomNodes()}this.makeChildWidgets(o)};r.prototype.getEmptyMessage=function(){var e=this.wiki.parseText(\"text/vnd.tiddlywiki\",this.getAttribute(\"emptyMessage\",\"\"),{parseAsInline:true});return e?e.tree:[]};r.prototype.refresh=function(e){var t=this.computeAttributes();if(t.filter||t.emptyMessage){this.refreshSelf();return true}for(var r in e){if(!this.utils.isSystemOrDraft(r)){this.refreshSelf();return true}}return this.refreshChildren(e)};exports[\"tmap-connections\"]=r;var i=function(t,r){e.call(this,t,r);this.utils=$tw.tmap.utils};i.prototype=Object.create(e.prototype);i.prototype.execute=function(){var e=this.parseTreeNode;var t=$tw.tmap.indeces.tById[e.neighbour.id];var r=this.utils.flatten(e.edge);for(var i in r){if(typeof r[i]===\"string\"){this.setVariable(\"edge.\"+i,r[i])}}this.setVariable(\"currentTiddler\",t);this.setVariable(\"neighbour\",t);this.setVariable(\"direction\",e.direction);this.makeChildWidgets()};i.prototype.refresh=function(e){return this.refreshChildren(e)};exports[\"tmap-edgelistitem\"]=i})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/widget/connections",
            "type": "application/javascript",
            "module-type": "widget"
        },
        "$:/plugins/felixhayashi/tiddlymap/js/widget/MapWidget": {
            "text": "/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/widget/MapWidget\ntype: application/javascript\nmodule-type: widget\n\n@module TiddlyMap\n@preserve\n\n\\*/\n(function(){\"use strict\";var e=require(\"$:/core/modules/widgets/widget.js\").widget;var t=require(\"$:/plugins/felixhayashi/tiddlymap/js/config/vis\").config;var i=require(\"$:/plugins/felixhayashi/tiddlymap/js/utils\").utils;var s=require(\"$:/plugins/felixhayashi/tiddlymap/js/DialogManager\").DialogManager;var r=require(\"$:/plugins/felixhayashi/tiddlymap/js/CallbackManager\").CallbackManager;var a=require(\"$:/plugins/felixhayashi/tiddlymap/js/ViewAbstraction\").ViewAbstraction;var n=require(\"$:/plugins/felixhayashi/tiddlymap/js/EdgeType\").EdgeType;var o=require(\"$:/plugins/felixhayashi/tiddlymap/js/NodeType\").NodeType;var d=require(\"$:/plugins/felixhayashi/vis/vis.js\");var h=function(t,a){e.call(this);this.initialise(t,a);this.adapter=$tw.tmap.adapter;this.opt=$tw.tmap.opt;this.notify=$tw.tmap.notify;this.fsapi=i.getFullScreenApis();this.getAttr=this.getAttribute;this.isDebug=i.isTrue(this.opt.config.sys.debug,false);this.callbackManager=new r;this.dialogManager=new s(this.callbackManager,this);this.computeAttributes();this.editorMode=this.getAttr(\"editor\");this.clickToUse=i.isTrue(this.getAttr(\"click-to-use\"),true);this.objectId=this.getAttr(\"object-id\")||i.genUUID();if(this.editorMode){i.addListeners({\"tmap:tm-create-view\":this.handleCreateView,\"tmap:tm-rename-view\":this.handleRenameView,\"tmap:tm-delete-view\":this.handleDeleteView,\"tmap:tm-edit-view\":this.handleEditView,\"tmap:tm-configure-system\":this.handleConfigureSystem,\"tmap:tm-store-position\":this.handleStorePositions,\"tmap:tm-edit-filters\":this.handleEditFilters,\"tmap:tm-generate-widget\":this.handleGenerateWidget,\"tmap:tm-download-canvas\":this.handleDownloadCanvas},this,this)}i.addListeners({\"tmap:tm-focus-node\":this.handleFocusNode,\"tmap:tm-reset-focus\":this.repaintGraph},this,this)};h.prototype=Object.create(e.prototype);h.prototype.handleConnectionEvent=function(e,t){var s={fromLabel:this.adapter.selectNodeById(e.from).label,toLabel:this.adapter.selectNodeById(e.to).label};var r=\"getEdgeType\";this.dialogManager.open(r,s,function(s,r){if(s){var a=i.getText(r);var o=this.view.getConfig(\"edge_type_namespace\");var d=i.hasSubString(a,\":\");a=new n((o&&!d?o:\"\")+a);if(!a.exists())a.persist();e.type=a.getId();var h=this.adapter.insertEdge(e);var l=this.view.getEdgeFilter(\"compiled\");var p=this.adapter.getEdgeTypeWhiteList(l);if(!p[a.getId()]){var g={type:a.getId(),view:this.view.getLabel()};$tw.tmap.dialogManager.open(\"edgeNotVisible\",g)}this.preventFitAfterRebuild=true}if(typeof t===\"function\"){t(s)}})};h.prototype.checkForFreshInstall=function(){var e=this.opt.ref.sysMeta;if(i.getEntry(e,\"showWelcomeMessage\",true)){i.setEntry(e,\"showWelcomeMessage\",false);this.dialogManager.open(\"welcome\")}};h.prototype.openStandardConfirmDialog=function(e,t){var i={message:t};this.dialogManager.open(\"getConfirmation\",i,e)};h.prototype.logger=function(e,t){if(this.isDebug){var i=Array.prototype.slice.call(arguments,1);i.unshift(\"@\"+this.objectId.toUpperCase());i.unshift(e);$tw.tmap.logger.apply(this,i)}};h.prototype.render=function(e,t){this.parentDomNode=e;if(i.isPreviewed(this)){this.renderPreview(e)}else{this.renderFullWidget(e)}};h.prototype.renderPreview=function(e){$tw.utils.addClass(e,\"tmap-graph-placeholder\")};h.prototype.renderFullWidget=function(e){this.registerClassNames(e);this.addLoadingBar(e);this.sidebar=i.getFirstElementByClassName(\"tc-sidebar-scrollable\");this.isContainedInSidebar=this.sidebar&&this.sidebar.contains(this.parentDomNode);this.viewHolderRef=this.getViewHolderRef();this.view=this.getView();this.doFitAfterStabilize=true;this.preventFitAfterRebuild=false;this.initAndRenderEditorBar(e);this.initAndRenderGraph(e);$tw.tmap.registry.push(this);this.reloadRefreshTriggers();this.checkForFreshInstall()};h.prototype.registerClassNames=function(e){var t=$tw.utils.addClass;t(e,\"tmap-widget\");if(this.clickToUse){t(e,\"tmap-click-to-use\")}if(this.getAttr(\"editor\")===\"advanced\"){t(e,\"tmap-advanced-editor\")}if(!i.isTrue(this.getAttr(\"show-buttons\"),true)){t(e,\"tmap-no-buttons\")}if(this.getAttr(\"class\")){t(e,this.getAttr(\"class\"))}};h.prototype.addLoadingBar=function(e){this.graphLoadingBarDomNode=document.createElement(\"div\");$tw.utils.addClass(this.graphLoadingBarDomNode,\"tmap-loading-bar\");e.appendChild(this.graphLoadingBarDomNode)};h.prototype.initAndRenderEditorBar=function(e){this.graphBarDomNode=document.createElement(\"div\");$tw.utils.addClass(this.graphBarDomNode,\"tmap-topbar\");e.appendChild(this.graphBarDomNode);this.rebuildEditorBar();this.renderChildren(this.graphBarDomNode)};h.prototype.rebuildEditorBar=function(){var e=i.flatten({param:{viewLabel:this.view.getLabel(),isViewBound:String(this.isViewBound()),ref:{view:this.view.getRoot(),viewHolder:this.getViewHolderRef(),edgeFilter:this.view.getPaths().edgeFilter},allEdgesFilter:this.opt.selector.allEdgeTypes,searchOutput:\"$:/temp/tmap/bar/search\",nodeFilter:\"[list[$:/temp/tmap/nodes/\"+this.view.getLabel()+\"]\"+\"search:title{$:/temp/tmap/bar/search}]\"}});for(var t in e){this.setVariable(t,e[t])}var s={type:\"tiddler\",attributes:{tiddler:{type:\"string\",value:this.view.getRoot()}},children:[]};if(this.editorMode===\"advanced\"){s.children.push({type:\"transclude\",attributes:{tiddler:{type:\"string\",value:this.opt.ref.graphBar}}})}else{s.children.push({type:\"element\",tag:\"span\",attributes:{\"class\":{type:\"string\",value:\"tmap-view-label\"}},children:[{type:\"text\",text:e[\"param.viewLabel\"]}]})}s.children.push({type:\"transclude\",attributes:{tiddler:{type:\"string\",value:this.opt.ref.focusButton}}});this.makeChildWidgets([s])};h.prototype.refresh=function(e){if(this.isZombieWidget()||!this.network||i.isPreviewed(this))return;this.callbackManager.handleChanges(e);if(i.hasPropWithPrefix(e,this.opt.path.options)){this.reloadOptions()}if(i.hasPropWithPrefix(e,this.opt.path.nodeTypes)){this.rebuildGraph()}var t=this.checkForViewSwitch(e);var s=this.view.refresh(e);if(t||s.length){var r={resetData:true,resetOptions:true,resetFocus:{delay:0,duration:0}};if(t){this.logger(\"warn\",\"View switched\");this.view=this.getView(true);this.reloadRefreshTriggers()}else{this.logger(\"warn\",\"View modified\",s);r.resetData=false;if(this.preventFitAfterRebuild){r.resetFocus=false}}this.rebuildGraph(r)}else{this.checkOnGraph(e)}this.checkOnEditorBar(e,t,s)};h.prototype.reloadRefreshTriggers=function(){this.callbackManager.remove(this.refreshTriggers);var e=this.getAttr(\"refresh-triggers\")||this.view.getConfig(\"refresh-triggers\");this.refreshTriggers=$tw.utils.parseStringArray(e)||[];this.logger(\"debug\",\"Registering refresh trigger\",this.refreshTriggers);var t=this.handleTriggeredRefresh.bind(this);for(var i=this.refreshTriggers.length;i--;){this.callbackManager.add(this.refreshTriggers[i],t,false)}};h.prototype.rebuildGraph=function(e){if(i.isPreviewed(this))return;this.logger(\"debug\",\"Rebuilding graph\");e=e||{};this.hasNetworkStabilized=false;this.network.selectNodes([]);this.network.releaseNode();if(e.resetData){this.graphData.edges.clear();this.graphData.nodes.clear();this.graphData.edgesById=null;this.graphData.nodesById=null}if(e.resetOptions){this.reloadOptions()}if(!e.resetFocus){this.doFitAfterStabilize=false}this.rebuildGraphData(true);if(!i.hasElements(this.graphData.nodesById)){return}this.network.stabilize();if(e.resetFocus&&!this.preventFitAfterRebuild){this.doFitAfterStabilize=true;this.fitGraph(e.resetFocus.delay,e.resetFocus.duration)}this.preventFitAfterRebuild=false};h.prototype.getContainer=function(){return this.parentDomNode};h.prototype.reloadOptions=function(){this.network.setOptions({nodes:undefined,edges:undefined,interaction:undefined,layout:undefined,manipulation:undefined,physics:undefined});this.graphOptions=this.getGraphOptions();this.network.setOptions(this.graphOptions)};h.prototype.rebuildGraphData=function(e){$tw.tmap.start(\"Reloading Network\");if(!e&&this.graphData){return this.graphData}var t=this.adapter.getGraph({view:this.view});var s=t.nodes;var r=t.edges;this.graphData.nodes=this.getRefreshedDataSet(s,this.graphData.nodesById,this.graphData.nodes);this.graphData.edges=this.getRefreshedDataSet(r,this.graphData.edgesById,this.graphData.edges);this.graphData.nodesById=s;this.graphData.edgesById=r;i.setField(\"$:/temp/tmap/nodes/\"+this.view.getLabel(),\"list\",this.adapter.getTiddlersById(s));$tw.tmap.stop(\"Reloading Network\");return this.graphData};h.prototype.isViewBound=function(){return i.startsWith(this.getViewHolderRef(),this.opt.path.localHolders)};h.prototype.checkForViewSwitch=function(e){if(this.isViewBound()){return false}if(e[this.getViewHolderRef()]){if(!this.view.isEqual(i.getText(this.getViewHolderRef()))){this.prevView=null;return true}}return false};h.prototype.checkOnEditorBar=function(e,t,i){if(t||i.length){this.removeChildDomNodes();this.rebuildEditorBar();this.renderChildren(this.graphBarDomNode);return true}else{return this.refreshChildren(e)}};h.prototype.checkOnGraph=function(e){var t=this.view.getNodeFilter(\"compiled\");var s=i.getMatches(t,Object.keys(e),true);for(var r in e){if(i.isSystemOrDraft(r))continue;var a=s[r];var n=this.graphData.nodesById[this.adapter.getId(r)];if(a||n){this.rebuildGraph();return}}var o=this.view.getEdgeFilter(\"compiled\");var d=i.getMatches(o,Object.keys(e));if(d.length){this.logger(\"info\",\"Changed edge-types\",d);this.rebuildGraph();return}};h.prototype.initAndRenderGraph=function(e){this.logger(\"info\",\"Initializing and rendering the graph\");this.graphDomNode=document.createElement(\"div\");e.appendChild(this.graphDomNode);$tw.utils.addClass(this.graphDomNode,\"tmap-vis-graph\");e.style[\"width\"]=this.getAttr(\"width\",\"100%\");this.handleResizeEvent=this.handleResizeEvent.bind(this);this.handleClickEvent=this.handleClickEvent.bind(this);this.handleFullScreenChange=this.handleFullScreenChange.bind(this);window.addEventListener(\"resize\",this.handleResizeEvent,false);if(!this.isContainedInSidebar){this.callbackManager.add(\"$:/state/sidebar\",this.handleResizeEvent)}window.addEventListener(\"click\",this.handleClickEvent,false);if(this.fsapi){window.addEventListener(this.fsapi[\"_fullscreenChange\"],this.handleFullScreenChange,false)}this.handleResizeEvent();this.graphOptions=this.getGraphOptions();this.graphData={nodes:new d.DataSet,edges:new d.DataSet,nodesById:i.getDataMap(),edgesById:i.getDataMap()};this.network=new d.Network(this.graphDomNode,this.graphData,this.graphOptions);this.visNetworkDomNode=this.graphDomNode.firstElementChild;this.addKeyBindings();var t={click:this.handleVisSingleClickEvent,doubleClick:this.handleVisDoubleClickEvent,stabilized:this.handleVisStabilizedEvent,dragStart:this.handleVisDragStart,dragEnd:this.handleVisDragEnd,select:this.handleVisRightClick,oncontext:this.handleVisSelect,beforeDrawing:this.handleVisBeforeDrawing,showPopup:this.handleVisShowPopup,stabilizationProgress:this.handleVisLoading,stabilizationIterationsDone:this.handleVisLoadingDone};for(var s in t){this.network.on(s,t[s].bind(this))}this.addGraphButtons({\"fullscreen-button\":function(){this.handleToggleFullscreen(false)}});if(this.isContainedInSidebar){this.addGraphButtons({\"halfscreen-button\":function(){this.handleToggleFullscreen(true)}})}this.rebuildGraph({resetFocus:{delay:0,duration:0}})};h.prototype.addKeyBindings=function(e){this.visNetworkDomNode.tabIndex=0;var t=d.keycharm({container:this.parentDomNode});t.bind(\"delete\",function(){this.handleRemoveElement(this.network.getSelection())}.bind(this))};h.prototype.isMobileMode=function(){var e=i.getText(this.opt.ref.sidebarBreakpoint,960);return window.innerWidth<=parseInt(e)};h.prototype.getGraphOptions=function(){var e=this.opt.config.vis;var t=i.parseJSON(this.view.getConfig(\"vis\"));var s=i.merge({},e,t);s.clickToUse=this.clickToUse;s.manipulation.enabled=!!this.editorMode;s.manipulation.deleteNode=function(e,t){this.handleRemoveElement(e);this.resetVisManipulationBar(t)}.bind(this);s.manipulation.deleteEdge=function(e,t){this.handleRemoveElement(e);this.resetVisManipulationBar(t)}.bind(this);s.manipulation.addEdge=function(e,t){this.handleConnectionEvent(e);this.resetVisManipulationBar(t)}.bind(this);s.manipulation.addNode=function(e,t){this.handleInsertNode(e);this.resetVisManipulationBar(t)}.bind(this);s.manipulation.editEdge=function(e,t){this.handleReconnectEdge(e);this.resetVisManipulationBar(t)}.bind(this);s.manipulation.editNode=function(e,t){this.handleEditNode(e);this.resetVisManipulationBar(t)}.bind(this);var r=this.view.isEnabled(\"physics_mode\")?.001:0;var a=s.physics;a[a.solver]=a[a.solver]||{};a[a.solver].centralGravity=r;a.stabilization.iterations=this.view.getStabilizationIterations();this.logger(\"debug\",\"Loaded graph options\",s);return s};h.prototype.resetVisManipulationBar=function(e){if(e)e(null);this.network.disableEditMode();this.network.enableEditMode()};h.prototype.handleCreateView=function(){this.dialogManager.open(\"createView\",null,function(e,t){if(e){var s=i.getText(t);var r=new a(s);if(r.isLocked()){this.notify(\"Forbidden!\")}else{var r=this.adapter.createView(s);this.setView(r)}}})};h.prototype.handleRenameView=function(){if(!this.view.isLocked()){var e=this.view.getReferences();var t={count:e.length.toString(),filter:i.joinAndWrap(e,\"[[\",\"]]\")};this.dialogManager.open(\"getViewName\",t,function(e,t){if(e){var s=i.getText(t);var r=new a(s);if(!s||r.isLocked()){this.notify(\"Forbidden!\")}else{this.view.rename(s);this.setView(this.view)}}})}else{this.notify(\"Forbidden!\")}};h.prototype.handleEditView=function(){var e={view:this.view.getLabel(),createdOn:this.view.getCreationDate(true),numberOfNodes:\"\"+Object.keys(this.graphData.nodesById).length,numberOfEdges:\"\"+Object.keys(this.graphData.edgesById).length,dialog:{preselects:this.view.getConfig()}};e.dialog.preselects[\"vis-inherited\"]=JSON.stringify(this.opt.config.vis);this.dialogManager.open(\"configureView\",e,function(e,t){if(!e)return;var s=i.getPropertiesByPrefix(t.fields,\"config.\");this.view.setConfig(s);if(s[\"config.physics_mode\"]){this.handleStorePositions()}})};h.prototype.handleDownloadCanvas=function(){var e=this.parentDomNode.getElementsByTagName(\"canvas\")[0];var t=e.toDataURL(\"image/png\");var i=document.createElement(\"a\");i.download=\"Map snapshot – \"+this.view.getLabel()+\".png\";i.href=t;var s=new MouseEvent(\"click\");i.dispatchEvent(s)};h.prototype.handleDeleteView=function(){var e=this.view.getLabel();if(this.view.isLocked()){this.notify(\"Forbidden!\");return}var t=this.view.getReferences();if(t.length){var s={count:t.length.toString(),filter:i.joinAndWrap(t,\"[[\",\"]]\")};this.dialogManager.open(\"cannotDeleteViewDialog\",s);return}var r=\"You are about to delete the view \"+\"''\"+e+\"'' (no tiddler currently references this view).\";this.openStandardConfirmDialog(function(t){if(t){this.view.destroy();this.setView(this.opt.misc.defaultViewLabel);this.notify('view \"'+e+'\" deleted ')}},r)};h.prototype.handleTriggeredRefresh=function(e){this.logger(\"log\",e,\"Triggered a refresh\");this.rebuildGraph({resetData:false,resetOptions:false,resetFocus:{delay:1e3,duration:1e3}})};h.prototype.handleConfigureSystem=function(){var e={dialog:{preselects:{\"vis-inherited\":JSON.stringify(t),\"config.vis\":i.getText(this.opt.ref.visUserConf),\"config.sys\":this.opt.config.sys}}};var s=\"configureTiddlyMap\";this.dialogManager.open(s,e,function(e,t){if(e&&t){var s=i.getPropertiesByPrefix(t.fields,\"config.sys.\",true);this.wiki.setTiddlerData(this.opt.ref.sysUserConf,s);i.setField(this.opt.ref.visUserConf,\"text\",t.fields[\"config.vis\"])}})};h.prototype.handleReconnectEdge=function(e){var t=this.graphData.edges.get(e.id);this.adapter.deleteEdge(t);var i=$tw.utils.extend(t,e);this.preventFitAfterRebuild=true;return this.adapter.insertEdge(i)};h.prototype.handleRemoveElement=function(e){if(e.edges.length&&!e.nodes.length){this.handleRemoveEdges(e.edges)}if(e.nodes.length){this.handleRemoveNode(this.graphData.nodesById[e.nodes[0]])}this.resetVisManipulationBar()};h.prototype.handleRemoveEdges=function(e){this.adapter.deleteEdges(this.graphData.edges.get(e));this.notify(\"edge\"+(e.length>1?\"s\":\"\")+\" removed\");this.preventFitAfterRebuild=true};h.prototype.handleRemoveNode=function(e){var t={\"var.nodeLabel\":e.label,\"var.nodeRef\":$tw.tmap.indeces.tById[e.id],dialog:{preselects:{\"opt.delete\":\"from\"+\" \"+(this.view.isExplicitNode(e)?\"filter\":\"system\")}}};this.dialogManager.open(\"deleteNodeDialog\",t,function(t,i){if(t){if(i.fields[\"opt.delete\"]===\"from system\"){this.adapter.deleteNode(e)}else{var s=this.view.removeNodeFromFilter(e);if(!s){this.notify(\"Couldn't remove node from filter\");return}}this.preventFitAfterRebuild=true;this.notify(\"Node removed \"+i.fields[\"opt.delete\"])}})};h.prototype.handleFullScreenChange=function(){if(this.fsapi&&this.enlargedMode===\"fullscreen\"&&!document[this.fsapi[\"_fullscreenElement\"]]){this.handleToggleFullscreen()}};h.prototype.handleToggleFullscreen=function(e){this.logger(\"log\",\"Toggled graph enlargement\");if(this.enlargedMode){this.network.setOptions({clickToUse:this.clickToUse});i.findAndRemoveClassNames([\"tmap-\"+this.enlargedMode,\"tmap-has-\"+this.enlargedMode+\"-child\"]);if(this.enlargedMode===\"fullscreen\"){document[this.fsapi[\"_exitFullscreen\"]]()}this.enlargedMode=null}else{if(!e&&!this.fsapi){this.dialogManager.open(\"fullscreenNotSupported\");return}this.enlargedMode=this.isContainedInSidebar&&e?\"halfscreen\":\"fullscreen\";$tw.utils.addClass(this.parentDomNode,\"tmap-\"+this.enlargedMode);var t=this.isContainedInSidebar?this.sidebar:i.getFirstElementByClassName(\"tc-story-river\");$tw.utils.addClass(t,\"tmap-has-\"+this.enlargedMode+\"-child\");if(this.enlargedMode===\"fullscreen\"){document.documentElement[this.fsapi[\"_requestFullscreen\"]](Element.ALLOW_KEYBOARD_INPUT)}this.notify(\"Activated \"+this.enlargedMode+\" mode\");this.network.setOptions({clickToUse:false})}this.handleResizeEvent()};h.prototype.handleGenerateWidget=function(e){$tw.rootWidget.dispatchEvent({type:\"tmap:tm-generate-widget\",paramObject:{view:this.view.getLabel()}})};h.prototype.handleStorePositions=function(e){this.view.saveNodeData(this.network.getPositions());if(!this.view.isEnabled(\"physics_mode\")){this.rebuildGraph()}if(e){this.notify(\"positions stored\")}};h.prototype.handleEditFilters=function(){var e=i.getPrettyFilter(this.view.getNodeFilter(\"expression\"));var t=i.getPrettyFilter(this.view.getEdgeFilter(\"expression\"));var s={view:this.view.getLabel(),dialog:{preselects:{prettyNodeFilter:e,prettyEdgeFilter:t}}};this.dialogManager.open(\"editFilters\",s,function(s,r){if(s){this.view.setNodeFilter(i.getField(r,\"prettyNodeFilter\",e));this.view.setEdgeFilter(i.getField(r,\"prettyEdgeFilter\",t))}})};h.prototype.handleVisStabilizedEvent=function(e){if(!this.hasNetworkStabilized){this.hasNetworkStabilized=true;this.logger(\"log\",\"Network stabilized after \"+e.iterations+\" iterations\");this.view.setStabilizationIterations(e.iterations);var t=this.view.isEnabled(\"physics_mode\");this.network.storePositions();this.setNodesMoveable(this.graphData.nodesById,t);if(this.doFitAfterStabilize){this.doFitAfterStabilize=false;this.fitGraph(1e3,1e3)}}};h.prototype.handleFocusNode=function(e){this.network.focus(this.adapter.getId(e.param),{scale:1.5,animation:true})};h.prototype.isZombieWidget=function(){return!document.body.contains(this.getContainer())};h.prototype.fitGraph=function(e,t){window.clearTimeout(this.activeFitTimeout);var i=function(){if(this.isZombieWidget())return;this.network.redraw();this.network.fit({animation:{duration:t||0,easingFunction:\"easeOutQuart\"}})};this.activeFitTimeout=window.setTimeout(i.bind(this),e||0)};h.prototype.handleInsertNode=function(e){this.dialogManager.open(\"getNodeTitle\",null,function(t,s){if(t){var r=i.getText(s);if(i.tiddlerExists(r)){if(i.isMatch(r,this.view.getNodeFilter(\"compiled\"))){this.notify(\"Node already exists\");return}else{e=this.adapter.makeNode(r,e);this.view.addNodeToView(e)}}else{e.label=r;this.adapter.insertNode(e,{view:this.view,editNodeOnCreate:false})}this.preventFitAfterRebuild=true}})};h.prototype.handleEditNode=function(e){var t=$tw.tmap.indeces.tById[e.id];var s=i.getTiddler(t);var r=JSON.stringify(this.opt.config.vis);var a=this.view.getConfig(\"vis\");var n=this.adapter.getInheritedNodeStyles([e.id]);var o=JSON.stringify(n[t]);var d=JSON.stringify(i.merge({},{color:s.fields[\"color\"]},i.parseJSON(s.fields[\"tmap.style\"])));var h=this.view.getLabel();var l={id:e.id};var p=this.view.getNodeData(e.id,true)||{};delete p.x;delete p.y;var g={view:h,tiddler:s.fields.title,tidColor:s.fields[\"color\"],tidIcon:s.fields[this.opt.field.nodeIcon]||s.fields[\"tmap.fa-icon\"],dialog:{preselects:{\"inherited-global-default-style\":r,\"inherited-local-default-style\":a,\"inherited-group-styles\":o,\"global-node-style\":d,\"local-node-style\":JSON.stringify(p)}}};this.dialogManager.open(\"editNode\",g,function(s,r){if(!s)return;var a=r.fields[\"global-node-style\"];i.setField(t,\"tmap.style\",a||null);var n=i.parseJSON(r.fields[\"local-node-style\"]);this.view.saveNodeStyle(e.id,n);this.preventFitAfterRebuild=true})};h.prototype.handleVisSingleClickEvent=function(e){if(i.isTrue(this.opt.config.sys.singleClickMode)){this.handleVisClickEvent(e)}};h.prototype.handleVisDoubleClickEvent=function(e){if(!e.nodes.length&&!e.edges.length){if(this.editorMode){this.handleInsertNode(e.pointer.canvas)}}else if(!i.isTrue(this.opt.config.sys.singleClickMode)){this.handleVisClickEvent(e)}};h.prototype.handleVisClickEvent=function(e){if(e.nodes.length){this.openTiddlerWithId(e.nodes[0])}else if(e.edges.length){if(!this.editorMode)return;this.logger(\"debug\",\"Clicked on an Edge\");var t=this.opt.config.sys.edgeClickBehaviour;var i=new n(this.graphData.edgesById[e.edges[0]].type);if(t===\"manager\"){$tw.rootWidget.dispatchEvent({type:\"tmap:tm-manage-edge-types\",paramObject:{type:i.getId()}})}}};h.prototype.handleResizeEvent=function(e){if(this.isZombieWidget())return;var t=this.getAttr(\"height\");if(!t&&this.isContainedInSidebar){var i=this.parentDomNode.getBoundingClientRect().top;var s=parseInt(this.getAttr(\"bottom-spacing\",25));var r=window.innerHeight-i;t=r-s+\"px\"}this.parentDomNode.style[\"height\"]=t||\"300px\";this.repaintGraph()};h.prototype.handleClickEvent=function(e){if(this.isZombieWidget()||!this.network)return;var t=document.elementFromPoint(e.clientX,e.clientY);if(!this.parentDomNode.contains(t)){var i=this.network.getSelection();if(i.nodes.length||i.edges.length){this.logger(\"debug\",\"Clicked outside; deselecting nodes/edges\");this.network.selectNodes([]);this.resetVisManipulationBar()}}else if(this.graphDomNode.contains(t)){this.visNetworkDomNode.focus()}};h.prototype.handleVisRightClick=function(e){};h.prototype.handleVisShowPopup=function(e){};h.prototype.handleVisDragEnd=function(e){if(e.nodes.length){var t=this.graphData.nodesById[e.nodes[0]];if(!this.view.isEnabled(\"physics_mode\")){this.setNodesMoveable([t],false);var i=parseInt(this.opt.config.sys.raster);if(i){var s=this.network.getPositions()[t.id];this.graphData.nodes.update({id:t.id,x:s.x-s.x%i,y:s.y-s.y%i})}this.handleStorePositions()}}};h.prototype.handleVisSelect=function(e){};h.prototype.handleVisBeforeDrawing=function(e){};h.prototype.handleVisLoading=function(e){this.graphLoadingBarDomNode.style.display=\"block\";var t=\"Loading \"+e.iterations/e.total*100+\"%\";this.graphLoadingBarDomNode.innerHTML=t};h.prototype.handleVisLoadingDone=function(e){this.graphLoadingBarDomNode.style.display=\"none\"};h.prototype.handleVisDragStart=function(e){if(e.nodes.length){var t=this.graphData.nodesById[e.nodes[0]];this.setNodesMoveable([t],true)}};h.prototype.destruct=function(){window.removeEventListener(\"resize\",this.handleResizeEvent);window.removeEventListener(\"click\",this.handleClickEvent);window.removeEventListener(\"click\",this.handleFullScreenChange);if(this.network){this.network.destroy()}};h.prototype.openTiddlerWithId=function(e){var t=$tw.tmap.indeces.tById[e];this.logger(\"debug\",\"Opening tiddler\",t,\"with id\",e);if(this.enlargedMode===\"fullscreen\"){var i=this.wiki.findDraft(t);var s=!!i;if(!s){var r=\"tm-edit-tiddler\";this.dispatchEvent({type:r,tiddlerTitle:t});i=this.wiki.findDraft(t)}var a={draftTRef:i};var n=\"fullscreenTiddlerEditor\";this.dialogManager.open(n,a,function(e,r){if(e){var a=\"tm-save-tiddler\";this.dispatchEvent({type:a,tiddlerTitle:i})}else if(!s){var a=\"tm-cancel-tiddler\";this.dispatchEvent({type:a,tiddlerTitle:i})}var a=\"tm-close-tiddler\";this.dispatchEvent({type:a,tiddlerTitle:t})})}else{this.dispatchEvent({type:\"tm-navigate\",navigateTo:t})}};h.prototype.getViewHolderRef=function(){if(this.viewHolderRef){return this.viewHolderRef}this.logger(\"info\",\"Retrieving or generating the view holder reference\");var e=this.getAttr(\"view\");if(e){this.logger(\"log\",'User wants to bind view \"'+e+'\" to graph');var t=this.opt.path.views+\"/\"+e;if(this.wiki.getTiddler(t)){var s=this.opt.path.localHolders+\"/\"+i.genUUID();this.logger(\"log\",'Created an independent temporary view holder \"'+s+'\"');this.wiki.addTiddler(new $tw.Tiddler({title:s,text:t}));this.logger(\"log\",'View \"'+t+'\" inserted into independend holder')}else{this.logger(\"log\",'View \"'+e+'\" does not exist')}}if(typeof s===\"undefined\"){this.logger(\"log\",\"Using default (global) view holder\");var s=this.opt.ref.defaultViewHolder}return s};h.prototype.setView=function(e,t){if(e){var i=new a(e).getLabel();t=t||this.viewHolderRef;this.logger(\"info\",\"Inserting view '\"+i+\"' into holder '\"+t+\"'\");this.wiki.addTiddler(new $tw.Tiddler({title:t,text:i}))}this.view=this.getView(true)};h.prototype.getView=function(e){if(!e&&this.view){return this.view}var t=this.getViewHolderRef();var s=new a(i.getText(t));this.logger(\"info\",'Retrieved view \"'+s.getLabel()+'\" from holder \"'+t+'\"');if(s.exists()){return s}else{this.logger(\"log\",'Warning: View \"'+s.getLabel()+\"\\\" doesn't exist. Default is used instead.\");return new a(\"Default\")}};h.prototype.getRefreshedDataSet=function(e,t,s){if(!s){return new d.DataSet(i.convert(e,\"array\"))}var r=[];for(var a in t){if(!e[a]){r.push(a)}}s.remove(r);var n=s.get({returnType:\"Object\"});var o=[];for(var a in e){var h=e[a];if(n[a]){for(var l in n[a]){if(l===\"x\"||l===\"y\")continue;if(h[l]===undefined){h[l]=null}}}o.push(h)}s.update(o);return s};h.prototype.repaintGraph=function(){if(this.network&&(!this.fsapi||!document[this.fsapi[\"_fullscreenElement\"]]||this.enlargedMode)){this.logger(\"info\",\"Repainting the whole graph\");this.network.redraw();this.fitGraph(0,1e3)}};h.prototype.setGraphButtonEnabled=function(e,t){var s=\"vis-button\"+\" \"+\"tmap-\"+e;var r=i.getFirstElementByClassName(s,this.parentDomNode);$tw.utils.toggleClass(r,\"tmap-button-enabled\",t)};h.prototype.dialogPostProcessor=function(){this.network.selectNodes([]);this.resetVisManipulationBar()};h.prototype.setNodesMoveable=function(e,t){this.network.storePositions();var i=[];var s=Object.keys(e);for(var r=s.length;r--;){var a=e[s[r]].id;var n={id:a,fixed:{x:!t,y:!t}};i.push(n)}this.graphData.nodes.update(i)};h.prototype.addGraphButtons=function(e){var t=i.getFirstElementByClassName(\"vis-navigation\",this.parentDomNode);for(var s in e){var r=document.createElement(\"div\");r.className=\"vis-button \"+\" \"+\"tmap-\"+s;r.addEventListener(\"click\",e[s].bind(this),false);t.appendChild(r);this.setGraphButtonEnabled(s,true)}};if($tw.boot.tasks.trapErrors){var l=window.onerror;window.onerror=function(e,t,i){if(e.indexOf(\"NS_ERROR_NOT_AVAILABLE\")!==-1&&t==\"$:/plugins/felixhayashi/vis/vis.js\"){console.error(\"Strange firefox related vis.js error (see #125)\",arguments)}else if(e.indexOf(\"Permission denied to access property\")!==-1){console.error(\"Strange firefox related vis.js error (see #163)\",arguments)}else if(l){l.apply(this,arguments)}}}exports.tiddlymap=h})();",
            "title": "$:/plugins/felixhayashi/tiddlymap/js/widget/MapWidget",
            "type": "application/javascript",
            "module-type": "widget"
        }
    }
}